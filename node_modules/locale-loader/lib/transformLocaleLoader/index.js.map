{"version":3,"sources":["lib/transformLocaleLoader/index.js"],"names":["transformLocaleLoader","noChunk","obj","file","enc","done","content","contents","toString","folderPath","dirname","path","readdir","files","filter","loader","Buffer","push","transform"],"mappings":";;;;;;;;;;;;;;kBAOwBA,qB;;AAPxB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEe,SAASA,qBAAT,GAEP;AAAA,iFAAJ,EAAI;AAAA,0BADNC,OACM;AAAA,MADNA,OACM,gCADI,KACJ;;AACN,SAAO,kBAAQC,GAAR;AAAA,2EAAY,iBAAyBC,IAAzB,EAA+BC,GAA/B,EAAoCC,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AACXC,qBADW,GACDH,KAAKI,QAAL,CAAcC,QAAd,CAAuBJ,GAAvB,CADC;;AAAA,mBAEb,4BAAaE,OAAb,CAFa;AAAA;AAAA;AAAA;;AAGTG,wBAHS,GAGI,eAAKC,OAAL,CAAaP,KAAKQ,IAAlB,CAHJ;AAAA;AAAA,qBAIM,kBAAGC,OAAH,CAAWH,UAAX,CAJN;;AAAA;AAAA;AAITI,mBAJS,iBAI8BC,MAJ9B;AAKTC,oBALS,GAKA,qCAAsB;AACnCF,4BADmC;AAEnCZ,yBAASA,WAAW,uBAAaA,OAAb,CAAqBK,OAArB;AAFe,eAAtB,CALA;;AASfH,mBAAKI,QAAL,GAAgB,IAAIS,MAAJ,CAAWD,MAAX,EAAmB,MAAnB,CAAhB;;AATe;AAWjB,mBAAKE,IAAL,CAAUd,IAAV;AACAE;;AAZiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAZ;;AAAA,aAA2Ba,SAA3B;AAAA;AAAA;;AAAA,WAA2BA,SAA3B;AAAA,MAAP;AAcD","file":"index.js","sourcesContent":["import through from 'through2';\nimport fs from 'fs-extra';\nimport path from 'path';\nimport isLocaleFile from '../isLocaleFile';\nimport generateLoaderContent from '../generateLoaderContent';\nimport isLoaderFile from '../isLoaderFile';\n\nexport default function transformLocaleLoader({\n  noChunk = false,\n} = {}) {\n  return through.obj(async function transform(file, enc, done) {\n    const content = file.contents.toString(enc);\n    if (isLoaderFile(content)) {\n      const folderPath = path.dirname(file.path);\n      const files = (await fs.readdir(folderPath)).filter(isLocaleFile);\n      const loader = generateLoaderContent({\n        files,\n        noChunk: noChunk || isLoaderFile.noChunk(content),\n      });\n      file.contents = new Buffer(loader, 'utf8');\n    }\n    this.push(file);\n    done();\n  });\n}\n"]}