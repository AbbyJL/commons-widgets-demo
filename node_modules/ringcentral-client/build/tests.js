!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(t){"use strict";function r(t){i.expect(t).to.has.keys(["navigation","paging","records","uri"])}var o=this;Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=n(39),u=n(40),a=n(66);n(144);var c=n(145);n(149);var p,h=!!s.createReadStream,f=new Date;f.setFullYear(f.getFullYear()-1),before(function(){return c.default.then(function(t){var e=t;return p=new a.default(new u(e.app)),p.service.platform().login(e.user)})}),describe("Account",function(){it("Get Account info",function(){return p.account().get().then(function(t){i.expect(t).to.contain.keys(["id","uri","mainNumber","operator","serviceInfo","setupWizardState","status"])})}),it("Get Account info with id not exists should return 404",function(){return p.account("accountIdNotExist").get().catch(function(t){i.expect(t.apiResponse.response().status).to.eq(404)})})}),describe("Extension",function(){var t=["uri","id","extensionNumber","contact","name","type","status","permissions","profileImage"];it("get current extension",function(){return p.account().extension().get().then(function(e){i.expect(e).to.contain.keys(t)})}),it("Get extension list",function(){return p.account().extension().list().then(function(e){r(e),i.expect(e.records[0]).to.has.keys(t)})}),it("Union type parameters, update extension info",function(){return p.account().extension().put({status:"Enabled"}).then(function(e){i.expect(e).to.contain.keys(t)})})}),describe("Binary response",function(){it("Get message content as binary",function(){var t=p.account().extension();return t.messageStore().list({dateFrom:f.toISOString()}).then(function(t){if(t.records.length<=0)throw new Error("No messages found for this extension.");return t.records[0]}).then(function(e){return t.messageStore(e.id).content(e.attachments[0].id).get().then(function(t){})})}),it("Get recording content",function(){var t=p.account().extension();return t.callLog().list({dateFrom:f.toISOString(),withRecording:!0}).then(function(t){if(!(t.records.length<=0))return t.records[0].recording}).then(function(t){if(t)return p.account().recording(t.id+"").content().get().then(function(t){i.expect(t.headers.get("content-type")).to.has.string("audio/mpeg")})})})});var d=t+"/res/banner_index_logged.png";describe("Binary request",function(){before("Only run in node",function(){h||o.skip()}),it("Put profile image, input binary, response is empty.",function(){return p.account().extension().profileImage().put(s.createReadStream(d))}),it("Post profile image, input binary, response is empty.",function(){return p.account().extension().profileImage().post(s.createReadStream(d))}),it("gets current profile image",function(){return p.account().extension().profileImage().get()})}),describe("Fax",function(){it("send fax, post form data",function(){var t;return t=s.createReadStream?["Text attentment for test. Followed by a png picture.",s.createReadStream(d)]:["Test fax test sent from browser, "+navigator.userAgent],p.account().extension().fax().post({to:[{phoneNumber:"+16507411615"}]},t)}),it("send fax fail, empty parameter",function(){return p.account().extension().fax().post({},[]).then(function(t){throw new Error("should not send.")},function(t){i.expect(t.apiResponse.json().errorCode).to.eq("InvalidParameter")})})}),describe("Call Log",function(){it("Get call log",function(){return p.account().extension().callLog().list({dateFrom:f.toISOString(),perPage:2}).then(function(t){r(t),t.records.length<1,i.expect(t.records[0]).to.has.keys(["uri","id","sessionId","startTime","duration","type","direction","action","result","to","from"])})}),it("delete today's call log",function(){return p.account().extension().callLog().delete()})}),describe("post",function(){it("send sms, post plain object",function(){return p.account().extension().sms().post({from:{phoneNumber:"+17322764403"},text:"test sms text content.",to:[{phoneNumber:"+16507411615"}]}).then(function(t){i.expect(t).to.has.keys(["uri","id","to","from","type","creationTime","readStatus","priority","attachments","direction","availability","subject","messageStatus","smsSendingAttemptsCount","conversationId","conversation","lastModifiedTime"])})}),it("send sms, without from",function(){return p.account().extension().sms().post({text:"test sms text content.",to:[{phoneNumber:"+16507411615"}]}).then(function(t){throw new Error("should fail")}).catch(function(t){i.expect(t.apiResponse.json().errorCode).to.eq("InvalidParameter")})})})}).call(e,"/")},function(t,e,n){t.exports=n(2)},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=[];/*!
	 * Chai version
	 */
e.version="4.1.2",/*!
	 * Assertion Error
	 */
e.AssertionError=n(3);/*!
	 * Utils for plugins (not exported)
	 */
var o=n(4);e.use=function(t){return~r.indexOf(t)||(t(e,o),r.push(t)),e},/*!
	 * Utility Functions
	 */
e.util=o;/*!
	 * Configuration
	 */
var i=n(16);e.config=i;/*!
	 * Primary `Assertion` prototype
	 */
var s=n(34);e.use(s);/*!
	 * Core Assertions
	 */
var u=n(35);e.use(u);/*!
	 * Expect interface
	 */
var a=n(36);e.use(a);/*!
	 * Should interface
	 */
var c=n(37);e.use(c);/*!
	 * Assert interface
	 */
var p=n(38);e.use(p)},function(t,e){/*!
	 * assertion-error
	 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
	 * MIT Licensed
	 */
/*!
	 * Return a function that will copy properties from
	 * one object to another excluding any originally
	 * listed. Returned function will create a new `{}`.
	 *
	 * @param {String} excluded properties ...
	 * @return {Function}
	 */
function n(){function t(t,n){Object.keys(n).forEach(function(r){~e.indexOf(r)||(t[r]=n[r])})}var e=[].slice.call(arguments);return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(t,e,o){var i=n("name","message","stack","constructor","toJSON"),s=i(e||{});this.message=t||"Unspecified AssertionError",this.showDiff=!1;for(var u in s)this[u]=s[u];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(t){this.stack=t.stack}}/*!
	 * Primary Exports
	 */
t.exports=r,/*!
	 * Inherit from Error.prototype
	 */
r.prototype=Object.create(Error.prototype),/*!
	 * Statically set name
	 */
r.prototype.name="AssertionError",/*!
	 * Ensure correct constructor
	 */
r.prototype.constructor=r,r.prototype.toJSON=function(t){var e=n("constructor","toJSON","stack"),r=e({name:this.name},this);return!1!==t&&this.stack&&(r.stack=this.stack),r}},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Dependencies that are used for multiple exports are required here only once
	 */
var r=n(5);/*!
	 * test utility
	 */
e.test=n(6),/*!
	 * type utility
	 */
e.type=n(8),/*!
	 * expectTypes utility
	 */
e.expectTypes=n(9),/*!
	 * message utility
	 */
e.getMessage=n(10),/*!
	 * actual utility
	 */
e.getActual=n(11),/*!
	 * Inspect util
	 */
e.inspect=n(12),/*!
	 * Object Display util
	 */
e.objDisplay=n(17),/*!
	 * Flag utility
	 */
e.flag=n(7),/*!
	 * Flag transferring utility
	 */
e.transferFlags=n(18),/*!
	 * Deep equal utility
	 */
e.eql=n(19),/*!
	 * Deep path info
	 */
e.getPathInfo=r.getPathInfo,/*!
	 * Check if a property exists
	 */
e.hasProperty=r.hasProperty,/*!
	 * Function name
	 */
e.getName=n(13),/*!
	 * add Property
	 */
e.addProperty=n(20),/*!
	 * add Method
	 */
e.addMethod=n(22),/*!
	 * overwrite Property
	 */
e.overwriteProperty=n(25),/*!
	 * overwrite Method
	 */
e.overwriteMethod=n(26),/*!
	 * Add a chainable method
	 */
e.addChainableMethod=n(27),/*!
	 * Overwrite chainable method
	 */
e.overwriteChainableMethod=n(28),/*!
	 * Compare by inspect method
	 */
e.compareByInspect=n(29),/*!
	 * Get own enumerable property symbols method
	 */
e.getOwnEnumerablePropertySymbols=n(30),/*!
	 * Get own enumerable properties method
	 */
e.getOwnEnumerableProperties=n(31),/*!
	 * Checks error against a given set of criteria
	 */
e.checkError=n(32),/*!
	 * Proxify util
	 */
e.proxify=n(24),/*!
	 * addLengthGuard util
	 */
e.addLengthGuard=n(23),/*!
	 * isProxyEnabled helper
	 */
e.isProxyEnabled=n(21),/*!
	 * isNaN method
	 */
e.isNaN=n(33)},function(t,e){"use strict";function n(t,e){return"undefined"!=typeof t&&null!==t&&e in Object(t)}function r(t){var e=t.replace(/([^\\])\[/g,"$1.["),n=e.match(/(\\\.|[^.]+?)+/g);return n.map(function(t){var e=/^\[(\d+)\]$/,n=e.exec(t),r=null;return r=n?{i:parseFloat(n[1])}:{p:t.replace(/\\([.\[\]])/g,"$1")}})}function o(t,e,n){var r=t,o=null;n="undefined"==typeof n?e.length:n;for(var i=0;i<n;i++){var s=e[i];r&&(r="undefined"==typeof s.p?r[s.i]:r[s.p],i===n-1&&(o=r))}return o}function i(t,e,n){for(var r=t,o=n.length,i=null,s=0;s<o;s++){var u=null,a=null;if(i=n[s],s===o-1)u="undefined"==typeof i.p?i.i:i.p,r[u]=e;else if("undefined"!=typeof i.p&&r[i.p])r=r[i.p];else if("undefined"!=typeof i.i&&r[i.i])r=r[i.i];else{var c=n[s+1];u="undefined"==typeof i.p?i.i:i.p,a="undefined"==typeof c.p?[]:{},r[u]=a,r=r[u]}}}function s(t,e){var i=r(e),s=i[i.length-1],u={parent:i.length>1?o(t,i,i.length-1):t,name:s.p||s.i,value:o(t,i)};return u.exists=n(u.parent,u.name),u}function u(t,e){var n=s(t,e);return n.value}function a(t,e,n){var o=r(e);return i(t,n,o),t}t.exports={hasProperty:n,getPathInfo:s,getPathValue:u,setPathValue:a}},function(t,e,n){/*!
	 * Chai - test utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(7);t.exports=function(t,e){var n=r(t,"negate"),o=e[0];return n?!o:o}},function(t,e){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));return 3!==arguments.length?r[e]:void(r[e]=n)}},function(t,e,n){(function(e){!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t){var e=typeof t;if("object"!==e)return e;if(null===t)return"null";if(t===r)return"global";if(Array.isArray(t)&&(h===!1||!(Symbol.toStringTag in t)))return"Array";if("object"==typeof window){if("object"==typeof window.location&&t===window.location)return"Location";if("object"==typeof window.document&&t===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var o=h&&t[Symbol.toStringTag];if("string"==typeof o)return o;var p=Object.getPrototypeOf(t);return p===RegExp.prototype?"RegExp":p===Date.prototype?"Date":n&&p===Promise.prototype?"Promise":s&&p===Set.prototype?"Set":i&&p===Map.prototype?"Map":a&&p===WeakSet.prototype?"WeakSet":u&&p===WeakMap.prototype?"WeakMap":c&&p===DataView.prototype?"DataView":i&&p===y?"Map Iterator":s&&p===l?"Set Iterator":g&&p===b?"Array Iterator":v&&p===m?"String Iterator":null===p?"Object":Object.prototype.toString.call(t).slice(_,w)}var n="function"==typeof Promise,r="object"==typeof self?self:e,o="undefined"!=typeof Symbol,i="undefined"!=typeof Map,s="undefined"!=typeof Set,u="undefined"!=typeof WeakMap,a="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,p=o&&"undefined"!=typeof Symbol.iterator,h=o&&"undefined"!=typeof Symbol.toStringTag,f=s&&"function"==typeof Set.prototype.entries,d=i&&"function"==typeof Map.prototype.entries,l=f&&Object.getPrototypeOf((new Set).entries()),y=d&&Object.getPrototypeOf((new Map).entries()),g=p&&"function"==typeof Array.prototype[Symbol.iterator],b=g&&Object.getPrototypeOf([][Symbol.iterator]()),v=p&&"function"==typeof String.prototype[Symbol.iterator],m=v&&Object.getPrototypeOf(""[Symbol.iterator]()),_=8,w=-1;return t})}).call(e,function(){return this}())},function(t,e,n){/*!
	 * Chai - expectTypes utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(3),o=n(7),i=n(8);t.exports=function(t,e){var n=o(t,"message"),s=o(t,"ssfi");n=n?n+": ":"",t=o(t,"object"),e=e.map(function(t){return t.toLowerCase()}),e.sort();var u=e.map(function(t,n){var r=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an":"a",o=e.length>1&&n===e.length-1?"or ":"";return o+r+" "+t}).join(", "),a=i(t).toLowerCase();if(!e.some(function(t){return a===t}))throw new r(n+"object tested must be "+u+", but "+a+" given",void 0,s)}},function(t,e,n){/*!
	 * Chai - message composition utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(7),o=n(11),i=(n(12),n(17));t.exports=function(t,e){var n=r(t,"negate"),s=r(t,"object"),u=e[3],a=o(t,e),c=n?e[2]:e[1],p=r(t,"message");return"function"==typeof c&&(c=c()),c=c||"",c=c.replace(/#\{this\}/g,function(){return i(s)}).replace(/#\{act\}/g,function(){return i(a)}).replace(/#\{exp\}/g,function(){return i(u)}),p?p+": "+c:c}},function(t,e){/*!
	 * Chai - getActual utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){return e.length>4?e[4]:t._obj}},function(t,e,n){function r(t,e,n,r){var i={showHidden:e,seen:[],stylize:function(t){return t}};return o(i,t,"undefined"==typeof n?2:n)}function o(t,n,r){if(n&&"function"==typeof n.inspect&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var g=n.inspect(r,t);return"string"!=typeof g&&(g=o(t,g,r)),g}var _=i(t,n);if(_)return _;if(w(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion){var O=new XMLSerializer;return O.serializeToString(n)}var x="http://www.w3.org/1999/xhtml",P=document.createElementNS(x,"_");P.appendChild(n.cloneNode(!1));var j=P.innerHTML.replace("><",">"+n.innerHTML+"<");return P.innerHTML="",j}catch(t){}}var S,k,E=m(n),T=t.showHidden?v(n):E;if(0===T.length||y(n)&&(1===T.length&&"stack"===T[0]||2===T.length&&"description"===T[0]&&"stack"===T[1])){if("function"==typeof n)return S=b(n),k=S?": "+S:"",t.stylize("[Function"+k+"]","special");if(d(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(l(n))return t.stylize(Date.prototype.toUTCString.call(n),"date");if(y(n))return s(n)}var I="",R=!1,A=!1,M=["{","}"];if(h(n)&&(A=!0,M=["[","]"]),f(n)&&(R=!0,M=["[","]"]),"function"==typeof n&&(S=b(n),k=S?": "+S:"",I=" [Function"+k+"]"),d(n)&&(I=" "+RegExp.prototype.toString.call(n)),l(n)&&(I=" "+Date.prototype.toUTCString.call(n)),y(n))return s(n);if(0===T.length&&(!R||0==n.length))return M[0]+I+M[1];if(r<0)return d(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var q;if(R)q=u(t,n,r,E,T);else{if(A)return a(n);q=T.map(function(e){return c(t,n,r,E,e,R)})}return t.seen.pop(),p(q,I,M)}function i(t,e){switch(typeof e){case"undefined":return t.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string");case"number":return 0===e&&1/e===-(1/0)?t.stylize("-0","number"):t.stylize(""+e,"number");case"boolean":return t.stylize(""+e,"boolean");case"symbol":return t.stylize(e.toString(),"symbol")}if(null===e)return t.stylize("null","null")}function s(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,e,n,r,o){for(var i=[],s=0,u=e.length;s<u;++s)Object.prototype.hasOwnProperty.call(e,String(s))?i.push(c(t,e,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(c(t,e,n,r,o,!0))}),i}function a(t){for(var e="[ ",n=0;n<t.length;++n){if(e.length>=_.truncateThreshold-7){e+="...";break}e+=t[n]+", "}return e+=" ]",e.indexOf(",  ]")!==-1&&(e=e.replace(",  ]"," ]")),e}function c(t,e,n,r,i,s){var u,a,c=Object.getOwnPropertyDescriptor(e,i);if(c&&(c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special"))),r.indexOf(i)<0&&(u="["+i+"]"),a||(t.seen.indexOf(e[i])<0?(a=null===n?o(t,e[i],null):o(t,e[i],n-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),"undefined"==typeof u){if(s&&i.match(/^\d+$/))return a;u=JSON.stringify(""+i),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+a}function p(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function h(t){return"object"==typeof t&&/\w+Array]$/.test(g(t))}function f(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===g(t)}function d(t){return"object"==typeof t&&"[object RegExp]"===g(t)}function l(t){return"object"==typeof t&&"[object Date]"===g(t)}function y(t){return"object"==typeof t&&"[object Error]"===g(t)}function g(t){return Object.prototype.toString.call(t)}var b=n(13),v=n(14),m=n(15),_=n(16);t.exports=r;var w=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&"nodeType"in t&&1===t.nodeType&&"string"==typeof t.nodeName}},function(t,e){"use strict";function n(t){if("function"!=typeof t)return null;var e="";if("undefined"==typeof Function.prototype.name&&"undefined"==typeof t.name){var n=r.call(t).match(o);n&&(e=n[1])}else e=t.name;return e}var r=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;t.exports=n},function(t,e){/*!
	 * Chai - getProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){function e(t){n.indexOf(t)===-1&&n.push(t)}for(var n=Object.getOwnPropertyNames(t),r=Object.getPrototypeOf(t);null!==r;)Object.getOwnPropertyNames(r).forEach(e),r=Object.getPrototypeOf(r);return n}},function(t,e){/*!
	 * Chai - getEnumerableProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){var e=[];for(var n in t)e.push(n);return e}},function(t,e){t.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","inspect","toJSON"]}},function(t,e,n){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(12),o=n(16);t.exports=function(t){var e=r(t),n=Object.prototype.toString.call(t);if(o.truncateThreshold&&e.length>=o.truncateThreshold){if("[object Function]"===n)return t.name&&""!==t.name?"[Function: "+t.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+t.length+") ]";if("[object Object]"===n){var i=Object.keys(t),s=i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", ");return"{ Object ("+s+") }"}return e}return e}},function(t,e){/*!
	 * Chai - transferFlags utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),n=3!==arguments.length||n;for(var o in r)(n||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(e.__flags[o]=r[o])}},function(t,e,n){"use strict";function r(){this._key="chai/deep-eql__"+Math.random()+Date.now()}/*!
	 * Check to see if the MemoizeMap has recorded a result of the two operands
	 *
	 * @param {Mixed} leftHandOperand
	 * @param {Mixed} rightHandOperand
	 * @param {MemoizeMap} memoizeMap
	 * @returns {Boolean|null} result
	*/
function o(t,e,n){if(!n||_(t)||_(e))return null;var r=n.get(t);if(r){var o=r.get(e);if("boolean"==typeof o)return o}return null}/*!
	 * Set the result of the equality into the MemoizeMap
	 *
	 * @param {Mixed} leftHandOperand
	 * @param {Mixed} rightHandOperand
	 * @param {MemoizeMap} memoizeMap
	 * @param {Boolean} result
	*/
function i(t,e,n,r){if(n&&!_(t)&&!_(e)){var o=n.get(t);o?o.set(e,r):(o=new O,o.set(e,r),n.set(t,o))}}function s(t,e,n){if(n&&n.comparator)return a(t,e,n);var r=u(t,e);return null!==r?r:a(t,e,n)}function u(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e||!_(t)&&!_(e)&&null}/*!
	 * The main logic of the `deepEqual` function.
	 *
	 * @param {Mixed} leftHandOperand
	 * @param {Mixed} rightHandOperand
	 * @param {Object} [options] (optional) Additional options
	 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
	 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
	    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
	    references to blow the stack.
	 * @return {Boolean} equal match
	*/
function a(t,e,n){n=n||{},n.memoize=n.memoize!==!1&&(n.memoize||new O);var r=n&&n.comparator,s=o(t,e,n.memoize);if(null!==s)return s;var a=o(e,t,n.memoize);if(null!==a)return a;if(r){var p=r(t,e);if(p===!1||p===!0)return i(t,e,n.memoize,p),p;var h=u(t,e);if(null!==h)return h}var f=w(t);if(f!==w(e))return i(t,e,n.memoize,!1),!1;i(t,e,n.memoize,!0);var d=c(t,e,f,n);return i(t,e,n.memoize,d),d}function c(t,e,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return s(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return t===e;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return f(t,e,r);case"RegExp":return p(t,e);case"Generator":return d(t,e,r);case"DataView":return f(new Uint8Array(t.buffer),new Uint8Array(e.buffer),r);case"ArrayBuffer":return f(new Uint8Array(t),new Uint8Array(e),r);case"Set":return h(t,e,r);case"Map":return h(t,e,r);default:return m(t,e,r)}}/*!
	 * Compare two Regular Expressions for equality.
	 *
	 * @param {RegExp} leftHandOperand
	 * @param {RegExp} rightHandOperand
	 * @return {Boolean} result
	 */
function p(t,e){return t.toString()===e.toString()}/*!
	 * Compare two Sets/Maps for equality. Faster than other equality functions.
	 *
	 * @param {Set} leftHandOperand
	 * @param {Set} rightHandOperand
	 * @param {Object} [options] (Optional)
	 * @return {Boolean} result
	 */
function h(t,e,n){if(t.size!==e.size)return!1;if(0===t.size)return!0;var r=[],o=[];return t.forEach(function(t,e){r.push([t,e])}),e.forEach(function(t,e){o.push([t,e])}),f(r.sort(),o.sort(),n)}/*!
	 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
	 *
	 * @param {Iterable} leftHandOperand
	 * @param {Iterable} rightHandOperand
	 * @param {Object} [options] (Optional)
	 * @return {Boolean} result
	 */
function f(t,e,n){var r=t.length;if(r!==e.length)return!1;if(0===r)return!0;for(var o=-1;++o<r;)if(s(t[o],e[o],n)===!1)return!1;return!0}/*!
	 * Simple equality for generator objects such as those returned by generator functions.
	 *
	 * @param {Iterable} leftHandOperand
	 * @param {Iterable} rightHandOperand
	 * @param {Object} [options] (Optional)
	 * @return {Boolean} result
	 */
function d(t,e,n){return f(g(t),g(e),n)}/*!
	 * Determine if the given object has an @@iterator function.
	 *
	 * @param {Object} target
	 * @return {Boolean} `true` if the object has an @@iterator function.
	 */
function l(t){return"undefined"!=typeof Symbol&&"object"==typeof t&&"undefined"!=typeof Symbol.iterator&&"function"==typeof t[Symbol.iterator]}/*!
	 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
	 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
	 *
	 * @param {Object} target
	 * @returns {Array} an array of entries from the @@iterator function
	 */
function y(t){if(l(t))try{return g(t[Symbol.iterator]())}catch(t){return[]}return[]}/*!
	 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
	 *
	 * @param {Generator} target
	 * @returns {Array} an array of entries from the Generator.
	 */
function g(t){for(var e=t.next(),n=[e.value];e.done===!1;)e=t.next(),n.push(e.value);return n}/*!
	 * Gets all own and inherited enumerable keys from a target.
	 *
	 * @param {Object} target
	 * @returns {Array} an array of own and inherited enumerable keys from the target.
	 */
function b(t){var e=[];for(var n in t)e.push(n);return e}/*!
	 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
	 * each key. If any value of the given key is not equal, the function will return false (early).
	 *
	 * @param {Mixed} leftHandOperand
	 * @param {Mixed} rightHandOperand
	 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
	 * @param {Object} [options] (Optional)
	 * @return {Boolean} result
	 */
function v(t,e,n,r){var o=n.length;if(0===o)return!0;for(var i=0;i<o;i+=1)if(s(t[n[i]],e[n[i]],r)===!1)return!1;return!0}/*!
	 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
	 * for each enumerable key in the object.
	 *
	 * @param {Mixed} leftHandOperand
	 * @param {Mixed} rightHandOperand
	 * @param {Object} [options] (Optional)
	 * @return {Boolean} result
	 */
function m(t,e,n){var r=b(t),o=b(e);if(r.length&&r.length===o.length)return r.sort(),o.sort(),f(r,o)!==!1&&v(t,e,r,n);var i=y(t),s=y(e);return i.length&&i.length===s.length?(i.sort(),s.sort(),f(i,s,n)):0===r.length&&0===i.length&&0===o.length&&0===s.length}/*!
	 * Returns true if the argument is a primitive.
	 *
	 * This intentionally returns true for all objects that can be compared by reference,
	 * including functions and symbols.
	 *
	 * @param {Mixed} value
	 * @return {Boolean} result
	 */
function _(t){return null===t||"object"!=typeof t}/*!
	 * deep-eql
	 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var w=n(8);r.prototype={get:function(t){return t[this._key]},set:function(t,e){Object.isExtensible(t)&&Object.defineProperty(t,this._key,{value:e,configurable:!0})}};var O="function"==typeof WeakMap?WeakMap:r;/*!
	 * Primary Export
	 */
t.exports=s,t.exports.MemoizeMap=O},function(t,e,n){/*!
	 * Chai - addProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(2),o=n(7),i=n(21),s=n(18);t.exports=function(t,e,n){n=void 0===n?function(){}:n,Object.defineProperty(t,e,{get:function t(){i()||o(this,"lockSsfi")||o(this,"ssfi",t);var e=n.call(this);if(void 0!==e)return e;var u=new r.Assertion;return s(this,u),u},configurable:!0})}},function(t,e,n){var r=n(16);/*!
	 * Chai - isProxyEnabled helper
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(){return r.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(t,e,n){/*!
	 * Chai - addMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(23),o=n(2),i=n(7),s=n(24),u=n(18);t.exports=function(t,e,n){var a=function(){i(this,"lockSsfi")||i(this,"ssfi",a);var t=n.apply(this,arguments);if(void 0!==t)return t;var e=new o.Assertion;return u(this,e),e};r(a,e,!1),t[e]=s(a,e)}},function(t,e,n){var r=(n(16),Object.getOwnPropertyDescriptor(function(){},"length"));/*!
	 * Chai - addLengthGuard utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){return r.configurable?(Object.defineProperty(t,"length",{get:function(){if(n)throw Error("Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.');throw Error("Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t):t}},function(t,e,n){function r(t,e,n){if(!n){n=[];for(var o=0;o<=t.length;o++)n[o]=[]}return n[t.length]&&n[t.length][e.length]||(0===t.length||0===e.length?n[t.length][e.length]=Math.max(t.length,e.length):n[t.length][e.length]=Math.min(r(t.slice(0,-1),e,n)+1,r(t,e.slice(0,-1),n)+1,r(t.slice(0,-1),e.slice(0,-1),n)+(t.slice(-1)===e.slice(-1)?0:1))),n[t.length][e.length]}var o=n(16),i=n(7),s=n(14),u=n(21),a=["__flags","__methods","_obj","assert"];t.exports=function(t,e){return u()?new Proxy(t,{get:function t(n,u){if("string"==typeof u&&o.proxyExcludedKeys.indexOf(u)===-1&&!Reflect.has(n,u)){if(e)throw Error("Invalid Chai property: "+e+"."+u+'. See docs for proper usage of "'+e+'".');var c=s(n).filter(function(t){return!Object.prototype.hasOwnProperty(t)&&a.indexOf(t)===-1}).sort(function(t,e){return r(u,t)-r(u,e)});throw c.length&&r(c[0],u)<4?Error("Invalid Chai property: "+u+'. Did you mean "'+c[0]+'"?'):Error("Invalid Chai property: "+u)}return a.indexOf(u)!==-1||i(n,"lockSsfi")||i(n,"ssfi",t),Reflect.get(n,u)}}):t}},function(t,e,n){/*!
	 * Chai - overwriteProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(2),o=n(7),i=n(21),s=n(18);t.exports=function(t,e,n){var u=Object.getOwnPropertyDescriptor(t,e),a=function(){};u&&"function"==typeof u.get&&(a=u.get),Object.defineProperty(t,e,{get:function t(){i()||o(this,"lockSsfi")||o(this,"ssfi",t);var e=o(this,"lockSsfi");o(this,"lockSsfi",!0);var u=n(a).call(this);if(o(this,"lockSsfi",e),void 0!==u)return u;var c=new r.Assertion;return s(this,c),c},configurable:!0})}},function(t,e,n){/*!
	 * Chai - overwriteMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(23),o=n(2),i=n(7),s=n(24),u=n(18);t.exports=function(t,e,n){var a=t[e],c=function(){throw new Error(e+" is not a function")};a&&"function"==typeof a&&(c=a);var p=function(){i(this,"lockSsfi")||i(this,"ssfi",p);var t=i(this,"lockSsfi");i(this,"lockSsfi",!0);var e=n(c).apply(this,arguments);if(i(this,"lockSsfi",t),void 0!==e)return e;var r=new o.Assertion;return u(this,r),r};r(p,e,!1),t[e]=s(p,e)}},function(t,e,n){/*!
	 * Chai - addChainingMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var r=n(23),o=n(2),i=n(7),s=n(24),u=n(18),a="function"==typeof Object.setPrototypeOf,c=function(){},p=Object.getOwnPropertyNames(c).filter(function(t){var e=Object.getOwnPropertyDescriptor(c,t);return"object"!=typeof e||!e.configurable}),h=Function.prototype.call,f=Function.prototype.apply;t.exports=function(t,e,n,c){"function"!=typeof c&&(c=function(){});var d={method:n,chainingBehavior:c};t.__methods||(t.__methods={}),t.__methods[e]=d,Object.defineProperty(t,e,{get:function(){d.chainingBehavior.call(this);var n=function(){i(this,"lockSsfi")||i(this,"ssfi",n);var t=d.method.apply(this,arguments);if(void 0!==t)return t;var e=new o.Assertion;return u(this,e),e};if(r(n,e,!0),a){var c=Object.create(this);c.call=h,c.apply=f,Object.setPrototypeOf(n,c)}else{var l=Object.getOwnPropertyNames(t);l.forEach(function(e){if(p.indexOf(e)===-1){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r)}})}return u(this,n),s(n)},configurable:!0})}},function(t,e,n){/*!
	 * Chai - overwriteChainableMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(2),o=n(18);t.exports=function(t,e,n,i){var s=t.__methods[e],u=s.chainingBehavior;s.chainingBehavior=function(){var t=i(u).call(this);if(void 0!==t)return t;var e=new r.Assertion;return o(this,e),e};var a=s.method;s.method=function(){var t=n(a).apply(this,arguments);if(void 0!==t)return t;var e=new r.Assertion;return o(this,e),e}}},function(t,e,n){/*!
	 * Chai - compareByInspect utility
	 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(12);t.exports=function(t,e){return r(t)<r(e)?-1:1}},function(t,e){/*!
	 * Chai - getOwnEnumerablePropertySymbols utility
	 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}},function(t,e,n){/*!
	 * Chai - getOwnEnumerableProperties utility
	 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(30);t.exports=function(t){return Object.keys(t).concat(r(t))}},function(t,e){"use strict";function n(t,e){return e instanceof Error&&t===e}function r(t,e){return e instanceof Error?t.constructor===e.constructor||t instanceof e.constructor:(e.prototype instanceof Error||e===Error)&&(t.constructor===e||t instanceof e)}function o(t,e){var n="string"==typeof t?t:t.message;return e instanceof RegExp?e.test(n):"string"==typeof e&&n.indexOf(e)!==-1}function i(t){var e="";if("undefined"==typeof t.name){var n=String(t).match(a);n&&(e=n[1])}else e=t.name;return e}function s(t){var e=t;return t instanceof Error?e=i(t.constructor):"function"==typeof t&&(e=i(t).trim()||i(new t)),e}function u(t){var e="";return t&&t.message?e=t.message:"string"==typeof t&&(e=t),e}var a=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;t.exports={compatibleInstance:n,compatibleConstructor:r,compatibleMessage:o,getMessage:u,getConstructorName:s}},function(t,e){/*!
	 * Chai - isNaN utility
	 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
	 * MIT Licensed
	 */
function n(t){return t!==t}t.exports=Number.isNaN||n},function(t,e,n){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(16);t.exports=function(t,e){/*!
	   * Assertion Constructor
	   *
	   * Creates object for chaining.
	   *
	   * `Assertion` objects contain metadata in the form of flags. Three flags can
	   * be assigned during instantiation by passing arguments to this constructor:
	   *
	   * - `object`: This flag contains the target of the assertion. For example, in
	   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
	   *   contain `numKittens` so that the `equal` assertion can reference it when
	   *   needed.
	   *
	   * - `message`: This flag contains an optional custom error message to be
	   *   prepended to the error message that's generated by the assertion when it
	   *   fails.
	   *
	   * - `ssfi`: This flag stands for "start stack function indicator". It
	   *   contains a function reference that serves as the starting point for
	   *   removing frames from the stack trace of the error that's created by the
	   *   assertion when it fails. The goal is to provide a cleaner stack trace to
	   *   end users by removing Chai's internal functions. Note that it only works
	   *   in environments that support `Error.captureStackTrace`, and only when
	   *   `Chai.config.includeStack` hasn't been set to `false`.
	   *
	   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
	   *   should retain its current value, even as assertions are chained off of
	   *   this object. This is usually set to `true` when creating a new assertion
	   *   from within another assertion. It's also temporarily set to `true` before
	   *   an overwritten assertion gets called by the overwriting assertion.
	   *
	   * @param {Mixed} obj target of the assertion
	   * @param {String} msg (optional) custom error message
	   * @param {Function} ssfi (optional) starting point for removing stack frames
	   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
	   * @api private
	   */
function n(t,r,o,s){return i(this,"ssfi",o||n),i(this,"lockSsfi",s),i(this,"object",t),i(this,"message",r),e.proxify(this)}/*!
	   * Module dependencies.
	   */
var o=t.AssertionError,i=e.flag;/*!
	   * Module export.
	   */
t.Assertion=n,Object.defineProperty(n,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=t}}),Object.defineProperty(n,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=t}}),n.addProperty=function(t,n){e.addProperty(this.prototype,t,n)},n.addMethod=function(t,n){e.addMethod(this.prototype,t,n)},n.addChainableMethod=function(t,n,r){e.addChainableMethod(this.prototype,t,n,r)},n.overwriteProperty=function(t,n){e.overwriteProperty(this.prototype,t,n)},n.overwriteMethod=function(t,n){e.overwriteMethod(this.prototype,t,n)},n.overwriteChainableMethod=function(t,n,r){e.overwriteChainableMethod(this.prototype,t,n,r)},n.prototype.assert=function(t,n,s,u,a,c){var p=e.test(this,arguments);if(!1!==c&&(c=!0),void 0===u&&void 0===a&&(c=!1),!0!==r.showDiff&&(c=!1),!p){n=e.getMessage(this,arguments);var h=e.getActual(this,arguments);throw new o(n,{actual:h,expected:u,showDiff:c},r.includeStack?this.assert:i(this,"ssfi"))}},/*!
	   * ### ._obj
	   *
	   * Quick reference to stored `actual` value for plugin developers.
	   *
	   * @api private
	   */
Object.defineProperty(n.prototype,"_obj",{get:function(){return i(this,"object")},set:function(t){i(this,"object",t)}})}},function(t,e){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){function n(t,n){n&&M(this,"message",n),t=t.toLowerCase();var r=M(this,"object"),o=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";this.assert(t===e.type(r).toLowerCase(),"expected #{this} to be "+o+t,"expected #{this} not to be "+o+t)}function r(t,n){return e.isNaN(t)&&e.isNaN(n)||t===n}function o(){M(this,"contains",!0)}function i(t,n){n&&M(this,"message",n);var o=M(this,"object"),i=e.type(o).toLowerCase(),s=M(this,"message"),u=M(this,"negate"),a=M(this,"ssfi"),c=M(this,"deep"),p=c?"deep ":"";s=s?s+": ":"";var h=!1;switch(i){case"string":h=o.indexOf(t)!==-1;break;case"weakset":if(c)throw new A(s+"unable to use .deep.include with WeakSet",void 0,a);h=o.has(t);break;case"map":var f=c?e.eql:r;o.forEach(function(e){h=h||f(e,t)});break;case"set":c?o.forEach(function(n){h=h||e.eql(n,t)}):h=o.has(t);break;case"array":h=c?o.some(function(n){return e.eql(n,t)}):o.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new A(s+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+i+" given",void 0,a);var d=Object.keys(t),l=null,y=0;if(d.forEach(function(n){var r=new R(o);if(e.transferFlags(this,r,!0),M(r,"lockSsfi",!0),!u||1===d.length)return void r.property(n,t[n]);try{r.property(n,t[n])}catch(t){if(!e.checkError.compatibleConstructor(t,A))throw t;null===l&&(l=t),y++}},this),u&&d.length>1&&y===d.length)throw l;return}this.assert(h,"expected #{this} to "+p+"include "+e.inspect(t),"expected #{this} to not "+p+"include "+e.inspect(t))}function s(){var t=M(this,"object"),n=e.type(t);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function u(t,e){e&&M(this,"message",e);var n=M(this,"object");return M(this,"deep")?this.eql(t):void this.assert(t===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}function a(t,n){n&&M(this,"message",n),this.assert(e.eql(t,M(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}function c(t,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"doLength"),i=M(this,"message"),s=i?i+": ":"",u=M(this,"ssfi"),a=e.type(r).toLowerCase(),c=e.type(t).toLowerCase(),p=!0;if(o&&new R(r,i,u,!0).to.have.property("length"),o||"date"!==a||"date"===c)if("number"===c||!o&&"number"!==a)if(o||"date"===a||"number"===a)p=!1;else{var h="string"===a?"'"+r+"'":r;errorMessage=s+"expected "+h+" to be a number or a date"}else errorMessage=s+"the argument to above must be a number";else errorMessage=s+"the argument to above must be a date";if(p)throw new A(errorMessage,void 0,u);if(o){var f=r.length;this.assert(f>t,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",t,f)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}function p(t,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"doLength"),i=M(this,"message"),s=i?i+": ":"",u=M(this,"ssfi"),a=e.type(r).toLowerCase(),c=e.type(t).toLowerCase(),p=!0;if(o&&new R(r,i,u,!0).to.have.property("length"),o||"date"!==a||"date"===c)if("number"===c||!o&&"number"!==a)if(o||"date"===a||"number"===a)p=!1;else{var h="string"===a?"'"+r+"'":r;errorMessage=s+"expected "+h+" to be a number or a date"}else errorMessage=s+"the argument to least must be a number";else errorMessage=s+"the argument to least must be a date";if(p)throw new A(errorMessage,void 0,u);if(o){var f=r.length;this.assert(f>=t,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",t,f)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}function h(t,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"doLength"),i=M(this,"message"),s=i?i+": ":"",u=M(this,"ssfi"),a=e.type(r).toLowerCase(),c=e.type(t).toLowerCase(),p=!0;if(o&&new R(r,i,u,!0).to.have.property("length"),o||"date"!==a||"date"===c)if("number"===c||!o&&"number"!==a)if(o||"date"===a||"number"===a)p=!1;else{var h="string"===a?"'"+r+"'":r;errorMessage=s+"expected "+h+" to be a number or a date"}else errorMessage=s+"the argument to below must be a number";else errorMessage=s+"the argument to below must be a date";if(p)throw new A(errorMessage,void 0,u);if(o){var f=r.length;this.assert(f<t,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",t,f)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}function f(t,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"doLength"),i=M(this,"message"),s=i?i+": ":"",u=M(this,"ssfi"),a=e.type(r).toLowerCase(),c=e.type(t).toLowerCase(),p=!0;if(o&&new R(r,i,u,!0).to.have.property("length"),o||"date"!==a||"date"===c)if("number"===c||!o&&"number"!==a)if(o||"date"===a||"number"===a)p=!1;else{var h="string"===a?"'"+r+"'":r;errorMessage=s+"expected "+h+" to be a number or a date"}else errorMessage=s+"the argument to most must be a number";else errorMessage=s+"the argument to most must be a date";if(p)throw new A(errorMessage,void 0,u);if(o){var f=r.length;this.assert(f<=t,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",t,f)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}function d(t,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"ssfi"),i=M(this,"message");try{var s=r instanceof t}catch(n){if(n instanceof TypeError)throw i=i?i+": ":"",new A(i+"The instanceof assertion needs a constructor but "+e.type(t)+" was given.",void 0,o);throw n}var u=e.getName(t);null===u&&(u="an unnamed constructor"),this.assert(s,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function l(t,n,r){r&&M(this,"message",r);var o=M(this,"nested"),i=M(this,"own"),s=M(this,"message"),u=M(this,"object"),a=M(this,"ssfi");if(o&&i)throw s=s?s+": ":"",new A(s+'The "nested" and "own" flags cannot be combined.',void 0,a);if(null===u||void 0===u)throw s=s?s+": ":"",new A(s+"Target cannot be null or undefined.",void 0,a);var c=M(this,"deep"),p=M(this,"negate"),h=o?e.getPathInfo(u,t):null,f=o?h.value:u[t],d="";c&&(d+="deep "),i&&(d+="own "),o&&(d+="nested "),d+="property ";var l;l=i?Object.prototype.hasOwnProperty.call(u,t):o?h.exists:e.hasProperty(u,t),p&&1!==arguments.length||this.assert(l,"expected #{this} to have "+d+e.inspect(t),"expected #{this} to not have "+d+e.inspect(t)),arguments.length>1&&this.assert(l&&(c?e.eql(n,f):n===f),"expected #{this} to have "+d+e.inspect(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+d+e.inspect(t)+" of #{act}",n,f),M(this,"object",f)}function y(t,e,n){M(this,"own",!0),l.apply(this,arguments)}function g(t,n,r){"string"==typeof n&&(r=n,n=null),r&&M(this,"message",r);var o=M(this,"object"),i=Object.getOwnPropertyDescriptor(Object(o),t);i&&n?this.assert(e.eql(n,i),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to match "+e.inspect(n)+", got "+e.inspect(i),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to not match "+e.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+e.inspect(t),"expected #{this} to not have an own property descriptor for "+e.inspect(t)),M(this,"object",i)}function b(){M(this,"doLength",!0)}function v(t,e){e&&M(this,"message",e);var n=M(this,"object"),r=M(this,"message"),o=M(this,"ssfi");new R(n,r,o,!0).to.have.property("length");var i=n.length;this.assert(i==t,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",t,i)}function m(t,e){e&&M(this,"message",e);var n=M(this,"object");this.assert(t.exec(n),"expected #{this} to match "+t,"expected #{this} not to match "+t)}function _(t){var n,r=M(this,"object"),o=e.type(r),i=e.type(t),s=M(this,"ssfi"),u=M(this,"deep"),a="",c=!0,p=M(this,"message");p=p?p+": ":"";var h=p+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===o||"Set"===o)a=u?"deeply ":"",f=[],r.forEach(function(t,e){f.push(e)}),"Array"!==i&&(t=Array.prototype.slice.call(arguments));else{switch(f=e.getOwnEnumerableProperties(r),i){case"Array":if(arguments.length>1)throw new A(h,void 0,s);break;case"Object":if(arguments.length>1)throw new A(h,void 0,s);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(t){return"symbol"==typeof t?t:String(t)})}if(!t.length)throw new A(p+"keys required",void 0,s);var f,d=t.length,l=M(this,"any"),y=M(this,"all"),g=t;if(l||y||(y=!0),l&&(c=g.some(function(t){return f.some(function(n){return u?e.eql(t,n):t===n})})),y&&(c=g.every(function(t){return f.some(function(n){return u?e.eql(t,n):t===n})}),M(this,"contains")||(c=c&&t.length==f.length)),d>1){t=t.map(function(t){return e.inspect(t)});var b=t.pop();y&&(n=t.join(", ")+", and "+b),l&&(n=t.join(", ")+", or "+b)}else n=e.inspect(t[0]);n=(d>1?"keys ":"key ")+n,n=(M(this,"contains")?"contain ":"have ")+n,this.assert(c,"expected #{this} to "+a+n,"expected #{this} to not "+a+n,g.slice(0).sort(e.compareByInspect),f.sort(e.compareByInspect),!0)}function w(t,n,r){r&&M(this,"message",r);var o=M(this,"object"),i=M(this,"ssfi"),s=M(this,"message"),u=M(this,"negate")||!1;new R(o,s,i,!0).is.a("function"),(t instanceof RegExp||"string"==typeof t)&&(n=t,t=null);var a;try{o()}catch(t){a=t}var c=void 0===t&&void 0===n,p=Boolean(t&&n),h=!1,f=!1;if(c||!c&&!u){var d="an error";t instanceof Error?d="#{exp}":t&&(d=e.checkError.getConstructorName(t)),this.assert(a,"expected #{this} to throw "+d,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),a instanceof Error?a.toString():"string"==typeof a?a:a&&e.checkError.getConstructorName(a))}if(t&&a){if(t instanceof Error){var l=e.checkError.compatibleInstance(a,t);l===u&&(p&&u?h=!0:this.assert(u,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a&&!u?" but #{act} was thrown":""),t.toString(),a.toString()))}var y=e.checkError.compatibleConstructor(a,t);y===u&&(p&&u?h=!0:this.assert(u,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&e.checkError.getConstructorName(t),a instanceof Error?a.toString():a&&e.checkError.getConstructorName(a)))}if(a&&void 0!==n&&null!==n){var g="including";n instanceof RegExp&&(g="matching");var b=e.checkError.compatibleMessage(a,n);b===u&&(p&&u?f=!0:this.assert(u,"expected #{this} to throw error "+g+" #{exp} but got #{act}","expected #{this} to throw error not "+g+" #{exp}",n,e.checkError.getMessage(a)))}h&&f&&this.assert(u,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&e.checkError.getConstructorName(t),a instanceof Error?a.toString():a&&e.checkError.getConstructorName(a)),M(this,"object",a)}function O(t,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"itself"),i="function"!=typeof r||o?r[t]:r.prototype[t];this.assert("function"==typeof i,"expected #{this} to respond to "+e.inspect(t),"expected #{this} to not respond to "+e.inspect(t))}function x(t,n){n&&M(this,"message",n);var r=M(this,"object"),o=t(r);this.assert(o,"expected #{this} to satisfy "+e.objDisplay(t),"expected #{this} to not satisfy"+e.objDisplay(t),!M(this,"negate"),o)}function P(t,e,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"message"),i=M(this,"ssfi");if(new R(r,o,i,!0).is.a("number"),"number"!=typeof t||"number"!=typeof e)throw o=o?o+": ":"",new A(o+"the arguments to closeTo or approximately must be numbers",void 0,i);this.assert(Math.abs(r-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}function j(t,e,n,r,o){if(!r){if(t.length!==e.length)return!1;e=e.slice()}return t.every(function(t,i){if(o)return n?n(t,e[i]):t===e[i];if(!n){var s=e.indexOf(t);return s!==-1&&(r||e.splice(s,1),!0)}return e.some(function(o,i){return!!n(t,o)&&(r||e.splice(i,1),!0)})})}function S(t,e){e&&M(this,"message",e);var n=M(this,"object"),r=M(this,"message"),o=M(this,"ssfi");new R(t,r,o,!0).to.be.an("array"),this.assert(t.indexOf(n)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,n)}function k(t,e,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"message"),i=M(this,"ssfi");new R(r,o,i,!0).is.a("function");var s;e?(new R(t,o,i,!0).to.have.property(e),s=t[e]):(new R(t,o,i,!0).is.a("function"),s=t()),r();var u=void 0===e||null===e?t():t[e],a=void 0===e||null===e?s:"."+e;M(this,"deltaMsgObj",a),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",u),M(this,"deltaBehavior","change"),M(this,"realDelta",u!==s),this.assert(s!==u,"expected "+a+" to change","expected "+a+" to not change")}function E(t,e,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"message"),i=M(this,"ssfi");new R(r,o,i,!0).is.a("function");var s;e?(new R(t,o,i,!0).to.have.property(e),s=t[e]):(new R(t,o,i,!0).is.a("function"),s=t()),new R(s,o,i,!0).is.a("number"),r();var u=void 0===e||null===e?t():t[e],a=void 0===e||null===e?s:"."+e;M(this,"deltaMsgObj",a),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",u),M(this,"deltaBehavior","increase"),M(this,"realDelta",u-s),this.assert(u-s>0,"expected "+a+" to increase","expected "+a+" to not increase")}function T(t,e,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"message"),i=M(this,"ssfi");new R(r,o,i,!0).is.a("function");var s;e?(new R(t,o,i,!0).to.have.property(e),s=t[e]):(new R(t,o,i,!0).is.a("function"),s=t()),new R(s,o,i,!0).is.a("number"),r();var u=void 0===e||null===e?t():t[e],a=void 0===e||null===e?s:"."+e;M(this,"deltaMsgObj",a),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",u),M(this,"deltaBehavior","decrease"),M(this,"realDelta",s-u),this.assert(u-s<0,"expected "+a+" to decrease","expected "+a+" to not decrease")}function I(t,e){e&&M(this,"message",e);var n,r=M(this,"deltaMsgObj"),o=M(this,"initialDeltaValue"),i=M(this,"finalDeltaValue"),s=M(this,"deltaBehavior"),u=M(this,"realDelta");n="change"===s?Math.abs(i-o)===Math.abs(t):u===Math.abs(t),this.assert(n,"expected "+r+" to "+s+" by "+t,"expected "+r+" to not "+s+" by "+t)}var R=t.Assertion,A=t.AssertionError,M=e.flag;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does"].forEach(function(t){R.addProperty(t)}),R.addProperty("not",function(){M(this,"negate",!0)}),R.addProperty("deep",function(){M(this,"deep",!0)}),R.addProperty("nested",function(){M(this,"nested",!0)}),R.addProperty("own",function(){M(this,"own",!0)}),R.addProperty("ordered",function(){M(this,"ordered",!0)}),R.addProperty("any",function(){M(this,"any",!0),M(this,"all",!1)}),R.addProperty("all",function(){M(this,"all",!0),M(this,"any",!1)}),R.addChainableMethod("an",n),R.addChainableMethod("a",n),R.addChainableMethod("include",i,o),R.addChainableMethod("contain",i,o),R.addChainableMethod("contains",i,o),R.addChainableMethod("includes",i,o),R.addProperty("ok",function(){this.assert(M(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),R.addProperty("true",function(){this.assert(!0===M(this,"object"),"expected #{this} to be true","expected #{this} to be false",!M(this,"negate"))}),R.addProperty("false",function(){this.assert(!1===M(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!M(this,"negate"))}),R.addProperty("null",function(){this.assert(null===M(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),R.addProperty("undefined",function(){this.assert(void 0===M(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),R.addProperty("NaN",function(){this.assert(e.isNaN(M(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")}),R.addProperty("exist",function(){var t=M(this,"object");this.assert(null!==t&&void 0!==t,"expected #{this} to exist","expected #{this} to not exist")}),R.addProperty("empty",function(){var t,n=M(this,"object"),r=M(this,"ssfi"),o=M(this,"message");switch(o=o?o+": ":"",e.type(n).toLowerCase()){case"array":case"string":t=n.length;break;case"map":case"set":t=n.size;break;case"weakmap":case"weakset":throw new A(o+".empty was passed a weak collection",void 0,r);case"function":var i=o+".empty was passed a function "+e.getName(n);throw new A(i.trim(),void 0,r);default:if(n!==Object(n))throw new A(o+".empty was passed non-string primitive "+e.inspect(n),void 0,r);t=Object.keys(n).length}this.assert(0===t,"expected #{this} to be empty","expected #{this} not to be empty")}),R.addProperty("arguments",s),R.addProperty("Arguments",s),R.addMethod("equal",u),R.addMethod("equals",u),R.addMethod("eq",u),R.addMethod("eql",a),R.addMethod("eqls",a),R.addMethod("above",c),R.addMethod("gt",c),R.addMethod("greaterThan",c),R.addMethod("least",p),R.addMethod("gte",p),R.addMethod("below",h),R.addMethod("lt",h),R.addMethod("lessThan",h),R.addMethod("most",f),R.addMethod("lte",f),R.addMethod("within",function(t,n,r){r&&M(this,"message",r);var o=M(this,"object"),i=M(this,"doLength"),s=M(this,"message"),u=s?s+": ":"",a=M(this,"ssfi"),c=e.type(o).toLowerCase(),p=e.type(t).toLowerCase(),h=e.type(n).toLowerCase(),f=!0,d="date"===p&&"date"===h?t.toUTCString()+".."+n.toUTCString():t+".."+n;if(i&&new R(o,s,a,!0).to.have.property("length"),i||"date"!==c||"date"===p&&"date"===h)if("number"===p&&"number"===h||!i&&"number"!==c)if(i||"date"===c||"number"===c)f=!1;else{var l="string"===c?"'"+o+"'":o;errorMessage=u+"expected "+l+" to be a number or a date"}else errorMessage=u+"the arguments to within must be numbers";else errorMessage=u+"the arguments to within must be dates";if(f)throw new A(errorMessage,void 0,a);if(i){var y=o.length;this.assert(y>=t&&y<=n,"expected #{this} to have a length within "+d,"expected #{this} to not have a length within "+d)}else this.assert(o>=t&&o<=n,"expected #{this} to be within "+d,"expected #{this} to not be within "+d)}),R.addMethod("instanceof",d),R.addMethod("instanceOf",d),R.addMethod("property",l),R.addMethod("ownProperty",y),R.addMethod("haveOwnProperty",y),R.addMethod("ownPropertyDescriptor",g),R.addMethod("haveOwnPropertyDescriptor",g),R.addChainableMethod("length",v,b),R.addChainableMethod("lengthOf",v,b),R.addMethod("match",m),R.addMethod("matches",m),R.addMethod("string",function(t,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"message"),i=M(this,"ssfi");new R(r,o,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+e.inspect(t),"expected #{this} to not contain "+e.inspect(t))}),R.addMethod("keys",_),R.addMethod("key",_),R.addMethod("throw",w),R.addMethod("throws",w),R.addMethod("Throw",w),R.addMethod("respondTo",O),R.addMethod("respondsTo",O),R.addProperty("itself",function(){M(this,"itself",!0)}),R.addMethod("satisfy",x),R.addMethod("satisfies",x),R.addMethod("closeTo",P),R.addMethod("approximately",P),R.addMethod("members",function(t,n){n&&M(this,"message",n);var r=M(this,"object"),o=M(this,"message"),i=M(this,"ssfi");new R(r,o,i,!0).to.be.an("array"),new R(t,o,i,!0).to.be.an("array");var s,u,a,c=M(this,"contains"),p=M(this,"ordered");c?(s=p?"an ordered superset":"a superset",u="expected #{this} to be "+s+" of #{exp}",a="expected #{this} to not be "+s+" of #{exp}"):(s=p?"ordered members":"members",u="expected #{this} to have the same "+s+" as #{exp}",a="expected #{this} to not have the same "+s+" as #{exp}");var h=M(this,"deep")?e.eql:void 0;this.assert(j(t,r,h,c,p),u,a,t,r,!0)}),R.addMethod("oneOf",S),R.addMethod("change",k),R.addMethod("changes",k),R.addMethod("increase",E),R.addMethod("increases",E),R.addMethod("decrease",T),R.addMethod("decreases",T),R.addMethod("by",I),R.addProperty("extensible",function(){var t=M(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")}),R.addProperty("sealed",function(){var t=M(this,"object"),e=t!==Object(t)||Object.isSealed(t);this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")}),R.addProperty("frozen",function(){var t=M(this,"object"),e=t!==Object(t)||Object.isFrozen(t);this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")}),R.addProperty("finite",function(t){var e=M(this,"object");this.assert("number"==typeof e&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")})}},function(t,e){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){t.expect=function(e,n){return new t.Assertion(e,n)},t.expect.fail=function(e,n,r,o){throw r=r||"expect.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:o},t.expect.fail)}}},function(t,e){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){function n(){function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new r(this.valueOf(),null,e):new r(this,null,e)}function n(t){Object.defineProperty(this,"should",{value:t,enumerable:!0,configurable:!0,writable:!0})}Object.defineProperty(Object.prototype,"should",{set:n,get:e,configurable:!0});var o={};return o.fail=function(e,n,r,i){throw r=r||"should.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:i},o.fail)},o.equal=function(t,e,n){new r(t,n).to.equal(e)},o.Throw=function(t,e,n,o){new r(t,o).to.Throw(e,n)},o.exist=function(t,e){new r(t,e).to.exist},o.not={},o.not.equal=function(t,e,n){new r(t,n).to.not.equal(e)},o.not.Throw=function(t,e,n,o){new r(t,o).to.not.Throw(e,n)},o.not.exist=function(t,e){new r(t,e).to.not.exist},o.throw=o.Throw,o.not.throw=o.not.Throw,o}var r=t.Assertion;t.should=n,t.Should=n}},function(t,e){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){/*!
	   * Chai dependencies.
	   */
var n=t.Assertion,r=e.flag,o=t.assert=function(e,r){var o=new n(null,null,t.assert,!0);o.assert(e,r,"[ negation message unavailable ]")};o.fail=function(e,n,r,i){throw r=r||"assert.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:i},o.fail)},o.isOk=function(t,e){new n(t,e,o.isOk,!0).is.ok},o.isNotOk=function(t,e){new n(t,e,o.isNotOk,!0).is.not.ok},o.equal=function(t,e,i){var s=new n(t,i,o.equal,!0);s.assert(e==r(s,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)},o.notEqual=function(t,e,i){var s=new n(t,i,o.notEqual,!0);s.assert(e!=r(s,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)},o.strictEqual=function(t,e,r){new n(t,r,o.strictEqual,!0).to.equal(e)},o.notStrictEqual=function(t,e,r){new n(t,r,o.notStrictEqual,!0).to.not.equal(e)},o.deepEqual=o.deepStrictEqual=function(t,e,r){new n(t,r,o.deepEqual,!0).to.eql(e)},o.notDeepEqual=function(t,e,r){new n(t,r,o.notDeepEqual,!0).to.not.eql(e)},o.isAbove=function(t,e,r){new n(t,r,o.isAbove,!0).to.be.above(e)},o.isAtLeast=function(t,e,r){new n(t,r,o.isAtLeast,!0).to.be.least(e)},o.isBelow=function(t,e,r){new n(t,r,o.isBelow,!0).to.be.below(e)},o.isAtMost=function(t,e,r){new n(t,r,o.isAtMost,!0).to.be.most(e)},o.isTrue=function(t,e){new n(t,e,o.isTrue,!0).is.true},o.isNotTrue=function(t,e){new n(t,e,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(t,e){new n(t,e,o.isFalse,!0).is.false},o.isNotFalse=function(t,e){new n(t,e,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(t,e){new n(t,e,o.isNull,!0).to.equal(null)},o.isNotNull=function(t,e){new n(t,e,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(t,e){new n(t,e,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(t,e){new n(t,e,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(t,e){new n(t,e,o.exists,!0).to.exist},o.notExists=function(t,e){new n(t,e,o.notExists,!0).to.not.exist},o.isUndefined=function(t,e){new n(t,e,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(t,e){new n(t,e,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(t,e){new n(t,e,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(t,e){new n(t,e,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(t,e){new n(t,e,o.isObject,!0).to.be.a("object")},o.isNotObject=function(t,e){new n(t,e,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(t,e){new n(t,e,o.isArray,!0).to.be.an("array")},o.isNotArray=function(t,e){new n(t,e,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(t,e){new n(t,e,o.isString,!0).to.be.a("string")},o.isNotString=function(t,e){new n(t,e,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(t,e){new n(t,e,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(t,e){new n(t,e,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(t,e){new n(t,e,o.isFinite,!0).to.be.finite},o.isBoolean=function(t,e){new n(t,e,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(t,e){new n(t,e,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(t,e,r){new n(t,r,o.typeOf,!0).to.be.a(e)},o.notTypeOf=function(t,e,r){new n(t,r,o.notTypeOf,!0).to.not.be.a(e)},o.instanceOf=function(t,e,r){new n(t,r,o.instanceOf,!0).to.be.instanceOf(e)},o.notInstanceOf=function(t,e,r){new n(t,r,o.notInstanceOf,!0).to.not.be.instanceOf(e)},o.include=function(t,e,r){new n(t,r,o.include,!0).include(e)},o.notInclude=function(t,e,r){new n(t,r,o.notInclude,!0).not.include(e)},o.deepInclude=function(t,e,r){new n(t,r,o.deepInclude,!0).deep.include(e)},o.notDeepInclude=function(t,e,r){new n(t,r,o.notDeepInclude,!0).not.deep.include(e)},o.nestedInclude=function(t,e,r){new n(t,r,o.nestedInclude,!0).nested.include(e)},o.notNestedInclude=function(t,e,r){new n(t,r,o.notNestedInclude,!0).not.nested.include(e)},o.deepNestedInclude=function(t,e,r){new n(t,r,o.deepNestedInclude,!0).deep.nested.include(e)},o.notDeepNestedInclude=function(t,e,r){new n(t,r,o.notDeepNestedInclude,!0).not.deep.nested.include(e)},o.ownInclude=function(t,e,r){new n(t,r,o.ownInclude,!0).own.include(e)},o.notOwnInclude=function(t,e,r){new n(t,r,o.notOwnInclude,!0).not.own.include(e)},o.deepOwnInclude=function(t,e,r){new n(t,r,o.deepOwnInclude,!0).deep.own.include(e)},o.notDeepOwnInclude=function(t,e,r){new n(t,r,o.notDeepOwnInclude,!0).not.deep.own.include(e)},o.match=function(t,e,r){new n(t,r,o.match,!0).to.match(e)},o.notMatch=function(t,e,r){new n(t,r,o.notMatch,!0).to.not.match(e)},o.property=function(t,e,r){new n(t,r,o.property,!0).to.have.property(e)},o.notProperty=function(t,e,r){new n(t,r,o.notProperty,!0).to.not.have.property(e)},o.propertyVal=function(t,e,r,i){new n(t,i,o.propertyVal,!0).to.have.property(e,r)},o.notPropertyVal=function(t,e,r,i){new n(t,i,o.notPropertyVal,!0).to.not.have.property(e,r)},o.deepPropertyVal=function(t,e,r,i){new n(t,i,o.deepPropertyVal,!0).to.have.deep.property(e,r)},o.notDeepPropertyVal=function(t,e,r,i){new n(t,i,o.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)},o.ownProperty=function(t,e,r){new n(t,r,o.ownProperty,!0).to.have.own.property(e)},o.notOwnProperty=function(t,e,r){new n(t,r,o.notOwnProperty,!0).to.not.have.own.property(e)},o.ownPropertyVal=function(t,e,r,i){new n(t,i,o.ownPropertyVal,!0).to.have.own.property(e,r)},o.notOwnPropertyVal=function(t,e,r,i){new n(t,i,o.notOwnPropertyVal,!0).to.not.have.own.property(e,r)},o.deepOwnPropertyVal=function(t,e,r,i){new n(t,i,o.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)},o.notDeepOwnPropertyVal=function(t,e,r,i){new n(t,i,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)},o.nestedProperty=function(t,e,r){new n(t,r,o.nestedProperty,!0).to.have.nested.property(e)},o.notNestedProperty=function(t,e,r){new n(t,r,o.notNestedProperty,!0).to.not.have.nested.property(e)},o.nestedPropertyVal=function(t,e,r,i){new n(t,i,o.nestedPropertyVal,!0).to.have.nested.property(e,r)},o.notNestedPropertyVal=function(t,e,r,i){new n(t,i,o.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)},o.deepNestedPropertyVal=function(t,e,r,i){new n(t,i,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)},o.notDeepNestedPropertyVal=function(t,e,r,i){new n(t,i,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)},o.lengthOf=function(t,e,r){new n(t,r,o.lengthOf,!0).to.have.lengthOf(e)},o.hasAnyKeys=function(t,e,r){new n(t,r,o.hasAnyKeys,!0).to.have.any.keys(e)},o.hasAllKeys=function(t,e,r){new n(t,r,o.hasAllKeys,!0).to.have.all.keys(e)},o.containsAllKeys=function(t,e,r){new n(t,r,o.containsAllKeys,!0).to.contain.all.keys(e)},o.doesNotHaveAnyKeys=function(t,e,r){new n(t,r,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)},o.doesNotHaveAllKeys=function(t,e,r){new n(t,r,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)},o.hasAnyDeepKeys=function(t,e,r){new n(t,r,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)},o.hasAllDeepKeys=function(t,e,r){new n(t,r,o.hasAllDeepKeys,!0).to.have.all.deep.keys(e)},o.containsAllDeepKeys=function(t,e,r){new n(t,r,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)},o.doesNotHaveAnyDeepKeys=function(t,e,r){new n(t,r,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)},o.doesNotHaveAllDeepKeys=function(t,e,r){new n(t,r,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)},o.throws=function(t,e,i,s){("string"==typeof e||e instanceof RegExp)&&(i=e,e=null);var u=new n(t,s,o.throws,!0).to.throw(e,i);return r(u,"object")},o.doesNotThrow=function(t,e,r,i){("string"==typeof e||e instanceof RegExp)&&(r=e,e=null),new n(t,i,o.doesNotThrow,!0).to.not.throw(e,r)},o.operator=function(i,s,u,a){var c;switch(s){case"==":c=i==u;break;case"===":c=i===u;break;case">":c=i>u;break;case">=":c=i>=u;break;case"<":c=i<u;break;case"<=":c=i<=u;break;case"!=":c=i!=u;break;case"!==":c=i!==u;break;default:throw a=a?a+": ":a,new t.AssertionError(a+'Invalid operator "'+s+'"',void 0,o.operator)}var p=new n(c,a,o.operator,!0);p.assert(!0===r(p,"object"),"expected "+e.inspect(i)+" to be "+s+" "+e.inspect(u),"expected "+e.inspect(i)+" to not be "+s+" "+e.inspect(u))},o.closeTo=function(t,e,r,i){new n(t,i,o.closeTo,!0).to.be.closeTo(e,r)},o.approximately=function(t,e,r,i){new n(t,i,o.approximately,!0).to.be.approximately(e,r)},o.sameMembers=function(t,e,r){new n(t,r,o.sameMembers,!0).to.have.same.members(e)},o.notSameMembers=function(t,e,r){new n(t,r,o.notSameMembers,!0).to.not.have.same.members(e)},o.sameDeepMembers=function(t,e,r){new n(t,r,o.sameDeepMembers,!0).to.have.same.deep.members(e)},o.notSameDeepMembers=function(t,e,r){new n(t,r,o.notSameDeepMembers,!0).to.not.have.same.deep.members(e)},o.sameOrderedMembers=function(t,e,r){new n(t,r,o.sameOrderedMembers,!0).to.have.same.ordered.members(e)},o.notSameOrderedMembers=function(t,e,r){new n(t,r,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)},o.sameDeepOrderedMembers=function(t,e,r){new n(t,r,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)},o.notSameDeepOrderedMembers=function(t,e,r){new n(t,r,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)},o.includeMembers=function(t,e,r){new n(t,r,o.includeMembers,!0).to.include.members(e)},o.notIncludeMembers=function(t,e,r){new n(t,r,o.notIncludeMembers,!0).to.not.include.members(e)},o.includeDeepMembers=function(t,e,r){new n(t,r,o.includeDeepMembers,!0).to.include.deep.members(e)},o.notIncludeDeepMembers=function(t,e,r){new n(t,r,o.notIncludeDeepMembers,!0).to.not.include.deep.members(e)},o.includeOrderedMembers=function(t,e,r){new n(t,r,o.includeOrderedMembers,!0).to.include.ordered.members(e)},o.notIncludeOrderedMembers=function(t,e,r){new n(t,r,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)},o.includeDeepOrderedMembers=function(t,e,r){new n(t,r,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)},o.notIncludeDeepOrderedMembers=function(t,e,r){new n(t,r,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)},o.oneOf=function(t,e,r){new n(t,r,o.oneOf,!0).to.be.oneOf(e)},o.changes=function(t,e,r,i){3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.changes,!0).to.change(e,r)},o.changesBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var u=i;i=r,s=u}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.changesBy,!0).to.change(e,r).by(i)},o.doesNotChange=function(t,e,r,i){return 3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.doesNotChange,!0).to.not.change(e,r)},o.changesButNotBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var u=i;i=r,s=u}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.changesButNotBy,!0).to.change(e,r).but.not.by(i)},o.increases=function(t,e,r,i){return 3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.increases,!0).to.increase(e,r)},o.increasesBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var u=i;i=r,s=u}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.increasesBy,!0).to.increase(e,r).by(i)},o.doesNotIncrease=function(t,e,r,i){return 3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.doesNotIncrease,!0).to.not.increase(e,r)},o.increasesButNotBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var u=i;i=r,s=u}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.increasesButNotBy,!0).to.increase(e,r).but.not.by(i)},o.decreases=function(t,e,r,i){return 3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.decreases,!0).to.decrease(e,r)},o.decreasesBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var u=i;i=r,s=u}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.decreasesBy,!0).to.decrease(e,r).by(i)},o.doesNotDecrease=function(t,e,r,i){return 3===arguments.length&&"function"==typeof e&&(i=r,r=null),new n(t,i,o.doesNotDecrease,!0).to.not.decrease(e,r)},o.doesNotDecreaseBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var u=i;i=r,s=u}else 3===arguments.length&&(i=r,r=null);return new n(t,s,o.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(i)},o.decreasesButNotBy=function(t,e,r,i,s){if(4===arguments.length&&"function"==typeof e){var u=i;i=r,s=u}else 3===arguments.length&&(i=r,r=null);new n(t,s,o.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(i)},/*!
	   * ### .ifError(object)
	   *
	   * Asserts if value is not a false value, and throws if it is a true value.
	   * This is added to allow for chai to be a drop-in replacement for Node's
	   * assert class.
	   *
	   *     var err = new Error('I am a custom error');
	   *     assert.ifError(err); // Rethrows err!
	   *
	   * @name ifError
	   * @param {Object} object
	   * @namespace Assert
	   * @api public
	   */
o.ifError=function(t){if(t)throw t},o.isExtensible=function(t,e){new n(t,e,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(t,e){new n(t,e,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(t,e){new n(t,e,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(t,e){new n(t,e,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(t,e){new n(t,e,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(t,e){new n(t,e,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(t,e){new n(t,e,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(t,e){new n(t,e,o.isNotEmpty,!0).to.not.be.empty},/*!
	   * Aliases.
	   */
function t(e,n){return o[n]=o[e],t}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(t,e){},function(t,e,n){function r(t){this._externals=new u(t),this._cache=new i({externals:this._externals,prefix:t.cachePrefix}),this._client=new s(this._externals),this._platform=new a(o({},t,{externals:this._externals,client:this._client,cache:this._cache}))}var o=n(41),i=n(42),s=n(43),u=n(51),a=n(56),c=n(64),p=n(65),h=n(62);r.version=h.version,r.server={sandbox:"https://platform.devtest.ringcentral.com",production:"https://platform.ringcentral.com"},r.prototype.platform=function(){return this._platform},r.prototype.cache=function(){return this._cache},r.prototype.createSubscription=function(t){return new c(o({},t,{externals:this._externals,platform:this._platform}))},r.prototype.createCachedSubscription=function(t){return t="string"==typeof arguments[0]?{cacheKey:arguments[0].toString()}:t||{},new p(o({},t,{externals:this._externals,platform:this._platform,cache:this._cache}))},r.handleLoginRedirect=function(t,e){e=e||window;var n=e.location.hash?e.location.hash:e.location.search,r={};r[h.authResponseProperty]=n,e.opener.postMessage(r,t||e.location.origin)},t.exports=r},function(t,e){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(t,e){for(var r,u,a=n(t),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var p in r)i.call(r,p)&&(a[p]=r[p]);if(o){u=o(r);for(var h=0;h<u.length;h++)s.call(r,u[h])&&(a[u[h]]=r[u[h]])}}return a}},function(t,e){function n(t){this._prefix=t.prefix||n.defaultPrefix,this._externals=t.externals}n.defaultPrefix="rc-",n.prototype.setItem=function(t,e){return this._externals.localStorage[this._prefixKey(t)]=JSON.stringify(e),this},n.prototype.removeItem=function(t){return delete this._externals.localStorage[this._prefixKey(t)],this},n.prototype.getItem=function(t){var e=this._externals.localStorage[this._prefixKey(t)];return e?JSON.parse(e):null},n.prototype.clean=function(){for(var t in this._externals.localStorage)this._externals.localStorage.hasOwnProperty(t)&&0===t.indexOf(this._prefix)&&delete this._externals.localStorage[t];return this},n.prototype._prefixKey=function(t){return this._prefix+t},t.exports=n},function(t,e,n){function r(t,e){return t=t.toLowerCase(),Object.keys(e).reduce(function(e,n){return e?e:t==n.toLowerCase()?n:e},null)}function o(t){s.call(this),this._externals=t,this.events={beforeRequest:"beforeRequest",requestSuccess:"requestSuccess",requestError:"requestError"}}var i=n(44),s=n(46).EventEmitter,u=n(47),a=n(48);o._allowedMethods=["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD"],o.prototype=Object.create(s.prototype),o.prototype.sendRequest=function(t){var e=new u({externals:this._externals,request:t});return new this._externals.Promise(function(n){this.emit(this.events.beforeRequest,e),n(this._loadResponse(t))}.bind(this)).then(function(t){return e.receiveResponse(t)}).then(function(){if(!e.ok())throw new Error("Response has unsuccessful status");return this.emit(this.events.requestSuccess,e),e}.bind(this)).catch(function(t){throw t.apiResponse||(t=this.makeError(t,e)),this.emit(this.events.requestError,t),t}.bind(this))},o.prototype._loadResponse=function(t){return this._externals.fetch.call(null,t)},o.prototype.makeError=function(t,e){return t.hasOwnProperty("apiResponse")||t.hasOwnProperty("originalMessage")||(t.apiResponse=e,t.originalMessage=t.message,t.message=e&&e.error(!0)||t.originalMessage),t},o.prototype.createRequest=function(t){if(t=t||{},t.headers=t.headers||{},!t.url)throw new Error("Url is not defined");if(t.method||(t.method="GET"),t.method=t.method.toUpperCase(),t.method&&o._allowedMethods.indexOf(t.method)<0)throw new Error("Method has wrong value: "+t.method);if(t.credentials=t.credentials||"include",t.mode=t.mode||"cors",t.query&&(t.url=t.url+(t.url.indexOf("?")>-1?"&":"?")+a.stringify(t.query)),r("Accept",t.headers)||(t.headers.Accept=u._jsonContentType),i(t.body)||!t.body){var e=r(u._contentType,t.headers);e||(e=u._contentType,t.headers[e]=u._jsonContentType);var n=t.headers[e];n.indexOf(u._jsonContentType)>-1?"GET"!==t.method&&"HEAD"!==t.method||!t.body?t.body=JSON.stringify(t.body):t.body=void 0:n.indexOf(u._urlencodedContentType)>-1&&(t.body=a.stringify(t.body))}var s=new this._externals.Request(t.url,t);return s.originalBody=t.body,s},t.exports=o},function(t,e,n){/*!
	 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
"use strict";function r(t){return o(t)===!0&&"[object Object]"===Object.prototype.toString.call(t)}var o=n(45);t.exports=function(t){var e,n;return r(t)!==!1&&(e=t.constructor,"function"==typeof e&&(n=e.prototype,r(n)!==!1&&n.hasOwnProperty("isPrototypeOf")!==!1))}},function(t,e){/*!
	 * isobject <https://github.com/jonschlinkert/isobject>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
"use strict";t.exports=function(t){return null!=t&&"object"==typeof t&&Array.isArray(t)===!1}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,u,a,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var p=new Error('Uncaught, unspecified "error" event. ('+e+")");throw p.context=e,p}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(i(n))for(u=Array.prototype.slice.call(arguments,1),c=n.slice(),o=c.length,a=0;a<o;a++)c[a].apply(this,u);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,s,u;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(u=s;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){o=u;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){function n(t){this._externals=t.externals,this._request=t.request,this._response=t.response,this._text=t.responseText||"",this._json=null,this._multipart=[]}n._contentType="Content-Type",n._jsonContentType="application/json",n._multipartContentType="multipart/mixed",n._urlencodedContentType="application/x-www-form-urlencoded",n._headerSeparator=":",n._bodySeparator="\n\n",n._boundarySeparator="--",n._unauthorizedStatus=401,n._rateLimitStatus=429,n.prototype.receiveResponse=function(t){return this._response=t,new this._externals.Promise(function(t){return t(this._isMultipart()||this._isJson()?this.response().text():"")}.bind(this)).then(function(t){return this._text=t,t}.bind(this))},n.prototype.response=function(){return this._response},n.prototype.request=function(){return this._request},n.prototype.ok=function(){return this._response&&this._response.ok},n.prototype.text=function(){if(!this._isJson()&&!this._isMultipart())throw new Error("Response is not text");return this._text},n.prototype.json=function(){if(!this._isJson())throw new Error("Response is not JSON");return this._json||(this._json=this._text?JSON.parse(this._text):null),this._json},n.prototype.error=function(t){if(this.ok()&&!t)return null;var e=(this._response&&this._response.status?this._response.status+" ":"")+(this._response&&this._response.statusText?this._response.statusText:"");try{this.json().message&&(e=this.json().message),this.json().error_description&&(e=this.json().error_description),this.json().description&&(e=this.json().description)}catch(t){}return e},n.prototype.toMultipart=function(){return this._isMultipart()?this.multipart():[this]},n.prototype.multipart=function(){if(!this._isMultipart())throw new Error("Response is not multipart");if(!this._multipart.length){var t=this.text();if(!t)throw new Error("No response body");var e;try{e=this._getContentType().match(/boundary=([^;]+)/i)[1]}catch(t){throw new Error("Cannot find boundary")}if(!e)throw new Error("Cannot find boundary");var r=t.toString().split(n._boundarySeparator+e);if(""===r[0].trim()&&r.shift(),r[r.length-1].trim()==n._boundarySeparator&&r.pop(),r.length<1)throw new Error("No parts in body");var o=this._create(r.shift(),this._response.status,this._response.statusText).json();this._multipart=r.map(function(t,e){var n=o.response[e].status;return this._create(t,n)}.bind(this))}return this._multipart},n.prototype._isContentType=function(t){return this._getContentType().indexOf(t)>-1},n.prototype._getContentType=function(){return this._response.headers.get(n._contentType)||""},n.prototype._isMultipart=function(){return this._isContentType(n._multipartContentType)},n.prototype._isJson=function(){return this._isContentType(n._jsonContentType)},n.prototype._create=function(t,e,r){t=t||"",e=e||200,r=r||"OK",t=t.replace(/\r/g,"");var o=new this._externals.Headers,i=t.split(n._bodySeparator),s=i.length>1?i.shift():"";t=i.length>0?i.join(n._bodySeparator):null,(s||"").split("\n").forEach(function(t){var e=t.trim().split(n._headerSeparator),r=e.shift().trim(),i=e.join(n._headerSeparator).trim();r&&o.append(r,i)});var u=new this._externals.Response(t,{headers:o,status:e,statusText:r});return new n({externals:this._externals,request:null,response:u,responseText:t})},t.exports=n},function(t,e,n){"use strict";e.decode=e.parse=n(49),e.encode=e.stringify=n(50)},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var a=t.length;u>0&&a>u&&(a=u);for(var c=0;c<a;++c){var p,h,f,d,l=t[c].replace(s,"%20"),y=l.indexOf(r);y>=0?(p=l.substr(0,y),h=l.substr(y+1)):(p=l,h=""),f=decodeURIComponent(p),d=decodeURIComponent(h),n(i,f)?Array.isArray(i[f])?i[f].push(d):i[f]=[i[f],d]:i[f]=d}return i}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,o){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(t[o])?t[o].map(function(t){return i+encodeURIComponent(n(t))}).join(e):i+encodeURIComponent(n(t[o]))}).join(e):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(t)):""}},function(t,e,n){(function(e){function r(t){t=t||{},this.PubNub=t.PubNub||u.PubNub||o,this.localStorage=t.localStorage||("undefined"!=typeof u.localStorage?u.localStorage:{}),this.Promise=t.Promise||u.Promise||i&&i.Promise;var e=s?s({Promise:this.Promise}):{};if(this.fetch=t.fetch||u.fetch||e.fetch,this.Request=t.Request||u.Request||e.Request,this.Response=t.Response||u.Response||e.Response,this.Headers=t.Headers||u.Headers||e.Headers,!(this.fetch&&this.Response&&this.Request&&this.Headers))throw new Error("Fetch API is missing");if(!this.Promise)throw new Error("Promise is missing");if(!this.localStorage)throw new Error("LocalStorage is missing");if(!this.PubNub)throw new Error("PubNub is missing")}var o=n(52),i=n(53),s=n(55),u="undefined"!=typeof window&&window||"undefined"!=typeof e&&e||function(){return this}();t.exports=r}).call(e,function(){return this}())},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){return!(!navigator||!navigator.sendBeacon)&&void navigator.sendBeacon(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),c=r(a),p=n(39),h=r(p),f=n(40),d=r(f),l=n(41),y=(n(5),function(t){function e(t){o(this,e);var n=t.listenToBrowserNetworkEvents,r=void 0===n||n;t.db=d.default,t.sdkFamily="Web",t.networking=new h.default({del:l.del,get:l.get,post:l.post,sendBeacon:u});var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r&&(window.addEventListener("offline",function(){s.networkDownDetected()}),window.addEventListener("online",function(){s.networkUpDetected()})),s}return s(e,t),e}(c.default));e.default=y,t.exports=e.default},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),a=o(u),c=n(6),p=o(c),h=n(8),f=o(h),d=n(9),l=o(d),y=n(16),g=o(y),b=n(17),v=r(b),m=n(18),_=r(m),w=n(19),O=r(w),x=n(20),P=r(x),j=n(21),S=r(j),k=n(22),E=r(k),T=n(23),I=r(T),R=n(24),A=r(R),M=n(25),q=r(M),C=n(26),N=r(C),D=n(27),U=r(D),B=n(28),L=r(B),K=n(29),F=r(K),H=n(30),G=r(H),z=n(31),V=r(z),Y=n(32),W=r(Y),J=n(33),X=r(J),$=n(34),Q=r($),Z=n(35),tt=r(Z),et=n(36),nt=r(et),rt=n(37),ot=r(rt),it=n(12),st=r(it),ut=n(38),at=r(ut),ct=n(13),pt=o(ct),ht=n(10),ft=o(ht),dt=(n(5),n(3)),lt=o(dt),yt=function(){function t(e){var n=this;i(this,t);var r=e.db,o=e.networking,s=this._config=new a.default({setup:e,db:r}),u=new p.default({config:s});o.init(s);var c={config:s,networking:o,crypto:u},h=g.default.bind(this,c,st),d=g.default.bind(this,c,N),y=g.default.bind(this,c,L),b=g.default.bind(this,c,G),m=g.default.bind(this,c,at),w=this._listenerManager=new l.default,x=new f.default({timeEndpoint:h,leaveEndpoint:d,heartbeatEndpoint:y,setStateEndpoint:b,subscribeEndpoint:m,crypto:c.crypto,config:c.config,listenerManager:w});this.addListener=w.addListener.bind(w),this.removeListener=w.removeListener.bind(w),this.removeAllListeners=w.removeAllListeners.bind(w),this.channelGroups={listGroups:g.default.bind(this,c,P),listChannels:g.default.bind(this,c,S),addChannels:g.default.bind(this,c,v),removeChannels:g.default.bind(this,c,_),deleteGroup:g.default.bind(this,c,O)},this.push={addChannels:g.default.bind(this,c,E),removeChannels:g.default.bind(this,c,I),deleteDevice:g.default.bind(this,c,q),listChannels:g.default.bind(this,c,A)},this.hereNow=g.default.bind(this,c,V),this.whereNow=g.default.bind(this,c,U),this.getState=g.default.bind(this,c,F),this.setState=x.adaptStateChange.bind(x),this.grant=g.default.bind(this,c,X),this.audit=g.default.bind(this,c,W),this.publish=g.default.bind(this,c,Q),this.fire=function(t,e){return t.replicate=!1,t.storeInHistory=!1,n.publish(t,e)},this.history=g.default.bind(this,c,tt),this.deleteMessages=g.default.bind(this,c,nt),this.fetchMessages=g.default.bind(this,c,ot),this.time=h,this.subscribe=x.adaptSubscribeChange.bind(x),this.presence=x.adaptPresenceChange.bind(x),this.unsubscribe=x.adaptUnsubscribeChange.bind(x),this.disconnect=x.disconnect.bind(x),this.reconnect=x.reconnect.bind(x),this.destroy=function(t){x.unsubscribeAll(t),x.disconnect()},this.stop=this.destroy,this.unsubscribeAll=x.unsubscribeAll.bind(x),this.getSubscribedChannels=x.getSubscribedChannels.bind(x),this.getSubscribedChannelGroups=x.getSubscribedChannelGroups.bind(x),this.encrypt=u.encrypt.bind(u),this.decrypt=u.decrypt.bind(u),this.getAuthKey=c.config.getAuthKey.bind(c.config),this.setAuthKey=c.config.setAuthKey.bind(c.config),this.setCipherKey=c.config.setCipherKey.bind(c.config),this.getUUID=c.config.getUUID.bind(c.config),this.setUUID=c.config.setUUID.bind(c.config),this.getFilterExpression=c.config.getFilterExpression.bind(c.config),this.setFilterExpression=c.config.setFilterExpression.bind(c.config),this.setHeartbeatInterval=c.config.setHeartbeatInterval.bind(c.config),o.hasModule("proxy")&&(this.setProxy=function(t){c.config.setProxy(t),n.reconnect()})}return s(t,[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}],[{key:"generateUUID",value:function(){return lt.default.createUUID()}}]),t}();yt.OPERATIONS=pt.default,yt.CATEGORIES=ft.default,e.default=yt,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),s=function(t){return t&&t.__esModule?t:{default:t}}(i),u=(n(5),function(){function t(e){var n=e.setup,o=e.db;r(this,t),this._db=o,this.instanceId="pn-"+s.default.createUUID(),this.secretKey=n.secretKey||n.secret_key,this.subscribeKey=n.subscribeKey||n.subscribe_key,this.publishKey=n.publishKey||n.publish_key,this.sdkName=n.sdkName,this.sdkFamily=n.sdkFamily,this.partnerId=n.partnerId,this.setAuthKey(n.authKey),this.setCipherKey(n.cipherKey),this.setFilterExpression(n.filterExpression),this.origin=n.origin||"pubsub.pndsn.com",this.secure=n.ssl||!1,this.restore=n.restore||!1,this.proxy=n.proxy,this.keepAlive=n.keepAlive,this.keepAliveSettings=n.keepAliveSettings,this.autoNetworkDetection=n.autoNetworkDetection||!1,this.dedupeOnSubscribe=n.dedupeOnSubscribe||!1,this.maximumCacheSize=n.maximumCacheSize||100,this.customEncrypt=n.customEncrypt,this.customDecrypt=n.customDecrypt,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=n.logVerbosity||!1,this.suppressLeaveEvents=n.suppressLeaveEvents||!1,this.announceFailedHeartbeats=n.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=n.announceSuccessfulHeartbeats||!1,this.useInstanceId=n.useInstanceId||!1,this.useRequestId=n.useRequestId||!1,this.requestMessageCountThreshold=n.requestMessageCountThreshold,this.setTransactionTimeout(n.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(n.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(n.useSendBeacon||!0),this.setPresenceTimeout(n.presenceTimeout||300),null!=n.heartbeatInterval&&this.setHeartbeatInterval(n.heartbeatInterval),this.setUUID(this._decideUUID(n.uuid))}return o(t,[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(t){return this.authKey=t,this}},{key:"setCipherKey",value:function(t){return this.cipherKey=t,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(t){return this._db&&this._db.set&&this._db.set(this.subscribeKey+"uuid",t),this.UUID=t,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(t){return this.filterExpression=t,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(t){return this._presenceTimeout=t,this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"setProxy",value:function(t){this.proxy=t}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(t){return this._heartbeatInterval=t,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(t){return this._subscribeRequestTimeout=t,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(t){return this._transactionalRequestTimeout=t,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(t){return this._useSendBeacon=t,this}},{key:"getVersion",value:function(){return"4.20.1"}},{key:"_decideUUID",value:function(t){return t||(this._db&&this._db.get&&this._db.get(this.subscribeKey+"uuid")?this._db.get(this.subscribeKey+"uuid"):"pn-"+s.default.createUUID())}}]),t}());e.default=u,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={createUUID:function(){return o.default.uuid?o.default.uuid():(0,o.default)()}},t.exports=e.default},function(t,e,n){var r,o,i;!function(n,s){o=[e],r=s,void 0!==(i="function"==typeof r?r.apply(e,o):r)&&(t.exports=i)}(0,function(t){function e(){var t,e,n="";for(t=0;t<32;t++)e=16*Math.random()|0,8!==t&&12!==t&&16!==t&&20!==t||(n+="-"),n+=(12===t?4:16===t?3&e|8:e).toString(16);return n}function n(t,e){var n=r[e||"all"];return n&&n.test(t)||!1}var r={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};e.isUUID=n,e.VERSION="0.1.0",t.uuid=e,t.isUUID=n})},function(t,e){"use strict";t.exports={}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),u=(r(s),n(7)),a=r(u),c=function(){function t(e){var n=e.config;o(this,t),this._config=n,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return i(t,[{key:"HMACSHA256",value:function(t){return a.default.HmacSHA256(t,this._config.secretKey).toString(a.default.enc.Base64)}},{key:"SHA256",value:function(t){return a.default.SHA256(t).toString(a.default.enc.Hex)}},{key:"_parseOptions",value:function(t){var e=t||{};return e.hasOwnProperty("encryptKey")||(e.encryptKey=this._defaultOptions.encryptKey),e.hasOwnProperty("keyEncoding")||(e.keyEncoding=this._defaultOptions.keyEncoding),e.hasOwnProperty("keyLength")||(e.keyLength=this._defaultOptions.keyLength),e.hasOwnProperty("mode")||(e.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(e.keyEncoding.toLowerCase())&&(e.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(e.keyLength,10))&&(e.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(e.mode.toLowerCase())&&(e.mode=this._defaultOptions.mode),e}},{key:"_decodeKey",value:function(t,e){return"base64"===e.keyEncoding?a.default.enc.Base64.parse(t):"hex"===e.keyEncoding?a.default.enc.Hex.parse(t):t}},{key:"_getPaddedKey",value:function(t,e){return t=this._decodeKey(t,e),e.encryptKey?a.default.enc.Utf8.parse(this.SHA256(t).slice(0,32)):t}},{key:"_getMode",value:function(t){return"ecb"===t.mode?a.default.mode.ECB:a.default.mode.CBC}},{key:"_getIV",value:function(t){return"cbc"===t.mode?a.default.enc.Utf8.parse(this._iv):null}},{key:"encrypt",value:function(t,e,n){return this._config.customEncrypt?this._config.customEncrypt(t):this.pnEncrypt(t,e,n)}},{key:"decrypt",value:function(t,e,n){return this._config.customDecrypt?this._config.customDecrypt(t):this.pnDecrypt(t,e,n)}},{key:"pnEncrypt",value:function(t,e,n){if(!e&&!this._config.cipherKey)return t;n=this._parseOptions(n);var r=this._getIV(n),o=this._getMode(n),i=this._getPaddedKey(e||this._config.cipherKey,n);return a.default.AES.encrypt(t,i,{iv:r,mode:o}).ciphertext.toString(a.default.enc.Base64)||t}},{key:"pnDecrypt",value:function(t,e,n){if(!e&&!this._config.cipherKey)return t;n=this._parseOptions(n);var r=this._getIV(n),o=this._getMode(n),i=this._getPaddedKey(e||this._config.cipherKey,n);try{var s=a.default.enc.Base64.parse(t),u=a.default.AES.decrypt({ciphertext:s},i,{iv:r,mode:o}).toString(a.default.enc.Utf8);return JSON.parse(u)}catch(t){return null}}}]),t}();e.default=c,t.exports=e.default},function(t,e){"use strict";var n=n||function(t,e){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(t){o.prototype=this;var e=new o;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var o=0;o<t;o++)e[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else if(65535<n.length)for(o=0;o<t;o+=4)e[r+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),u=n.enc={},a=u.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var o=e[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},c=u.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},p=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,u=o/(4*i),u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0);if(e=u*i,o=t.min(4*e,o),e){for(var a=0;a<e;a+=i)this._doProcessBlock(r,a);a=r.splice(0,e),n.sigBytes-=o}return new s.init(a,o)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=h.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}});var f=n.algo={};return n}(Math);!function(t){for(var e=n,r=e.lib,o=r.WordArray,i=r.Hasher,r=e.algo,s=[],u=[],a=function(t){return 4294967296*(t-(0|t))|0},c=2,p=0;64>p;){var h;t:{h=c;for(var f=t.sqrt(h),d=2;d<=f;d++)if(!(h%d)){h=!1;break t}h=!0}h&&(8>p&&(s[p]=a(t.pow(c,.5))),u[p]=a(t.pow(c,1/3)),p++),c++}var l=[],r=r.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],c=n[5],p=n[6],h=n[7],f=0;64>f;f++){if(16>f)l[f]=0|t[e+f];else{var d=l[f-15],y=l[f-2];l[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+l[f-7]+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+l[f-16]}d=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&p)+u[f]+l[f],y=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&o^r&i^o&i),h=p,p=c,c=a,a=s+d|0,s=i,i=o,o=r,r=d+y|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+c|0,n[6]=n[6]+p|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(r),e.HmacSHA256=i._createHmacHelper(r)}(Math),function(){var t=n,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,o=4*r;n.sigBytes>o&&(n=t.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),s=this._iKey=n.clone(),u=i.words,a=s.words,c=0;c<r;c++)u[c]^=1549556828,a[c]^=909522486;i.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=n,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var o=0;o<n;o+=3)for(var i=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;4>s&&o+.75*s<n;s++)t.push(r.charAt(i>>>6*(3-s)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map,o=r.charAt(64);o&&-1!=(o=t.indexOf(o))&&(n=o);for(var o=[],i=0,s=0;s<n;s++)if(s%4){var u=r.indexOf(t.charAt(s-1))<<s%4*2,a=r.indexOf(t.charAt(s))>>>6-s%4*2;o[i>>>2]|=(u|a)<<24-i%4*8,i++}return e.create(o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,r,o,i,s){return((t=t+(e&n|~e&r)+o+s)<<i|t>>>32-i)+e}function r(t,e,n,r,o,i,s){return((t=t+(e&r|n&~r)+o+s)<<i|t>>>32-i)+e}function o(t,e,n,r,o,i,s){return((t=t+(e^n^r)+o+s)<<i|t>>>32-i)+e}function i(t,e,n,r,o,i,s){return((t=t+(n^(e|~r))+o+s)<<i|t>>>32-i)+e}for(var s=n,u=s.lib,a=u.WordArray,c=u.Hasher,u=s.algo,p=[],h=0;64>h;h++)p[h]=4294967296*t.abs(t.sin(h+1))|0;u=u.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,n){for(var s=0;16>s;s++){var u=n+s,a=t[u];t[u]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var s=this._hash.words,u=t[n+0],a=t[n+1],c=t[n+2],h=t[n+3],f=t[n+4],d=t[n+5],l=t[n+6],y=t[n+7],g=t[n+8],b=t[n+9],v=t[n+10],m=t[n+11],_=t[n+12],w=t[n+13],O=t[n+14],x=t[n+15],P=s[0],j=s[1],S=s[2],k=s[3],P=e(P,j,S,k,u,7,p[0]),k=e(k,P,j,S,a,12,p[1]),S=e(S,k,P,j,c,17,p[2]),j=e(j,S,k,P,h,22,p[3]),P=e(P,j,S,k,f,7,p[4]),k=e(k,P,j,S,d,12,p[5]),S=e(S,k,P,j,l,17,p[6]),j=e(j,S,k,P,y,22,p[7]),P=e(P,j,S,k,g,7,p[8]),k=e(k,P,j,S,b,12,p[9]),S=e(S,k,P,j,v,17,p[10]),j=e(j,S,k,P,m,22,p[11]),P=e(P,j,S,k,_,7,p[12]),k=e(k,P,j,S,w,12,p[13]),S=e(S,k,P,j,O,17,p[14]),j=e(j,S,k,P,x,22,p[15]),P=r(P,j,S,k,a,5,p[16]),k=r(k,P,j,S,l,9,p[17]),S=r(S,k,P,j,m,14,p[18]),j=r(j,S,k,P,u,20,p[19]),P=r(P,j,S,k,d,5,p[20]),k=r(k,P,j,S,v,9,p[21]),S=r(S,k,P,j,x,14,p[22]),j=r(j,S,k,P,f,20,p[23]),P=r(P,j,S,k,b,5,p[24]),k=r(k,P,j,S,O,9,p[25]),S=r(S,k,P,j,h,14,p[26]),j=r(j,S,k,P,g,20,p[27]),P=r(P,j,S,k,w,5,p[28]),k=r(k,P,j,S,c,9,p[29]),S=r(S,k,P,j,y,14,p[30]),j=r(j,S,k,P,_,20,p[31]),P=o(P,j,S,k,d,4,p[32]),k=o(k,P,j,S,g,11,p[33]),S=o(S,k,P,j,m,16,p[34]),j=o(j,S,k,P,O,23,p[35]),P=o(P,j,S,k,a,4,p[36]),k=o(k,P,j,S,f,11,p[37]),S=o(S,k,P,j,y,16,p[38]),j=o(j,S,k,P,v,23,p[39]),P=o(P,j,S,k,w,4,p[40]),k=o(k,P,j,S,u,11,p[41]),S=o(S,k,P,j,h,16,p[42]),j=o(j,S,k,P,l,23,p[43]),P=o(P,j,S,k,b,4,p[44]),k=o(k,P,j,S,_,11,p[45]),S=o(S,k,P,j,x,16,p[46]),j=o(j,S,k,P,c,23,p[47]),P=i(P,j,S,k,u,6,p[48]),k=i(k,P,j,S,y,10,p[49]),S=i(S,k,P,j,O,15,p[50]),j=i(j,S,k,P,d,21,p[51]),P=i(P,j,S,k,_,6,p[52]),k=i(k,P,j,S,h,10,p[53]),S=i(S,k,P,j,v,15,p[54]),j=i(j,S,k,P,a,21,p[55]),P=i(P,j,S,k,g,6,p[56]),k=i(k,P,j,S,x,10,p[57]),S=i(S,k,P,j,l,15,p[58]),j=i(j,S,k,P,w,21,p[59]),P=i(P,j,S,k,f,6,p[60]),k=i(k,P,j,S,m,10,p[61]),S=i(S,k,P,j,c,15,p[62]),j=i(j,S,k,P,b,21,p[63]);s[0]=s[0]+P|0,s[1]=s[1]+j|0,s[2]=s[2]+S|0,s[3]=s[3]+k|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(r/4294967296);for(n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),e=this._hash,n=e.words,r=0;4>r;r++)o=n[r],n[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return e},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=c._createHelper(u),s.HmacMD5=c._createHmacHelper(u)}(Math),function(){var t=n,e=t.lib,r=e.Base,o=e.WordArray,e=t.algo,i=e.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=n.hasher.create(),i=o.create(),s=i.words,u=n.keySize,n=n.iterations;s.length<u;){a&&r.update(a);var a=r.update(t).finalize(e);r.reset();for(var c=1;c<n;c++)a=r.finalize(a),r.reset();i.concat(a)}return i.sigBytes=4*u,i}});t.EvpKDF=function(t,e,n){return i.create(n).compute(t,e)}}(),n.lib.Cipher||function(t){var e=n,r=e.lib,o=r.Base,i=r.WordArray,s=r.BufferedBlockAlgorithm,u=e.enc.Base64,a=e.algo.EvpKDF,c=r.Cipher=s.extend({
cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?y:l).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?y:l).decrypt(t,e,n,r)}}}});r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var p=e.mode={},h=function(t,e,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var o=0;o<n;o++)t[e+o]^=r[o]},f=(r.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();f.Encryptor=f.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;h.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),f.Decryptor=f.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,o=t.slice(e,e+r);n.decryptBlock(t,e),h.call(this,t,e,r),this._prevBlock=o}}),p=p.CBC=f,f=(e.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,n=n-t.sigBytes%n,r=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(r);n=i.create(o,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:p,padding:f}),reset:function(){c.reset.call(this);var t=this.cfg,e=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var d=r.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),p=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(u)},parse:function(t){t=u.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var n=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return d.create({ciphertext:t,salt:n})}},l=r.SerializableCipher=o.extend({cfg:o.extend({format:p}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var o=t.createEncryptor(n,r);return e=o.finalize(e),o=o.cfg,d.create({ciphertext:e,key:n,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),e=(e.kdf={}).OpenSSL={execute:function(t,e,n,r){return r||(r=i.random(8)),t=a.create({keySize:e+n}).compute(t,r),n=i.create(t.words.slice(e),4*n),t.sigBytes=4*e,d.create({key:t,iv:n,salt:r})}},y=r.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:e}),encrypt:function(t,e,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,t=l.encrypt.call(this,t,e,n.key,r),t.mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,l.decrypt.call(this,t,e,n.key,r)}})}(),function(){for(var t=n,e=t.lib.BlockCipher,r=t.algo,o=[],i=[],s=[],u=[],a=[],c=[],p=[],h=[],f=[],d=[],l=[],y=0;256>y;y++)l[y]=128>y?y<<1:y<<1^283;for(var g=0,b=0,y=0;256>y;y++){var v=b^b<<1^b<<2^b<<3^b<<4,v=v>>>8^255&v^99;o[g]=v,i[v]=g;var m=l[g],_=l[m],w=l[_],O=257*l[v]^16843008*v;s[g]=O<<24|O>>>8,u[g]=O<<16|O>>>16,a[g]=O<<8|O>>>24,c[g]=O,O=16843009*w^65537*_^257*m^16843008*g,p[v]=O<<24|O>>>8,h[v]=O<<16|O>>>16,f[v]=O<<8|O>>>24,d[v]=O,g?(g=m^l[l[l[w^m]]],b^=l[l[b]]):g=b=1}var x=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes/4,t=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],i=0;i<t;i++)if(i<n)r[i]=e[i];else{var s=r[i-1];i%n?6<n&&4==i%n&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=s<<8|s>>>24,s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=x[i/n|0]<<24),r[i]=r[i-n]^s}for(e=this._invKeySchedule=[],n=0;n<t;n++)i=t-n,s=n%4?r[i]:r[i-4],e[n]=4>n||4>=i?s:p[o[s>>>24]]^h[o[s>>>16&255]]^f[o[s>>>8&255]]^d[o[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,u,a,c,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,p,h,f,d,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,o,i,s,u){for(var a=this._nRounds,c=t[e]^n[0],p=t[e+1]^n[1],h=t[e+2]^n[2],f=t[e+3]^n[3],d=4,l=1;l<a;l++)var y=r[c>>>24]^o[p>>>16&255]^i[h>>>8&255]^s[255&f]^n[d++],g=r[p>>>24]^o[h>>>16&255]^i[f>>>8&255]^s[255&c]^n[d++],b=r[h>>>24]^o[f>>>16&255]^i[c>>>8&255]^s[255&p]^n[d++],f=r[f>>>24]^o[c>>>16&255]^i[p>>>8&255]^s[255&h]^n[d++],c=y,p=g,h=b;y=(u[c>>>24]<<24|u[p>>>16&255]<<16|u[h>>>8&255]<<8|u[255&f])^n[d++],g=(u[p>>>24]<<24|u[h>>>16&255]<<16|u[f>>>8&255]<<8|u[255&c])^n[d++],b=(u[h>>>24]<<24|u[f>>>16&255]<<16|u[c>>>8&255]<<8|u[255&p])^n[d++],f=(u[f>>>24]<<24|u[c>>>16&255]<<16|u[p>>>8&255]<<8|u[255&h])^n[d++],t[e]=y,t[e+1]=g,t[e+2]=b,t[e+3]=f},keySize:8});t.AES=e._createHelper(r)}(),n.mode.ECB=function(){var t=n.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),t.Decryptor=t.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),t}(),t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),u=(r(s),n(2)),a=(r(u),n(9)),c=(r(a),n(11)),p=r(c),h=n(14),f=r(h),d=n(15),l=r(d),y=(n(5),n(10)),g=r(y),b=function(){function t(e){var n=e.subscribeEndpoint,r=e.leaveEndpoint,i=e.heartbeatEndpoint,s=e.setStateEndpoint,u=e.timeEndpoint,a=e.config,c=e.crypto,h=e.listenerManager;o(this,t),this._listenerManager=h,this._config=a,this._leaveEndpoint=r,this._heartbeatEndpoint=i,this._setStateEndpoint=s,this._subscribeEndpoint=n,this._crypto=c,this._channels={},this._presenceChannels={},this._heartbeatChannels={},this._heartbeatChannelGroups={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new p.default({timeEndpoint:u}),this._dedupingManager=new f.default({config:a})}return i(t,[{key:"adaptStateChange",value:function(t,e){var n=this,r=t.state,o=t.channels,i=void 0===o?[]:o,s=t.channelGroups,u=void 0===s?[]:s;return i.forEach(function(t){t in n._channels&&(n._channels[t].state=r)}),u.forEach(function(t){t in n._channelGroups&&(n._channelGroups[t].state=r)}),this._setStateEndpoint({state:r,channels:i,channelGroups:u},e)}},{key:"adaptPresenceChange",value:function(t){var e=this,n=t.connected,r=t.channels,o=void 0===r?[]:r,i=t.channelGroups,s=void 0===i?[]:i;n?(o.forEach(function(t){e._heartbeatChannels[t]={state:{}}}),s.forEach(function(t){e._heartbeatChannelGroups[t]={state:{}}})):(o.forEach(function(t){t in e._heartbeatChannels&&delete e._heartbeatChannels[t]}),s.forEach(function(t){t in e._heartbeatChannelGroups&&delete e._heartbeatChannelGroups[t]}),!1===this._config.suppressLeaveEvents&&this._leaveEndpoint({channels:o,channelGroups:s},function(t){e._listenerManager.announceStatus(t)})),this.reconnect()}},{key:"adaptSubscribeChange",value:function(t){var e=this,n=t.timetoken,r=t.channels,o=void 0===r?[]:r,i=t.channelGroups,s=void 0===i?[]:i,u=t.withPresence,a=void 0!==u&&u;return this._config.subscribeKey&&""!==this._config.subscribeKey?(n&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=n),"0"!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),o.forEach(function(t){e._channels[t]={state:{}},a&&(e._presenceChannels[t]={}),e._pendingChannelSubscriptions.push(t)}),s.forEach(function(t){e._channelGroups[t]={state:{}},a&&(e._presenceChannelGroups[t]={}),e._pendingChannelGroupSubscriptions.push(t)}),this._subscriptionStatusAnnounced=!1,this.reconnect(),void 0):void(console&&console.log&&console.log("subscribe key missing; aborting subscribe"))}},{key:"adaptUnsubscribeChange",value:function(t,e){var n=this,r=t.channels,o=void 0===r?[]:r,i=t.channelGroups,s=void 0===i?[]:i,u=[],a=[];o.forEach(function(t){t in n._channels&&(delete n._channels[t],u.push(t)),t in n._presenceChannels&&(delete n._presenceChannels[t],u.push(t))}),s.forEach(function(t){t in n._channelGroups&&(delete n._channelGroups[t],a.push(t)),t in n._presenceChannelGroups&&(delete n._channelGroups[t],a.push(t))}),0===u.length&&0===a.length||(!1!==this._config.suppressLeaveEvents||e||this._leaveEndpoint({channels:u,channelGroups:a},function(t){t.affectedChannels=u,t.affectedChannelGroups=a,t.currentTimetoken=n._currentTimetoken,t.lastTimetoken=n._lastTimetoken,n._listenerManager.announceStatus(t)}),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(t){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},t)}},{key:"getHeartbeatChannels",value:function(){return Object.keys(this._heartbeatChannels)}},{key:"getHeartbeatChannelGroups",value:function(){return Object.keys(this._heartbeatChannelGroups)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var t=this,e=[];e=e.concat(this.getHeartbeatChannels()),e=e.concat(this.getSubscribedChannels());var n=[];n=n.concat(this.getHeartbeatChannelGroups()),n=n.concat(this.getSubscribedChannelGroups());var r={};if(0!==e.length||0!==n.length){this.getSubscribedChannels().forEach(function(e){var n=t._channels[e].state;Object.keys(n).length&&(r[e]=n)}),this.getSubscribedChannelGroups().forEach(function(e){var n=t._channelGroups[e].state;Object.keys(n).length&&(r[e]=n)});var o=function(e){e.error&&t._config.announceFailedHeartbeats&&t._listenerManager.announceStatus(e),e.error&&t._config.autoNetworkDetection&&t._isOnline&&(t._isOnline=!1,t.disconnect(),t._listenerManager.announceNetworkDown(),t.reconnect()),!e.error&&t._config.announceSuccessfulHeartbeats&&t._listenerManager.announceStatus(e)};this._heartbeatEndpoint({channels:e,channelGroups:n,state:r},o.bind(this))}}},{key:"_startSubscribeLoop",value:function(){this._stopSubscribeLoop();var t=[],e=[];if(Object.keys(this._channels).forEach(function(e){return t.push(e)}),Object.keys(this._presenceChannels).forEach(function(e){return t.push(e+"-pnpres")}),Object.keys(this._channelGroups).forEach(function(t){return e.push(t)}),Object.keys(this._presenceChannelGroups).forEach(function(t){return e.push(t+"-pnpres")}),0!==t.length||0!==e.length){var n={channels:t,channelGroups:e,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(n,this._processSubscribeResponse.bind(this))}}},{key:"_processSubscribeResponse",value:function(t,e){var n=this;if(t.error)return void(t.category===g.default.PNTimeoutCategory?this._startSubscribeLoop():t.category===g.default.PNNetworkIssuesCategory?(this.disconnect(),t.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection(function(){n._config.autoNetworkDetection&&!n._isOnline&&(n._isOnline=!0,n._listenerManager.announceNetworkUp()),n.reconnect(),n._subscriptionStatusAnnounced=!0;var e={category:g.default.PNReconnectedCategory,operation:t.operation,lastTimetoken:n._lastTimetoken,currentTimetoken:n._currentTimetoken};n._listenerManager.announceStatus(e)}),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(t)):t.category===g.default.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(t)):this._listenerManager.announceStatus(t));if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=e.metadata.timetoken),!this._subscriptionStatusAnnounced){var r={};r.category=g.default.PNConnectedCategory,r.operation=t.operation,r.affectedChannels=this._pendingChannelSubscriptions,r.subscribedChannels=this.getSubscribedChannels(),r.affectedChannelGroups=this._pendingChannelGroupSubscriptions,r.lastTimetoken=this._lastTimetoken,r.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(r),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var o=e.messages||[],i=this._config,s=i.requestMessageCountThreshold,u=i.dedupeOnSubscribe;if(s&&o.length>=s){var a={};a.category=g.default.PNRequestMessageCountExceededCategory,a.operation=t.operation,this._listenerManager.announceStatus(a)}o.forEach(function(t){var e=t.channel,r=t.subscriptionMatch,o=t.publishMetaData;if(e===r&&(r=null),u){if(n._dedupingManager.isDuplicate(t))return;n._dedupingManager.addEntry(t)}if(l.default.endsWith(t.channel,"-pnpres")){var i={};i.channel=null,i.subscription=null,i.actualChannel=null!=r?e:null,i.subscribedChannel=null!=r?r:e,e&&(i.channel=e.substring(0,e.lastIndexOf("-pnpres"))),r&&(i.subscription=r.substring(0,r.lastIndexOf("-pnpres"))),i.action=t.payload.action,i.state=t.payload.data,i.timetoken=o.publishTimetoken,i.occupancy=t.payload.occupancy,i.uuid=t.payload.uuid,i.timestamp=t.payload.timestamp,t.payload.join&&(i.join=t.payload.join),t.payload.leave&&(i.leave=t.payload.leave),t.payload.timeout&&(i.timeout=t.payload.timeout),n._listenerManager.announcePresence(i)}else{var s={};s.channel=null,s.subscription=null,s.actualChannel=null!=r?e:null,s.subscribedChannel=null!=r?r:e,s.channel=e,s.subscription=r,s.timetoken=o.publishTimetoken,s.publisher=t.issuingClientId,t.userMetadata&&(s.userMetadata=t.userMetadata),n._config.cipherKey?s.message=n._crypto.decrypt(t.payload):s.message=t.payload,n._listenerManager.announceMessage(s)}}),this._region=e.metadata.region,this._startSubscribeLoop()}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&("function"==typeof this._subscribeCall.abort&&this._subscribeCall.abort(),this._subscribeCall=null)}}]),t}();e.default=b,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=(n(5),n(10)),s=function(t){return t&&t.__esModule?t:{default:t}}(i),u=function(){function t(){r(this,t),this._listeners=[]}return o(t,[{key:"addListener",value:function(t){this._listeners.push(t)}},{key:"removeListener",value:function(t){var e=[];this._listeners.forEach(function(n){n!==t&&e.push(n)}),this._listeners=e}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(t){this._listeners.forEach(function(e){e.presence&&e.presence(t)})}},{key:"announceStatus",value:function(t){this._listeners.forEach(function(e){e.status&&e.status(t)})}},{key:"announceMessage",value:function(t){this._listeners.forEach(function(e){e.message&&e.message(t)})}},{key:"announceNetworkUp",value:function(){var t={};t.category=s.default.PNNetworkUpCategory,this.announceStatus(t)}},{key:"announceNetworkDown",value:function(){var t={};t.category=s.default.PNNetworkDownCategory,this.announceStatus(t)}}]),t}();e.default=u,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(12),s=(function(t){t&&t.__esModule}(i),n(5),function(){function t(e){var n=e.timeEndpoint;r(this,t),this._timeEndpoint=n}return o(t,[{key:"onReconnection",value:function(t){this._reconnectionCallback=t}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var t=this;this._timeEndpoint(function(e){e.error||(clearInterval(t._timeTimer),t._reconnectionCallback())})}}]),t}());e.default=s,t.exports=e.default},function(t,e,n){"use strict";function r(){return h.default.PNTimeOperation}function o(){return"/time/0"}function i(t){return t.config.getTransactionTimeout()}function s(){return{}}function u(){return!1}function a(t,e){return{timetoken:e[0]}}function c(){}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=r,e.getURL=o,e.getRequestTimeout=i,e.prepareParams=s,e.isAuthSupported=u,e.handleResponse=a,e.validateParams=c;var p=(n(5),n(13)),h=function(t){return t&&t.__esModule?t:{default:t}}(p)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerAudit:"PNAccessManagerAudit"},t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2),s=(function(t){t&&t.__esModule}(i),n(5),function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n+=1)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}),u=function(){function t(e){var n=e.config;r(this,t),this.hashHistory=[],this._config=n}return o(t,[{key:"getKey",value:function(t){var e=s(JSON.stringify(t.payload)).toString();return t.publishMetaData.publishTimetoken+"-"+e}},{key:"isDuplicate",value:function(t){return this.hashHistory.includes(this.getKey(t))}},{key:"addEntry",value:function(t){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(t))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}]),t}();e.default=u,t.exports=e.default},function(t,e){"use strict";function n(t){var e=[];return Object.keys(t).forEach(function(t){return e.push(t)}),e}function r(t){return encodeURIComponent(t).replace(/[!~*'()]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function o(t){return n(t).sort()}function i(t){return o(t).map(function(e){return e+"="+r(t[e])}).join("&")}function s(t,e){return-1!==t.indexOf(e,this.length-e.length)}function u(){var t=void 0,e=void 0;return{promise:new Promise(function(n,r){t=n,e=r}),reject:e,fulfill:t}}t.exports={signPamFromParams:i,endsWith:s,createPromise:u,encodeString:r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){return t.type=e,t.error=!0,t}function a(t){return u({message:t},"validationError")}function c(t,e,n){return t.usePost&&t.usePost(e,n)?t.postURL(e,n):t.getURL(e,n)}function p(t){if(t.sdkName)return t.sdkName;var e="PubNub-JS-"+t.sdkFamily;return t.partnerId&&(e+="-"+t.partnerId),e+="/"+t.getVersion()}function h(t,e,n){var r=t.config,o=t.crypto;n.timestamp=Math.floor((new Date).getTime()/1e3);var i=r.subscribeKey+"\n"+r.publishKey+"\n"+e+"\n";i+=y.default.signPamFromParams(n);var s=o.HMACSHA256(i);s=s.replace(/\+/g,"-"),s=s.replace(/\//g,"_"),n.signature=s}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.networking,r=t.config,o=null,i=null,s={};e.getOperation()===v.default.PNTimeOperation||e.getOperation()===v.default.PNChannelGroupsOperation?o=arguments.length<=2?void 0:arguments[2]:(s=arguments.length<=2?void 0:arguments[2],o=arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||o||(i=y.default.createPromise());var u=e.validateParams(t,s);if(!u){var f=e.prepareParams(t,s),l=c(e,t,s),g=void 0,b={url:l,operation:e.getOperation(),timeout:e.getRequestTimeout(t)};f.uuid=r.UUID,f.pnsdk=p(r),r.useInstanceId&&(f.instanceid=r.instanceId),r.useRequestId&&(f.requestid=d.default.createUUID()),e.isAuthSupported()&&r.getAuthKey()&&(f.auth=r.getAuthKey()),r.secretKey&&h(t,l,f);var _=function(n,r){if(n.error)return void(o?o(n):i&&i.reject(new m("PubNub call failed, check status for details",n)));var u=e.handleResponse(t,r,s);o?o(n,u):i&&i.fulfill(u)};if(e.usePost&&e.usePost(t,s)){var w=e.postPayload(t,s);g=n.POST(f,w,b,_)}else g=e.useDelete&&e.useDelete()?n.DELETE(f,b,_):n.GET(f,b,_);return e.getOperation()===v.default.PNSubscribeOperation?g:i?i.promise:void 0}return o?o(a(u)):i?(i.reject(new m("Validation failed, check status for details",a(u))),i.promise):void 0};var f=n(3),d=r(f),l=(n(5),n(15)),y=r(l),g=n(2),b=(r(g),n(13)),v=r(b),m=function(t){function e(t,n){o(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.name=r.constructor.name,r.status=n,r.message=t,r}return s(e,t),e}(Error);t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return f.default.PNAddChannelsToGroupOperation}function i(t,e){var n=e.channels,r=e.channelGroup,o=t.config;return r?n&&0!==n.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"}function s(t,e){var n=e.channelGroup;return"/v1/channel-registration/sub-key/"+t.config.subscribeKey+"/channel-group/"+l.default.encodeString(n)}function u(t){return t.config.getTransactionTimeout()}function a(){return!0}function c(t,e){var n=e.channels;return{add:(void 0===n?[]:n).join(",")}}function p(){return{}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.getURL=s,e.getRequestTimeout=u,e.isAuthSupported=a,e.prepareParams=c,e.handleResponse=p;var h=(n(5),n(13)),f=r(h),d=n(15),l=r(d)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return f.default.PNRemoveChannelsFromGroupOperation}function i(t,e){var n=e.channels,r=e.channelGroup,o=t.config;return r?n&&0!==n.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"}function s(t,e){var n=e.channelGroup;return"/v1/channel-registration/sub-key/"+t.config.subscribeKey+"/channel-group/"+l.default.encodeString(n)}function u(t){return t.config.getTransactionTimeout()}function a(){return!0}function c(t,e){var n=e.channels;return{remove:(void 0===n?[]:n).join(",")}}function p(){return{}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.getURL=s,e.getRequestTimeout=u,e.isAuthSupported=a,e.prepareParams=c,e.handleResponse=p;var h=(n(5),n(13)),f=r(h),d=n(15),l=r(d)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return f.default.PNRemoveGroupOperation}function i(t,e){var n=e.channelGroup,r=t.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"}function s(t,e){var n=e.channelGroup;return"/v1/channel-registration/sub-key/"+t.config.subscribeKey+"/channel-group/"+l.default.encodeString(n)+"/remove"}function u(){return!0}function a(t){return t.config.getTransactionTimeout()}function c(){return{}}function p(){return{}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.getURL=s,e.isAuthSupported=u,e.getRequestTimeout=a,e.prepareParams=c,e.handleResponse=p;var h=(n(5),n(13)),f=r(h),d=n(15),l=r(d)},function(t,e,n){"use strict";function r(){return h.default.PNChannelGroupsOperation}function o(t){if(!t.config.subscribeKey)return"Missing Subscribe Key"}function i(t){return"/v1/channel-registration/sub-key/"+t.config.subscribeKey+"/channel-group"}function s(t){return t.config.getTransactionTimeout()}function u(){return!0}function a(){return{}}function c(t,e){return{groups:e.payload.groups}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=r,e.validateParams=o,e.getURL=i,e.getRequestTimeout=s,e.isAuthSupported=u,e.prepareParams=a,e.handleResponse=c;var p=(n(5),n(13)),h=function(t){return t&&t.__esModule?t:{default:t}}(p)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return f.default.PNChannelsForGroupOperation}function i(t,e){var n=e.channelGroup,r=t.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"}function s(t,e){var n=e.channelGroup;return"/v1/channel-registration/sub-key/"+t.config.subscribeKey+"/channel-group/"+l.default.encodeString(n)}function u(t){return t.config.getTransactionTimeout()}function a(){return!0}function c(){return{}}function p(t,e){return{channels:e.payload.channels}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.getURL=s,e.getRequestTimeout=u,e.isAuthSupported=a,e.prepareParams=c,e.handleResponse=p;var h=(n(5),n(13)),f=r(h),d=n(15),l=r(d)},function(t,e,n){"use strict";function r(){return h.default.PNPushNotificationEnabledChannelsOperation}function o(t,e){var n=e.device,r=e.pushGateway,o=e.channels,i=t.config;return n?r?o&&0!==o.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"}function i(t,e){var n=e.device;return"/v1/push/sub-key/"+t.config.subscribeKey+"/devices/"+n}function s(t){return t.config.getTransactionTimeout()}function u(){return!0}function a(t,e){var n=e.pushGateway,r=e.channels;return{type:n,add:(void 0===r?[]:r).join(",")}}function c(){return{}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=r,e.validateParams=o,e.getURL=i,e.getRequestTimeout=s,e.isAuthSupported=u,e.prepareParams=a,e.handleResponse=c;var p=(n(5),n(13)),h=function(t){return t&&t.__esModule?t:{default:t}}(p)},function(t,e,n){"use strict";function r(){return h.default.PNPushNotificationEnabledChannelsOperation}function o(t,e){var n=e.device,r=e.pushGateway,o=e.channels,i=t.config;return n?r?o&&0!==o.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"}function i(t,e){var n=e.device;return"/v1/push/sub-key/"+t.config.subscribeKey+"/devices/"+n}function s(t){return t.config.getTransactionTimeout()}function u(){return!0}function a(t,e){var n=e.pushGateway,r=e.channels;return{type:n,remove:(void 0===r?[]:r).join(",")}}function c(){return{}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=r,e.validateParams=o,e.getURL=i,e.getRequestTimeout=s,e.isAuthSupported=u,e.prepareParams=a,e.handleResponse=c;var p=(n(5),n(13)),h=function(t){return t&&t.__esModule?t:{default:t}}(p)},function(t,e,n){"use strict";function r(){return h.default.PNPushNotificationEnabledChannelsOperation}function o(t,e){var n=e.device,r=e.pushGateway,o=t.config;return n?r?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"}function i(t,e){var n=e.device;return"/v1/push/sub-key/"+t.config.subscribeKey+"/devices/"+n}function s(t){return t.config.getTransactionTimeout()}function u(){return!0}function a(t,e){return{type:e.pushGateway}}function c(t,e){return{channels:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=r,e.validateParams=o,e.getURL=i,e.getRequestTimeout=s,e.isAuthSupported=u,e.prepareParams=a,e.handleResponse=c;var p=(n(5),n(13)),h=function(t){return t&&t.__esModule?t:{default:t}}(p)},function(t,e,n){"use strict";function r(){return h.default.PNRemoveAllPushNotificationsOperation}function o(t,e){var n=e.device,r=e.pushGateway,o=t.config;return n?r?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)";
}function i(t,e){var n=e.device;return"/v1/push/sub-key/"+t.config.subscribeKey+"/devices/"+n+"/remove"}function s(t){return t.config.getTransactionTimeout()}function u(){return!0}function a(t,e){return{type:e.pushGateway}}function c(){return{}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=r,e.validateParams=o,e.getURL=i,e.getRequestTimeout=s,e.isAuthSupported=u,e.prepareParams=a,e.handleResponse=c;var p=(n(5),n(13)),h=function(t){return t&&t.__esModule?t:{default:t}}(p)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return f.default.PNUnsubscribeOperation}function i(t){if(!t.config.subscribeKey)return"Missing Subscribe Key"}function s(t,e){var n=t.config,r=e.channels,o=void 0===r?[]:r,i=o.length>0?o.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+l.default.encodeString(i)+"/leave"}function u(t){return t.config.getTransactionTimeout()}function a(){return!0}function c(t,e){var n=e.channelGroups,r=void 0===n?[]:n,o={};return r.length>0&&(o["channel-group"]=r.join(",")),o}function p(){return{}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.getURL=s,e.getRequestTimeout=u,e.isAuthSupported=a,e.prepareParams=c,e.handleResponse=p;var h=(n(5),n(13)),f=r(h),d=n(15),l=r(d)},function(t,e,n){"use strict";function r(){return h.default.PNWhereNowOperation}function o(t){if(!t.config.subscribeKey)return"Missing Subscribe Key"}function i(t,e){var n=t.config,r=e.uuid,o=void 0===r?n.UUID:r;return"/v2/presence/sub-key/"+n.subscribeKey+"/uuid/"+o}function s(t){return t.config.getTransactionTimeout()}function u(){return!0}function a(){return{}}function c(t,e){return e.payload?{channels:e.payload.channels}:{channels:[]}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=r,e.validateParams=o,e.getURL=i,e.getRequestTimeout=s,e.isAuthSupported=u,e.prepareParams=a,e.handleResponse=c;var p=(n(5),n(13)),h=function(t){return t&&t.__esModule?t:{default:t}}(p)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return f.default.PNHeartbeatOperation}function i(t){if(!t.config.subscribeKey)return"Missing Subscribe Key"}function s(t,e){var n=t.config,r=e.channels,o=void 0===r?[]:r,i=o.length>0?o.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+l.default.encodeString(i)+"/heartbeat"}function u(){return!0}function a(t){return t.config.getTransactionTimeout()}function c(t,e){var n=e.channelGroups,r=void 0===n?[]:n,o=e.state,i=void 0===o?{}:o,s=t.config,u={};return r.length>0&&(u["channel-group"]=r.join(",")),u.state=JSON.stringify(i),u.heartbeat=s.getPresenceTimeout(),u}function p(){return{}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.getURL=s,e.isAuthSupported=u,e.getRequestTimeout=a,e.prepareParams=c,e.handleResponse=p;var h=(n(5),n(13)),f=r(h),d=n(15),l=r(d)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return f.default.PNGetStateOperation}function i(t){if(!t.config.subscribeKey)return"Missing Subscribe Key"}function s(t,e){var n=t.config,r=e.uuid,o=void 0===r?n.UUID:r,i=e.channels,s=void 0===i?[]:i,u=s.length>0?s.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+l.default.encodeString(u)+"/uuid/"+o}function u(t){return t.config.getTransactionTimeout()}function a(){return!0}function c(t,e){var n=e.channelGroups,r=void 0===n?[]:n,o={};return r.length>0&&(o["channel-group"]=r.join(",")),o}function p(t,e,n){var r=n.channels,o=void 0===r?[]:r,i=n.channelGroups,s=void 0===i?[]:i,u={};return 1===o.length&&0===s.length?u[o[0]]=e.payload:u=e.payload,{channels:u}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.getURL=s,e.getRequestTimeout=u,e.isAuthSupported=a,e.prepareParams=c,e.handleResponse=p;var h=(n(5),n(13)),f=r(h),d=n(15),l=r(d)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return f.default.PNSetStateOperation}function i(t,e){var n=t.config,r=e.state,o=e.channels,i=void 0===o?[]:o,s=e.channelGroups,u=void 0===s?[]:s;return r?n.subscribeKey?0===i.length&&0===u.length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"}function s(t,e){var n=t.config,r=e.channels,o=void 0===r?[]:r,i=o.length>0?o.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+l.default.encodeString(i)+"/uuid/"+n.UUID+"/data"}function u(t){return t.config.getTransactionTimeout()}function a(){return!0}function c(t,e){var n=e.state,r=e.channelGroups,o=void 0===r?[]:r,i={};return i.state=JSON.stringify(n),o.length>0&&(i["channel-group"]=o.join(",")),i}function p(t,e){return{state:e.payload}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.getURL=s,e.getRequestTimeout=u,e.isAuthSupported=a,e.prepareParams=c,e.handleResponse=p;var h=(n(5),n(13)),f=r(h),d=n(15),l=r(d)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return f.default.PNHereNowOperation}function i(t){if(!t.config.subscribeKey)return"Missing Subscribe Key"}function s(t,e){var n=t.config,r=e.channels,o=void 0===r?[]:r,i=e.channelGroups,s=void 0===i?[]:i,u="/v2/presence/sub-key/"+n.subscribeKey;if(o.length>0||s.length>0){var a=o.length>0?o.join(","):",";u+="/channel/"+l.default.encodeString(a)}return u}function u(t){return t.config.getTransactionTimeout()}function a(){return!0}function c(t,e){var n=e.channelGroups,r=void 0===n?[]:n,o=e.includeUUIDs,i=void 0===o||o,s=e.includeState,u=void 0!==s&&s,a={};return i||(a.disable_uuids=1),u&&(a.state=1),r.length>0&&(a["channel-group"]=r.join(",")),a}function p(t,e,n){var r=n.channels,o=void 0===r?[]:r,i=n.channelGroups,s=void 0===i?[]:i,u=n.includeUUIDs,a=void 0===u||u,c=n.includeState,p=void 0!==c&&c;return o.length>1||s.length>0||0===s.length&&0===o.length?function(){var t={};return t.totalChannels=e.payload.total_channels,t.totalOccupancy=e.payload.total_occupancy,t.channels={},Object.keys(e.payload.channels).forEach(function(n){var r=e.payload.channels[n],o=[];return t.channels[n]={occupants:o,name:n,occupancy:r.occupancy},a&&r.uuids.forEach(function(t){p?o.push({state:t.state,uuid:t.uuid}):o.push({state:null,uuid:t})}),t}),t}():function(){var t={},n=[];return t.totalChannels=1,t.totalOccupancy=e.occupancy,t.channels={},t.channels[o[0]]={occupants:n,name:o[0],occupancy:e.occupancy},a&&e.uuids&&e.uuids.forEach(function(t){p?n.push({state:t.state,uuid:t.uuid}):n.push({state:null,uuid:t})}),t}()}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.getURL=s,e.getRequestTimeout=u,e.isAuthSupported=a,e.prepareParams=c,e.handleResponse=p;var h=(n(5),n(13)),f=r(h),d=n(15),l=r(d)},function(t,e,n){"use strict";function r(){return h.default.PNAccessManagerAudit}function o(t){if(!t.config.subscribeKey)return"Missing Subscribe Key"}function i(t){return"/v2/auth/audit/sub-key/"+t.config.subscribeKey}function s(t){return t.config.getTransactionTimeout()}function u(){return!1}function a(t,e){var n=e.channel,r=e.channelGroup,o=e.authKeys,i=void 0===o?[]:o,s={};return n&&(s.channel=n),r&&(s["channel-group"]=r),i.length>0&&(s.auth=i.join(",")),s}function c(t,e){return e.payload}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=r,e.validateParams=o,e.getURL=i,e.getRequestTimeout=s,e.isAuthSupported=u,e.prepareParams=a,e.handleResponse=c;var p=(n(5),n(13)),h=function(t){return t&&t.__esModule?t:{default:t}}(p)},function(t,e,n){"use strict";function r(){return h.default.PNAccessManagerGrant}function o(t){var e=t.config;return e.subscribeKey?e.publishKey?e.secretKey?void 0:"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"}function i(t){return"/v2/auth/grant/sub-key/"+t.config.subscribeKey}function s(t){return t.config.getTransactionTimeout()}function u(){return!1}function a(t,e){var n=e.channels,r=void 0===n?[]:n,o=e.channelGroups,i=void 0===o?[]:o,s=e.ttl,u=e.read,a=void 0!==u&&u,c=e.write,p=void 0!==c&&c,h=e.manage,f=void 0!==h&&h,d=e.authKeys,l=void 0===d?[]:d,y={};return y.r=a?"1":"0",y.w=p?"1":"0",y.m=f?"1":"0",r.length>0&&(y.channel=r.join(",")),i.length>0&&(y["channel-group"]=i.join(",")),l.length>0&&(y.auth=l.join(",")),(s||0===s)&&(y.ttl=s),y}function c(){return{}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=r,e.validateParams=o,e.getURL=i,e.getRequestTimeout=s,e.isAuthSupported=u,e.prepareParams=a,e.handleResponse=c;var p=(n(5),n(13)),h=function(t){return t&&t.__esModule?t:{default:t}}(p)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.crypto,r=t.config,o=JSON.stringify(e);return r.cipherKey&&(o=n.encrypt(o),o=JSON.stringify(o)),o}function i(){return b.default.PNPublishOperation}function s(t,e){var n=t.config,r=e.message;return e.channel?r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"}function u(t,e){var n=e.sendByPost;return void 0!==n&&n}function a(t,e){var n=t.config,r=e.channel,i=e.message,s=o(t,i);return"/publish/"+n.publishKey+"/"+n.subscribeKey+"/0/"+m.default.encodeString(r)+"/0/"+m.default.encodeString(s)}function c(t,e){var n=t.config,r=e.channel;return"/publish/"+n.publishKey+"/"+n.subscribeKey+"/0/"+m.default.encodeString(r)+"/0"}function p(t){return t.config.getTransactionTimeout()}function h(){return!0}function f(t,e){return o(t,e.message)}function d(t,e){var n=e.meta,r=e.replicate,o=void 0===r||r,i=e.storeInHistory,s=e.ttl,u={};return null!=i&&(u.store=i?"1":"0"),s&&(u.ttl=s),!1===o&&(u.norep="true"),n&&"object"===(void 0===n?"undefined":y(n))&&(u.meta=JSON.stringify(n)),u}function l(t,e){return{timetoken:e[2]}}Object.defineProperty(e,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.getOperation=i,e.validateParams=s,e.usePost=u,e.getURL=a,e.postURL=c,e.getRequestTimeout=p,e.isAuthSupported=h,e.postPayload=f,e.prepareParams=d,e.handleResponse=l;var g=(n(5),n(13)),b=r(g),v=n(15),m=r(v)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.config,r=t.crypto;if(!n.cipherKey)return e;try{return r.decrypt(e)}catch(t){return e}}function i(){return d.default.PNHistoryOperation}function s(t,e){var n=e.channel,r=t.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"}function u(t,e){var n=e.channel;return"/v2/history/sub-key/"+t.config.subscribeKey+"/channel/"+y.default.encodeString(n)}function a(t){return t.config.getTransactionTimeout()}function c(){return!0}function p(t,e){var n=e.start,r=e.end,o=e.reverse,i=e.count,s=void 0===i?100:i,u=e.stringifiedTimeToken,a=void 0!==u&&u,c={include_token:"true"};return c.count=s,n&&(c.start=n),r&&(c.end=r),a&&(c.string_message_token="true"),null!=o&&(c.reverse=o.toString()),c}function h(t,e){var n={messages:[],startTimeToken:e[1],endTimeToken:e[2]};return e[0].forEach(function(e){var r={timetoken:e.timetoken,entry:o(t,e.message)};n.messages.push(r)}),n}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=i,e.validateParams=s,e.getURL=u,e.getRequestTimeout=a,e.isAuthSupported=c,e.prepareParams=p,e.handleResponse=h;var f=(n(5),n(13)),d=r(f),l=n(15),y=r(l)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return d.default.PNDeleteMessagesOperation}function i(t,e){var n=e.channel,r=t.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"}function s(){return!0}function u(t,e){var n=e.channel,r=e.start,o=e.end,i=t.config,s="";return r&&(s="?start="+r),o&&(s+=(""!==s?"&":"?")+"end="+o),"/v3/history/sub-key/"+i.subscribeKey+"/channel/"+y.default.encodeString(n)+s}function a(t){return t.config.getTransactionTimeout()}function c(){return!0}function p(t,e){var n=e.start,r=e.end,o={};return n&&(o.start=n),r&&(o.end=r),{}}function h(t,e){return e.payload}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.useDelete=s,e.getURL=u,e.getRequestTimeout=a,e.isAuthSupported=c,e.prepareParams=p,e.handleResponse=h;var f=(n(5),n(13)),d=r(f),l=n(15),y=r(l)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.config,r=t.crypto;if(!n.cipherKey)return e;try{return r.decrypt(e)}catch(t){return e}}function i(){return d.default.PNFetchMessagesOperation}function s(t,e){var n=e.channels,r=t.config;return n&&0!==n.length?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channels"}function u(t,e){var n=e.channels,r=void 0===n?[]:n,o=t.config,i=r.length>0?r.join(","):",";return"/v3/history/sub-key/"+o.subscribeKey+"/channel/"+y.default.encodeString(i)}function a(t){return t.config.getTransactionTimeout()}function c(){return!0}function p(t,e){var n=e.start,r=e.end,o=e.count,i={};return o&&(i.max=o),n&&(i.start=n),r&&(i.end=r),i}function h(t,e){var n={channels:{}};return Object.keys(e.channels||{}).forEach(function(r){n.channels[r]=[],(e.channels[r]||[]).forEach(function(e){var i={};i.channel=r,i.subscription=null,i.timetoken=e.timetoken,i.message=o(t,e.message),n.channels[r].push(i)})}),n}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=i,e.validateParams=s,e.getURL=u,e.getRequestTimeout=a,e.isAuthSupported=c,e.prepareParams=p,e.handleResponse=h;var f=(n(5),n(13)),d=r(f),l=n(15),y=r(l)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return f.default.PNSubscribeOperation}function i(t){if(!t.config.subscribeKey)return"Missing Subscribe Key"}function s(t,e){var n=t.config,r=e.channels,o=void 0===r?[]:r,i=o.length>0?o.join(","):",";return"/v2/subscribe/"+n.subscribeKey+"/"+l.default.encodeString(i)+"/0"}function u(t){return t.config.getSubscribeTimeout()}function a(){return!0}function c(t,e){var n=t.config,r=e.channelGroups,o=void 0===r?[]:r,i=e.timetoken,s=e.filterExpression,u=e.region,a={heartbeat:n.getPresenceTimeout()};return o.length>0&&(a["channel-group"]=o.join(",")),s&&s.length>0&&(a["filter-expr"]=s),i&&(a.tt=i),u&&(a.tr=u),a}function p(t,e){var n=[];e.m.forEach(function(t){var e={publishTimetoken:t.p.t,region:t.p.r},r={shard:parseInt(t.a,10),subscriptionMatch:t.b,channel:t.c,payload:t.d,flags:t.f,issuingClientId:t.i,subscribeKey:t.k,originationTimetoken:t.o,userMetadata:t.u,publishMetaData:e};n.push(r)});var r={timetoken:e.t.t,region:e.t.r};return{messages:n,metadata:r}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOperation=o,e.validateParams=i,e.getURL=s,e.getRequestTimeout=u,e.isAuthSupported=a,e.prepareParams=c,e.handleResponse=p;var h=(n(5),n(13)),f=r(h),d=n(15),l=r(d)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),u=(r(s),n(10)),a=r(u),c=(n(5),function(){function t(e){var n=this;o(this,t),this._modules={},Object.keys(e).forEach(function(t){n._modules[t]=e[t].bind(n)})}return i(t,[{key:"init",value:function(t){this._config=t,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){if(-1===this._providedFQDN.indexOf("pubsub."))return this._providedFQDN;var t=void 0;return this._currentSubDomain=this._currentSubDomain+1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),t=this._currentSubDomain.toString(),this._providedFQDN.replace("pubsub","ps"+t)}},{key:"hasModule",value:function(t){return t in this._modules}},{key:"shiftStandardOrigin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._standardOrigin=this.nextOrigin(t),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POST",value:function(t,e,n,r){return this._modules.post(t,e,n,r)}},{key:"GET",value:function(t,e,n){return this._modules.get(t,e,n)}},{key:"DELETE",value:function(t,e,n){return this._modules.del(t,e,n)}},{key:"_detectErrorCategory",value:function(t){if("ENOTFOUND"===t.code)return a.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===t.code)return a.default.PNNetworkIssuesCategory;if("ECONNRESET"===t.code)return a.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===t.code)return a.default.PNNetworkIssuesCategory;if(0===t.status||t.hasOwnProperty("status")&&void 0===t.status)return a.default.PNNetworkIssuesCategory;if(t.timeout)return a.default.PNTimeoutCategory;if(t.response){if(t.response.badRequest)return a.default.PNBadRequestCategory;if(t.response.forbidden)return a.default.PNAccessDeniedCategory}return a.default.PNUnknownCategory}}]),t}());e.default=c,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={get:function(t){try{return localStorage.getItem(t)}catch(t){return null}},set:function(t,e){try{return localStorage.setItem(t,e)}catch(t){return null}}},t.exports=e.default},function(t,e,n){"use strict";function r(t){var e=(new Date).getTime(),n=(new Date).toISOString(),r=function(){return console&&console.log?console:window&&window.console&&window.console.log?window.console:console}();r.log("<<<<<"),r.log("["+n+"]","\n",t.url,"\n",t.qs),r.log("-----"),t.on("response",function(n){var o=(new Date).getTime(),i=o-e,s=(new Date).toISOString();r.log(">>>>>>"),r.log("["+s+" / "+i+"]","\n",t.url,"\n",t.qs,"\n",n.text),r.log("-----")})}function o(t,e,n){var o=this;return this._config.logVerbosity&&(t=t.use(r)),this._config.proxy&&this._modules.proxy&&(t=this._modules.proxy.call(this,t)),this._config.keepAlive&&this._modules.keepAlive&&(t=this._modules.keepAlive(t)),t.timeout(e.timeout).end(function(t,r){var i={};if(i.error=null!==t,i.operation=e.operation,r&&r.status&&(i.statusCode=r.status),t)return i.errorData=t,i.category=o._detectErrorCategory(t),n(i,null);var s=JSON.parse(r.text);return s.error&&1===s.error&&s.status&&s.message&&s.service?(i.errorData=s,i.statusCode=s.status,i.error=!0,i.category=o._detectErrorCategory(i),n(i,null)):n(i,s)})}function i(t,e,n){var r=c.default.get(this.getStandardOrigin()+e.url).query(t);return o.call(this,r,e,n)}function s(t,e,n,r){var i=c.default.post(this.getStandardOrigin()+n.url).query(t).send(e);return o.call(this,i,n,r)}function u(t,e,n){var r=c.default.delete(this.getStandardOrigin()+e.url).query(t);return o.call(this,r,e,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.get=i,e.post=s,e.del=u;var a=n(42),c=function(t){return t&&t.__esModule?t:{default:t}}(a);n(5)},function(t,e,n){function r(){}function o(t){if(!y(t))return t;var e=[];for(var n in t)i(e,n,t[n]);return e.join("&")}function i(t,e,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){i(t,e,n)});else if(y(n))for(var r in n)i(t,e+"["+r+"]",n[r]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));else null===n&&t.push(encodeURIComponent(e))}function s(t){for(var e,n,r={},o=t.split("&"),i=0,s=o.length;i<s;++i)e=o[i],n=e.indexOf("="),-1==n?r[decodeURIComponent(e)]="":r[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return r}function u(t){for(var e,n,r,o,i=t.split(/\r?\n/),s={},u=0,a=i.length;u<a;++u)n=i[u],-1!==(e=n.indexOf(":"))&&(r=n.slice(0,e).toLowerCase(),o=m(n.slice(e+1)),s[r]=o);return s}function a(t){return/[\/+]json($|[^-\w])/.test(t)}function c(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function p(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new c(n)}catch(e){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=e,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",e);var r;try{n._isResponseOK(e)||(r=new Error(e.statusText||"Unsuccessful HTTP response"))}catch(t){r=t}r?(r.original=t,r.response=e,r.status=e.status,n.callback(r,e)):n.callback(null,e)})}function h(t,e,n){var r=v("DELETE",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}var f;"undefined"!=typeof window?f=window:"undefined"!=typeof self?f=self:(console.warn("Using browser-only version of superagent in non-browser environment"),f=this);var d=n(43),l=n(44),y=n(45),g=n(46),b=n(48),v=e=t.exports=function(t,n){return"function"==typeof n?new e.Request("GET",t).end(n):1==arguments.length?new e.Request("GET",t):new e.Request(t,n)};e.Request=p,v.getXHR=function(){if(!(!f.XMLHttpRequest||f.location&&"file:"==f.location.protocol&&f.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};var m="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};v.serializeObject=o,v.parseString=s,v.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},v.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},v.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},g(c.prototype),c.prototype._parseBody=function(t){var e=v.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&a(this.type)&&(e=v.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null)},c.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},v.Response=c,d(p.prototype),l(p.prototype),p.prototype.type=function(t){return this.set("Content-Type",v.types[t]||t),this},p.prototype.accept=function(t){return this.set("Accept",v.types[t]||t),this},p.prototype.auth=function(t,e,n){1===arguments.length&&(e=""),"object"==typeof e&&null!==e&&(n=e,e=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});var r=function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(t,e,n,r)},p.prototype.query=function(t){return"string"!=typeof t&&(t=o(t)),t&&this._query.push(t),this},p.prototype.attach=function(t,e,n){if(e){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,n||e.name)}return this},p.prototype._getFormData=function(){return this._formData||(this._formData=new f.FormData),this._formData},p.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var n=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),n(t,e)},p.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},p.prototype.buffer=p.prototype.ca=p.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},p.prototype.pipe=p.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},p.prototype._isHost=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},p.prototype.end=function(t){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||r,this._finalizeQueryString(),this._end()},p.prototype._end=function(){var t=this,e=this.xhr=v.getXHR(),n=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var n=e.readyState;if(n>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==n){var r;try{r=e.status}catch(t){r=0}if(!r){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var r=function(e,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=e,t.emit("progress",n)};if(this.hasListeners("progress"))try{e.onprogress=r.bind(null,"download"),e.upload&&(e.upload.onprogress=r.bind(null,"upload"))}catch(t){}try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var o=this._header["content-type"],i=this._serializer||v.serialize[o?o.split(";")[0]:""];!i&&a(o)&&(i=v.serialize["application/json"]),i&&(n=i(n))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&e.setRequestHeader(s,this.header[s]);return this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0!==n?n:null),this},v.agent=function(){return new b},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(t){b.prototype[t.toLowerCase()]=function(e,n){var r=new v.Request(t,e);return this._setDefaults(r),n&&r.end(n),r}}),b.prototype.del=b.prototype.delete,v.get=function(t,e,n){var r=v("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},v.head=function(t,e,n){var r=v("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},v.options=function(t,e,n){var r=v("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},v.del=h,v.delete=h,v.patch=function(t,e,n){var r=v("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},v.post=function(t,e,n){var r=v("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},v.put=function(t,e,n){var r=v("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}},function(t,e,n){function r(t){if(t)return o(t)}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if((r=n[o])===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){"use strict";function r(t){if(t)return o(t)}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}var i=n(45);t.exports=r,r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(t){return this._parser=t,this},r.prototype.responseType=function(t){return this._responseType=t,this},r.prototype.serialize=function(t){return this._serializer=t,this},r.prototype.timeout=function(t){if(!t||"object"!=typeof t)return this._timeout=t,this._responseTimeout=0,this;for(var e in t)switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;default:console.warn("Unknown timeout option",e)}return this},r.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];r.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(t,e);if(!0===n)return!0;if(!1===n)return!1}catch(t){console.error(t)}if(e&&e.status&&e.status>=500&&501!=e.status)return!0;if(t){if(t.code&&~s.indexOf(t.code))return!0;if(t.timeout&&"ECONNABORTED"==t.code)return!0;if(t.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(t,e){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(t,e){n.end(function(n,r){n?e(n):t(r)})})}return this._fullfilledPromise.then(t,e)},r.prototype.catch=function(t){return this.then(void 0,t)},r.prototype.use=function(t){return t(this),this},r.prototype.ok=function(t){if("function"!=typeof t)throw Error("Callback required");return this._okCallback=t,this},r.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},r.prototype.get=function(t){return this._header[t.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(t,e){if(i(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},r.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},r.prototype.field=function(t,e){if(null===t||void 0===t)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),i(t)){for(var n in t)this.field(n,t[n]);return this}if(Array.isArray(e)){for(var r in e)this.field(t,e[r]);return this}if(null===e||void 0===e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=""+e),this._getFormData().append(t,e),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype._auth=function(t,e,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(t+":"+e));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer "+t)}return this},r.prototype.withCredentials=function(t){return void 0==t&&(t=!0),
this._withCredentials=t,this},r.prototype.redirects=function(t){return this._maxRedirects=t,this},r.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw TypeError("Invalid argument");return this._maxResponseSize=t,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(t){var e=i(t),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(e&&i(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(n||this.type("json"),this)},r.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},r.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var n=this.url.substring(e+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,e)+"?"+n.join("&")}}},r.prototype._appendQueryString=function(){console.trace("Unsupported")},r.prototype._timeoutError=function(t,e,n){if(!this._aborted){var r=new Error(t+e+"ms exceeded");r.timeout=e,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(t,e){"use strict";function n(t){return null!==t&&"object"==typeof t}t.exports=n},function(t,e,n){"use strict";function r(t){if(t)return o(t)}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}var i=n(47);t.exports=r,r.prototype.get=function(t){return this.header[t.toLowerCase()]},r.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=i.type(e);var n=i.params(e);for(var r in n)this[r]=n[r];this.links={};try{t.link&&(this.links=i.parseLinks(t.link))}catch(t){}},r.prototype._setStatusProperties=function(t){var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.forbidden=403==t,this.notFound=404==t}},function(t,e){"use strict";e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){return t.split(/ *; */).reduce(function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})},e.parseLinks=function(t){return t.split(/ *, */).reduce(function(t,e){var n=e.split(/ *; */),r=n[0].slice(1,-1);return t[n[1].split(/ *= */)[1].slice(1,-1)]=r,t},{})},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},function(t,e){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(t){n.prototype[t]=function(){return this._defaults.push({fn:t,arguments:arguments}),this}}),n.prototype._setDefaults=function(t){this._defaults.forEach(function(e){t[e.fn].apply(t,e.arguments)})},t.exports=n}])})},function(t,e,n){(function(e,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   v4.2.4+314e4831
	 */
!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function r(t){return"function"==typeof t}function o(t){z=t}function i(t){V=t}function s(){return function(){return e.nextTick(h)}}function u(){return"undefined"!=typeof G?function(){G(h)}:p()}function a(){var t=0,e=new J(h),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=h,function(){return t.port2.postMessage(0)}}function p(){var t=setTimeout;return function(){return t(h,1)}}function h(){for(var t=0;t<H;t+=2){var e=Q[t],n=Q[t+1];e(n),Q[t]=void 0,Q[t+1]=void 0}H=0}function f(){try{var t=Function("return this")().require("vertx");return G=t.runOnLoop||t.runOnContext,u()}catch(t){return p()}}function d(t,e){var n=this,r=new this.constructor(y);void 0===r[tt]&&M(r);var o=n._state;if(o){var i=arguments[o-1];V(function(){return I(o,r,i,n._result)})}else k(n,r,t,e);return r}function l(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(y);return x(n,t),n}function y(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function v(t){try{return t.then}catch(t){return ot.error=t,ot}}function m(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function _(t,e,n){V(function(t){var r=!1,o=m(n,e,function(n){r||(r=!0,e!==n?x(t,n):j(t,n))},function(e){r||(r=!0,S(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,S(t,o))},t)}function w(t,e){e._state===nt?j(t,e._result):e._state===rt?S(t,e._result):k(e,void 0,function(e){return x(t,e)},function(e){return S(t,e)})}function O(t,e,n){e.constructor===t.constructor&&n===d&&e.constructor.resolve===l?w(t,e):n===ot?(S(t,ot.error),ot.error=null):void 0===n?j(t,e):r(n)?_(t,e,n):j(t,e)}function x(e,n){e===n?S(e,g()):t(n)?O(e,n,v(n)):j(e,n)}function P(t){t._onerror&&t._onerror(t._result),E(t)}function j(t,e){t._state===et&&(t._result=e,t._state=nt,0!==t._subscribers.length&&V(E,t))}function S(t,e){t._state===et&&(t._state=rt,t._result=e,V(P,t))}function k(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+nt]=n,o[i+rt]=r,0===i&&t._state&&V(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?I(n,r,o,i):o(i);t._subscribers.length=0}}function T(t,e){try{return t(e)}catch(t){return ot.error=t,ot}}function I(t,e,n,o){var i=r(n),s=void 0,u=void 0,a=void 0,c=void 0;if(i){if(s=T(n,o),s===ot?(c=!0,u=s.error,s.error=null):a=!0,e===s)return void S(e,b())}else s=o,a=!0;e._state!==et||(i&&a?x(e,s):c?S(e,u):t===nt?j(e,s):t===rt&&S(e,s))}function R(t,e){try{e(function(e){x(t,e)},function(e){S(t,e)})}catch(e){S(t,e)}}function A(){return it++}function M(t){t[tt]=it++,t._state=void 0,t._result=void 0,t._subscribers=[]}function q(){return new Error("Array Methods must be provided an Array")}function C(t){return new st(this,t).promise}function N(t){var e=this;return new e(F(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function D(t){var e=this,n=new e(y);return S(n,t),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(){var t=void 0;if("undefined"!=typeof n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=ut}var K=void 0;K=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var F=K,H=0,G=void 0,z=void 0,V=function(t,e){Q[H]=t,Q[H+1]=e,H+=2,2===H&&(z?z(h):Z())},Y="undefined"!=typeof window?window:void 0,W=Y||{},J=W.MutationObserver||W.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),$="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=new Array(1e3),Z=void 0;Z=X?s():J?a():$?c():void 0===Y?f():p();var tt=Math.random().toString(36).substring(2),et=void 0,nt=1,rt=2,ot={error:null},it=0,st=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(y),this.promise[tt]||M(this.promise),F(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&j(this.promise,this._result))):S(this.promise,q())}return t.prototype._enumerate=function(t){for(var e=0;this._state===et&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===l){var o=v(t);if(o===d&&t._state!==et)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===ut){var i=new n(y);O(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===et&&(this._remaining--,t===rt?S(r,n):this._result[e]=n),0===this._remaining&&j(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;k(t,void 0,function(t){return n._settledAt(nt,e,t)},function(t){return n._settledAt(rt,e,t)})},t}(),ut=function(){function t(e){this[tt]=A(),this._result=this._state=void 0,this._subscribers=[],y!==e&&("function"!=typeof e&&U(),this instanceof t?R(this,e):B())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this,n=e.constructor;return e.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})},t}();return ut.prototype.then=d,ut.all=C,ut.race=N,ut.resolve=l,ut.reject=D,ut._setScheduler=o,ut._setAsap=i,ut._asap=V,ut.polyfill=L,ut.Promise=ut,ut})}).call(e,n(54),function(){return this}())},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(p===setTimeout)return setTimeout(t,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(t,0);try{return p(t,0)}catch(e){try{return p.call(null,t,0)}catch(e){return p.call(this,t,0)}}}function i(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){y&&d&&(y=!1,d.length?l=d.concat(l):g=-1,l.length&&u())}function u(){if(!y){var t=o(s);y=!0;for(var e=l.length;e;){for(d=l,l=[];++g<e;)d&&d[g].run();g=-1,e=l.length}d=null,y=!1,i(t)}}function a(t,e){this.fun=t,this.array=e}function c(){}var p,h,f=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(t){p=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var d,l=[],y=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new a(t,e)),1!==l.length||y||o(u)},a.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){var r;!function(){"use strict";function o(t){var e=t&&t.Promise||self.Promise,n=t&&t.XMLHttpRequest||self.XMLHttpRequest,r=self;return function(){var t=Object.create(r,{fetch:{value:void 0,writable:!0}});return function(t){function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return"string"!=typeof t&&(t=String(t)),t}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return b.iterable&&(e[Symbol.iterator]=function(){return e}),e}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){return t.bodyUsed?e.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new e(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function c(t){var e=new FileReader;return e.readAsArrayBuffer(t),a(e)}function p(t){var e=new FileReader;return e.readAsText(t),a(e)}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(b.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(b.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob?(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return e.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return e.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return e.resolve(this._bodyText)}):this.text=function(){var t=u(this);return t?t:e.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return v.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var n=e.body;if(d.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function l(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}}),e}function y(t){var e=new s,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();e.append(r,o)}),e}function g(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var b={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};s.prototype.append=function(t,e){t=r(t),e=o(e);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(e)},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){var e=this.map[r(t)];return e?e[0]:null},s.prototype.getAll=function(t){return this.map[r(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=[o(e)]},s.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)},s.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),i(t)},s.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},s.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),i(t)},b.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},h.call(d.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];g.redirect=function(t,e){if(m.indexOf(e)===-1)throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=s,t.Request=d,t.Response=g,t.fetch=function(t,r){return new e(function(e,o){function i(){return"responseURL"in u?u.responseURL:/^X-Request-URL:/m.test(u.getAllResponseHeaders())?u.getResponseHeader("X-Request-URL"):void 0}var s;s=d.prototype.isPrototypeOf(t)&&!r?t:new d(t,r);var u=new n;u.onload=function(){var t={status:u.status,statusText:u.statusText,headers:y(u),url:i()},n="response"in u?u.response:u.responseText;e(new g(n,t))},u.onerror=function(){o(new TypeError("Network request failed"))},u.ontimeout=function(){o(new TypeError("Network request failed"))},u.open(s.method,s.url,!0),"include"===s.credentials&&(u.withCredentials=!0),"responseType"in u&&b.blob&&(u.responseType="blob"),s.headers.forEach(function(t,e){u.setRequestHeader(e,t)}),u.send("undefined"==typeof s._bodyInit?null:s._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof t?t:this),{fetch:t.fetch,Headers:t.Headers,Request:t.Request,Response:t.Response}}()}r=function(){return o}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}()},function(t,e,n){(function(e){function r(t){o.call(this),this.events={beforeLogin:"beforeLogin",loginSuccess:"loginSuccess",loginError:"loginError",beforeRefresh:"beforeRefresh",refreshSuccess:"refreshSuccess",refreshError:"refreshError",beforeLogout:"beforeLogout",logoutSuccess:"logoutSuccess",logoutError:"logoutError",rateLimitError:"rateLimitError"},t=t||{},this._server=t.server,this._appKey=t.appKey,this._appSecret=t.appSecret,this._redirectUri=t.redirectUri||"",this._refreshDelayMs=t.refreshDelayMs||100,this._clearCacheOnRefreshError="undefined"==typeof t.clearCacheOnRefreshError||t.clearCacheOnRefreshError,this._userAgent=(t.appName?t.appName+(t.appVersion?"/"+t.appVersion:"")+" ":"")+"RCJSSDK/"+a.version,this._externals=t.externals,this._cache=t.cache,this._client=t.client,this._refreshPromise=null,this._auth=new u({cache:this._cache,cacheId:r._cacheId,refreshHandicapMs:t.refreshHandicapMs})}var o=n(46).EventEmitter,i=n(48),s=n(41),u=n(61),a=n(62),c=n(47);r._urlPrefix="/restapi",r._apiVersion="v1.0",r._tokenEndpoint="/restapi/oauth/token",r._revokeEndpoint="/restapi/oauth/revoke",r._authorizeEndpoint="/restapi/oauth/authorize",r._cacheId="platform",r.prototype=Object.create(o.prototype),r.prototype.delay=function(t){return new this._externals.Promise(function(e,n){setTimeout(function(){e(null)},t)})},r.prototype.auth=function(){return this._auth},r.prototype.client=function(){return this._client},r.prototype.createUrl=function(t,e){t=t||"",e=e||{};var n="",o=t.indexOf("http://")!=-1||t.indexOf("https://")!=-1;return e.addServer&&!o&&(n+=this._server),t.indexOf(r._urlPrefix)!=-1||o||(n+=r._urlPrefix+"/"+r._apiVersion),n+=t,(e.addMethod||e.addToken)&&(n+=t.indexOf("?")>-1?"&":"?"),e.addMethod&&(n+="_method="+e.addMethod),e.addToken&&(n+=(e.addMethod?"&":"")+"access_token="+this._auth.accessToken()),n},r.prototype.loginUrl=function(t){return t=t||{},this.createUrl(r._authorizeEndpoint+"?"+i.stringify({response_type:t.implicit?"token":"code",redirect_uri:t.redirectUri||this._redirectUri,client_id:this._appKey,state:t.state||"",brand_id:t.brandId||"",display:t.display||"",prompt:t.prompt||""}),{addServer:!0})},r.prototype.parseLoginRedirect=function(t){function e(t,e){return t.split(e).reverse()[0]}var n=0===t.indexOf("#")&&e(t,"#")||0===t.indexOf("?")&&e(t,"?")||null;if(!n)throw new Error("Unable to parse response");var r=i.parse(n);if(!r)throw new Error("Unable to parse response");var o=r.error_description||r.error;if(o){var s=new Error(o);throw s.error=r.error,s}return r},r.prototype.loginWindow=function(t){return new this._externals.Promise(function(e,n){if("undefined"==typeof window)throw new Error("This method can be used only in browser");if(!t.url)throw new Error("Missing mandatory URL parameter");t=t||{},t.width=t.width||400,t.height=t.height||600,t.origin=t.origin||window.location.origin,t.property=t.property||a.authResponseProperty,t.target=t.target||"_blank";var r=void 0!==window.screenLeft?window.screenLeft:screen.left,o=void 0!==window.screenTop?window.screenTop:screen.top,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=i/2-t.width/2+r,c=s/2-t.height/2+o,p=window.open(t.url,"_blank","_blank"==t.target?"scrollbars=yes, status=yes, width="+t.width+", height="+t.height+", left="+u+", top="+c:"");if(!p)throw new Error("Could not open login window. Please allow popups for this site");p.focus&&p.focus();var h=window.addEventListener?"addEventListener":"attachEvent",f="addEventListener"==h?"removeEventListener":"detachEvent",d="addEventListener"==h?"message":"onmessage",l=function(r){try{if(r.origin!=t.origin)return;if(!r.data||!r.data[t.property])return;p.close(),window[f](d,l);var o=this.parseLoginRedirect(r.data[t.property]);if(!o.code&&!o.access_token)throw new Error("No authorization code or token");e(o)}catch(t){n(t)}}.bind(this);window[h](d,l,!1)}.bind(this))},r.prototype.loggedIn=function(){return this.ensureLoggedIn().then(function(){return!0}).catch(function(){return!1})},r.prototype.login=function(t){return new this._externals.Promise(function(e){t=t||{},this.emit(this.events.beforeLogin);var n={};return t.access_token?e(t):(t.code?t.code&&(n.grant_type="authorization_code",n.code=t.code,n.redirect_uri=t.redirectUri||this._redirectUri):(n.grant_type="password",n.username=t.username,n.password=t.password,n.extension=t.extension||""),t.endpointId&&(n.endpoint_id=t.endpointId),t.accessTokenTtl&&(n.accessTokenTtl=t.accessTokenTtl),t.refreshTokenTtl&&(n.refreshTokenTtl=t.refreshTokenTtl),void e(this._tokenRequest(r._tokenEndpoint,n)))}.bind(this)).then(function(t){var e=t.json?t:null,n=e&&e.json()||t;return this._auth.setData(n),this.emit(this.events.loginSuccess,e),e}.bind(this)).catch(function(t){throw this._clearCacheOnRefreshError&&this._cache.clean(),this.emit(this.events.loginError,t),t}.bind(this))},r.prototype._refresh=function(){return this.delay(this._refreshDelayMs).then(function(){if(this.emit(this.events.beforeRefresh),!this._auth.refreshToken())throw new Error("Refresh token is missing");if(!this._auth.refreshTokenValid())throw new Error("Refresh token has expired");return this._tokenRequest(r._tokenEndpoint,{grant_type:"refresh_token",refresh_token:this._auth.refreshToken(),access_token_ttl:this._auth.data().expires_in+1,refresh_token_ttl:this._auth.data().refresh_token_expires_in+1})}.bind(this)).then(function(t){var e=t.json();if(!e.access_token)throw this._client.makeError(new Error("Malformed OAuth response"),t);return this._auth.setData(e),this.emit(this.events.refreshSuccess,t),t}.bind(this)).catch(function(t){throw t=this._client.makeError(t),this._clearCacheOnRefreshError&&this._cache.clean(),this.emit(this.events.refreshError,t),t}.bind(this))},r.prototype.refresh=function(){return this._refreshPromise||(this._refreshPromise=this._refresh().then(function(t){return this._refreshPromise=null,t}.bind(this)).catch(function(t){throw this._refreshPromise=null,t}.bind(this))),this._refreshPromise},r.prototype.logout=function(){return new this._externals.Promise(function(t){this.emit(this.events.beforeLogout),t(this._tokenRequest(r._revokeEndpoint,{token:this._auth.accessToken()}))}.bind(this)).then(function(t){return this._cache.clean(),this.emit(this.events.logoutSuccess,t),t}.bind(this)).catch(function(t){throw this.emit(this.events.logoutError,t),t}.bind(this))},r.prototype.inflateRequest=function(t,e){return e=e||{},e.skipAuthCheck?this._externals.Promise.resolve(t):this.ensureLoggedIn().then(function(){return t.headers.set("X-User-Agent",this._userAgent),t.headers.set("Client-Id",this._appKey),t.headers.set("Authorization",this._authHeader()),t}.bind(this))},r.prototype.sendRequest=function(t,e){return this.inflateRequest(t,e).then(function(t){return e=e||{},this._client.sendRequest(t)}.bind(this)).catch(function(n){if(!n.apiResponse||!n.apiResponse.response()||e.retry)throw n;var r=n.apiResponse.response(),o=r.status;if(o!=c._unauthorizedStatus&&o!=c._rateLimitStatus)throw n;e.retry=!0;var i=0;if(o==c._unauthorizedStatus&&this._auth.cancelAccessToken(),o==c._rateLimitStatus){var s=e.handleRateLimit&&"boolean"!=typeof e.handleRateLimit?e.handleRateLimit:60;if(i=1e3*parseFloat(r.headers.get("retry-after")||s),n.retryAfter=i,this.emit(this.events.rateLimitError,n),!e.handleRateLimit)throw n}return this.delay(i).then(function(){return this.sendRequest(t,e)}.bind(this))}.bind(this))},r.prototype.send=function(t){return t=t||{},t.url=this.createUrl(t.url,{addServer:!0}),this.sendRequest(this._client.createRequest(t),t)},r.prototype.get=function(t,e,n){return this.send(s({},{method:"GET",url:t,query:e},n))},r.prototype.post=function(t,e,n,r){return this.send(s({},{method:"POST",url:t,query:n,body:e},r))},r.prototype.put=function(t,e,n,r){return this.send(s({},{method:"PUT",url:t,query:n,body:e},r))},r.prototype.delete=function(t,e,n){return this.send(s({},{method:"DELETE",url:t,query:e},n))},r.prototype.ensureLoggedIn=function(){return this._isAccessTokenValid()?this._externals.Promise.resolve():this.refresh()},r.prototype._tokenRequest=function(t,e){return this.send({url:t,skipAuthCheck:!0,body:e,method:"POST",headers:{Authorization:"Basic "+this._apiKey(),"Content-Type":c._urlencodedContentType}})},r.prototype._isAccessTokenValid=function(){return this._auth.accessTokenValid()},r.prototype._apiKey=function(){var t=this._appKey+":"+this._appSecret;return"function"==typeof btoa?btoa(t):new e(t).toString("base64")},r.prototype._authHeader=function(){var t=this._auth.accessToken();return this._auth.tokenType()+(t?" "+t:"")},t.exports=r}).call(e,n(57).Buffer)},function(t,e,n){(function(t){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function o(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=s.prototype):(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?d(t,e,n,r):"string"==typeof e?h(t,e,n):l(t,e)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e,n,r){return a(e),e<=0?i(t,e):void 0!==n?"string"==typeof r?i(t,e).fill(n,r):i(t,e).fill(n):i(t,e)}function p(t,e){if(a(e),t=i(t,e<0?0:0|y(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|b(e,n);t=i(t,r);var o=t.write(e,n);return o!==r&&(t=t.slice(0,o)),t}function f(t,e){var n=e.length<0?0:0|y(e.length);t=i(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),s.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=s.prototype):t=f(t,e),t}function l(t,e){if(s.isBuffer(e)){var n=0|y(e.length);return t=i(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||X(e.length)?i(t,0):f(t,e);if("Buffer"===e.type&&Z(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function g(t){return+t!=t&&(t=0),s.alloc(+t)}function b(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,o);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,o){function i(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,u=t.length,a=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,u/=2,a/=2,n/=2}var c;if(o){var p=-1;for(c=n;c<u;c++)if(i(t,c)===i(e,p===-1?0:c-p)){if(p===-1&&(p=c),c-p+1===a)return p*s}else p!==-1&&(c-=c-p),p=-1}else for(n+a>u&&(n=u-a),c=n;c>=0;c--){for(var h=!0,f=0;f<a;f++)if(i(t,c+f)!==i(e,f)){h=!1;break}if(h)return c}return-1}function O(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var u=parseInt(e.substr(2*s,2),16);if(isNaN(u))return s;t[n+s]=u}return s}function x(t,e,n,r){return J(z(e,t.length-n),t,n,r)}function P(t,e,n,r){return J(V(e),t,n,r)}function j(t,e,n,r){return P(t,e,n,r)}function S(t,e,n,r){return J(W(e),t,n,r)}function k(t,e,n,r){return J(Y(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i=t[o],s=null,u=i>239?4:i>223?3:i>191?2:1;if(o+u<=n){var a,c,p,h;switch(u){case 1:i<128&&(s=i);break;case 2:a=t[o+1],128===(192&a)&&(h=(31&i)<<6|63&a,h>127&&(s=h));break;case 3:a=t[o+1],c=t[o+2],128===(192&a)&&128===(192&c)&&(h=(15&i)<<12|(63&a)<<6|63&c,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:a=t[o+1],c=t[o+2],p=t[o+3],128===(192&a)&&128===(192&c)&&128===(192&p)&&(h=(15&i)<<18|(63&a)<<12|(63&c)<<6|63&p,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,u=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=u}return I(r)}function I(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=tt));return n}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=G(t[i]);return o}function q(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function C(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,o,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function U(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function B(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||B(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,n,r,23,4),n+4}function K(t,e,n,r,o){return o||B(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,n,r,52,8),n+8}function F(t){if(t=H(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function H(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function V(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Y(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function W(t){return $.toByteArray(F(t))}function J(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function X(t){return t!==t}var $=n(58),Q=n(59),Z=n(60);e.Buffer=s,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=o(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return u(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return c(null,t,e,n)},s.allocUnsafe=function(t){return p(null,t)},s.allocUnsafeSlow=function(t){return p(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var i=t[n];if(!s.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},s.byteLength=b,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):v.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,o){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var i=o-r,u=n-e,a=Math.min(i,u),c=this.slice(r,o),p=t.slice(e,n),h=0;h<a;++h)if(c[h]!==p[h]){i=c[h],u=p[h];break}return i<u?-1:u<i?1:0},s.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},s.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return O(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return P(this,t,e,n);case"latin1":case"binary":return j(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;s.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r;if(s.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=s.prototype;else{var o=e-t;r=new s(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},s.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),Q.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),Q.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),Q.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),Q.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;N(this,t,e,n,o,0)}var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;N(this,t,e,n,o,0)}var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);N(this,t,e,n,o-1,-o)}var i=0,s=1,u=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/s>>0)-u&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);N(this,t,e,n,o-1,-o)}var i=n-1,s=1,u=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/s>>0)-u&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return K(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return K(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var i;if("number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var u=s.isBuffer(t)?t:z(new s(t,r).toString()),a=u.length;for(i=0;i<n-e;++i)this[i+e]=u[i%a]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,function(){return this}())},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-n(t)}function o(t){var e,r,o,i,s,u=t.length;i=n(t),s=new p(3*u/4-i),r=i>0?u-4:u;var a=0;for(e=0;e<r;e+=4)o=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],s[a++]=o>>16&255,s[a++]=o>>8&255,s[a++]=255&o;return 2===i?(o=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,s[a++]=255&o):1===i&&(o=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,s[a++]=o>>8&255,s[a++]=255&o),s}function i(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}function s(t,e,n){for(var r,o=[],s=e;s<n;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(i(r));return o.join("")}function u(t){for(var e,n=t.length,r=n%3,o="",i=[],u=16383,c=0,p=n-r;c<p;c+=u)i.push(s(t,c,c+u>p?p:c+u));return 1===r?(e=t[n-1],o+=a[e>>2],o+=a[e<<4&63],o+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],o+=a[e>>10],o+=a[e>>4&63],o+=a[e<<2&63],o+="="),i.push(o),i.join("")}e.byteLength=r,e.toByteArray=o,e.fromByteArray=u;for(var a=[],c=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=h.length;f<d;++f)a[f]=h[f],c[h.charCodeAt(f)]=f;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,s,u=8*o-r-1,a=(1<<u)-1,c=a>>1,p=-7,h=n?o-1:0,f=n?-1:1,d=t[e+h];for(h+=f,i=d&(1<<-p)-1,d>>=-p,p+=u;p>0;i=256*i+t[e+h],h+=f,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=r;p>0;s=256*s+t[e+h],h+=f,p-=8);if(0===i)i=1-c;else{if(i===a)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,r),i-=c}return(d?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,u,a,c=8*i-o-1,p=(1<<c)-1,h=p>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,l=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=p):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),e+=s+h>=1?f/a:f*Math.pow(2,1-h),e*a>=2&&(s++,a/=2),s+h>=p?(u=0,s=p):s+h>=1?(u=(e*a-1)*Math.pow(2,o),s+=h):(u=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[n+d]=255&u,d+=l,u/=256,o-=8);for(s=s<<o|u,c+=o;c>0;t[n+d]=255&s,d+=l,s/=256,c-=8);t[n+d-l]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){function n(t){this._cache=t.cache,this._cacheId=t.cacheId,this._refreshHandicapMs=t.refreshHandicapMs||6e4}n.prototype.accessToken=function(){return this.data().access_token},n.prototype.refreshToken=function(){return this.data().refresh_token},n.prototype.tokenType=function(){return this.data().token_type},n.prototype.data=function(){return this._cache.getItem(this._cacheId)||{token_type:"",access_token:"",expires_in:0,refresh_token:"",refresh_token_expires_in:0}},n.prototype.setData=function(t){t=t||{};var e=this.data();return Object.keys(t).forEach(function(n){e[n]=t[n]}),e.expire_time=Date.now()+1e3*e.expires_in,e.refresh_token_expire_time=Date.now()+1e3*e.refresh_token_expires_in,this._cache.setItem(this._cacheId,e),this},n.prototype.accessTokenValid=function(){var t=this.data();return t.expire_time-this._refreshHandicapMs>Date.now()},n.prototype.refreshTokenValid=function(){return this.data().refresh_token_expire_time>Date.now()},n.prototype.cancelAccessToken=function(){return this.setData({access_token:"",expires_in:0})},t.exports=n},function(t,e,n){(function(e){var r=e.env.RCSDK_VERSION;e.env.RCSDK_VERSION||(r=n(63).version),t.exports={version:r,authResponseProperty:"RCAuthorizationResponse"}}).call(e,n(54))},function(t,e){t.exports={_args:[[{raw:"ringcentral@git+https://github.com/ringcentral/ringcentral-js.git#master",scope:null,escapedName:"ringcentral",name:"ringcentral",rawSpec:"git+https://github.com/ringcentral/ringcentral-js.git#master",spec:"git+https://github.com/ringcentral/ringcentral-js.git#master",type:"hosted",hosted:{type:"github",ssh:"git@github.com:ringcentral/ringcentral-js.git#master",sshUrl:"git+ssh://git@github.com/ringcentral/ringcentral-js.git#master",httpsUrl:"git+https://github.com/ringcentral/ringcentral-js.git#master",gitUrl:"git://github.com/ringcentral/ringcentral-js.git#master",shortcut:"github:ringcentral/ringcentral-js#master",directUrl:"https://raw.githubusercontent.com/ringcentral/ringcentral-js/master/package.json"}},"/home/travis/build/ringcentral/ringcentral-js-client"]],_from:"git+https://github.com/ringcentral/ringcentral-js.git#master",_id:"ringcentral@3.1.3",_inCache:!0,_location:"/ringcentral",_phantomChildren:{},_requested:{raw:"ringcentral@git+https://github.com/ringcentral/ringcentral-js.git#master",scope:null,escapedName:"ringcentral",name:"ringcentral",rawSpec:"git+https://github.com/ringcentral/ringcentral-js.git#master",spec:"git+https://github.com/ringcentral/ringcentral-js.git#master",type:"hosted",hosted:{type:"github",ssh:"git@github.com:ringcentral/ringcentral-js.git#master",sshUrl:"git+ssh://git@github.com/ringcentral/ringcentral-js.git#master",httpsUrl:"git+https://github.com/ringcentral/ringcentral-js.git#master",gitUrl:"git://github.com/ringcentral/ringcentral-js.git#master",shortcut:"github:ringcentral/ringcentral-js#master",directUrl:"https://raw.githubusercontent.com/ringcentral/ringcentral-js/master/package.json"}},_requiredBy:["#DEV:/"],_resolved:"git+https://github.com/ringcentral/ringcentral-js.git#23c96e0fcc4dee467a8f67508e37225ffecab836",_shasum:"e5aa17695afd718e8733ba39a3c17c1448dde909",_shrinkwrap:null,_spec:"ringcentral@git+https://github.com/ringcentral/ringcentral-js.git#master",_where:"/home/travis/build/ringcentral/ringcentral-js-client",author:{name:"RingCentral, Inc.",email:"devsupport@ringcentral.com"},bugs:{url:"https://github.com/ringcentral/ringcentral-js/issues"},contributors:[{name:"Kirill Konshin"}],dependencies:{"es6-promise":"^4.0.5","fetch-ponyfill":"^3.0.2","is-plain-object":"^2.0.1","object-assign":"^4.1.0",pubnub:"^4.4.2"},description:"[![TravisCI Status](https://travis-ci.org/ringcentral/ringcentral-js.svg?branch=master)](https://travis-ci.org/ringcentral/ringcentral-js) [![Coverage Status](https://coveralls.io/repos/github/ringcentral/ringcentral-js/badge.svg?branch=master)](https://coveralls.io/github/ringcentral/ringcentral-js) [![Chat](https://img.shields.io/badge/chat-on%20glip-orange.svg)](https://glipped.herokuapp.com/)",devDependencies:{chai:"3.5.0",coveralls:"2.13.1","fetch-mock":"5.9.4","http-server":"0.9.0",istanbul:"0.4.5","jsdoc-to-markdown":"2.0.1",jshint:"2.9.4","json-loader":"0.5.4",karma:"1.4.1","karma-chai-plugins":"0.8.0","karma-chrome-launcher":"2.0.0","karma-coverage":"1.1.1","karma-firefox-launcher":"1.0.0","karma-html-reporter":"0.2.6","karma-mocha":"1.3.0","karma-mocha-reporter":"2.2.2","karma-phantomjs-launcher":"1.0.2","karma-sourcemap-loader":"0.3.5","karma-webpack":"2.0.2",mocha:"3.2.0","phantomjs-prebuilt":"2.1.14",sinon:"1.17.7","sinon-chai":"2.8.0",soap:"0.18.0",webpack:"1.14.0","whatwg-fetch":"2.0.2"},engines:{node:">=0.10.36"},gitHead:"23c96e0fcc4dee467a8f67508e37225ffecab836",homepage:"https://github.com/ringcentral/ringcentral-js",jsdoc2md:{separators:!0,"module-index-format":"grouped","param-list-format":"table","property-list-format":"table"},jshintConfig:{curly:!1,expr:!0,indent:4,latedef:!0},license:"MIT",main:"./src/SDK.js",name:"ringcentral",optionalDependencies:{},preferGlobal:!1,private:!1,readme:"[![TravisCI Status](https://travis-ci.org/ringcentral/ringcentral-js.svg?branch=master)](https://travis-ci.org/ringcentral/ringcentral-js)\n[![Coverage Status](https://coveralls.io/repos/github/ringcentral/ringcentral-js/badge.svg?branch=master)](https://coveralls.io/github/ringcentral/ringcentral-js)\n[![Chat](https://img.shields.io/badge/chat-on%20glip-orange.svg)](https://glipped.herokuapp.com/)\n\n# Table of contents\n\n- [Key Benefits](#key-benefits)\n- [Installation](#installation)\n- [Getting Started](#getting-started)\n- [API Calls](#api-calls)\n- [Server-side Subscriptions](#server-side-subscriptions)\n- [Advanced SDK Configuration & Polyfills](#advanced-sdk-configuration--polyfills)\n- [Making telephony calls](#making-telephony-calls)\n- [Call management using JavaScript](#call-management-using-javascript)\n- [SMS](#sms)\n- [MMS](#mms)\n- [Fax](#fax)\n- [Page visibility](#page-visibility)\n- [Tracking network Requests And Responses](#tracking-network-requests-and-responses)\n- [Migration from previous releases](#migration-from-previous-releases)\n\n***\n\n# Key Benefits\n\n- Automatically handles token lifecycle procedures in multi-tab environment\n- Re-issues non-authorized requests\n- Decrypts PUBNUB notification messages\n- Parses multipart API responses\n- Restores subscriptions from cache\n- Automatically re-subscribes in case of subscription renewal errors\n- Compatible with latest WhatWG `fetch()` spec (DOM Requests and Responses)\n\n***\n\n# Installation\n\nYou will need to configure SDK instance with your unique application key & secret this is provided by RingCentral's\ndeveloper relations team.\n\nThis instance will be used later on to perform calls to API.\n\nYou can also supply optional polyfills and dependency injections, please read the [polyfills](#advanced-sdk-configuration--polyfills)\nsection of this readme.\n\nSDK can be used in 3 environments:\n\n1. [NodeJS](#set-things-up-in-nodejs)\n2. [Browserify or Webpack](#set-things-up-for-browserify-or-webpack)\n3. [Browser](#set-things-up-in-browser)\n\n## Set things up in NodeJS\n\n1. Install the NPM package:\n\n    ```sh\n    npm install ringcentral --save\n    ```\n\n2. Require the SDK:\n\n    ```js\n    var SDK = require('ringcentral');\n    var rcsdk = new SDK({ \n        server: SDK.server.sandbox, \n        appKey: 'yourAppKey',\n        appSecret: 'yourAppSecret',\n        redirectUri: '' // optional, but is required for Implicit Grant and Authorization Code OAuth Flows (see below)\n    });\n    ```\n\n## Set things up for Browserify or Webpack\n\nFollow installation steps for NodeJS. Don't forget to add `target: 'web'` to your `webpack.config.js` to tell Webpack to\npick proper `PUNBUB` and `fetch` implementations.\n\n## Set things up in Browser\n\n### Get the code\n\nPick the option that works best for you:\n\n- Use CDN **Attention! Versions listed here may be outdated**:\n    - https://cdn.rawgit.com/ringcentral/ringcentral-js/master/build/ringcentral.js\n    - https://cdnjs.cloudflare.com/ajax/libs/fetch/0.11.1/fetch.js\n    - https://cdnjs.cloudflare.com/ajax/libs/es6-promise/3.2.2/es6-promise.js\n    - https://cdn.pubnub.com/pubnub-3.15.2.js\n\n- Download everything manually:\n    - [ZIP file with source code](https://github.com/ringcentral/ringcentral-js/archive/master.zip)\n    - [Fetch](https://github.com/github/fetch), direct download: [fetch.js](https://raw.githubusercontent.com/github/fetch/master/fetch.js)\n    - [ES6 Promise](https://github.com/jakearchibald/es6-promise), direct download: [es6-promise.js](https://raw.githubusercontent.com/jakearchibald/es6-promise/master/dist/es6-promise.js)\n    - [PUBNUB](https://github.com/pubnub/javascript), direct download: [pubnub.js](https://raw.githubusercontent.com/pubnub/javascript/master/web/pubnub.js)\n\n- Use Bower, all dependencies will be downloaded to `bower_components` directory:\n\n    ```sh\n    bower install ringcentral --save\n    ```\n\n### Add scripts to HTML page (if you are not using any module loaders)\n\nThe SDK is represented by the global RingCentral constructor. Your application must create an instance of this object:\n\nAdd the following to your HTML:\n\n```html\n<script type=\"text/javascript\" src=\"path-to-scripts/es6-promise/promise.js\"></script>\n<script type=\"text/javascript\" src=\"path-to-scripts/fetch/fetch.js\"></script>\n<script type=\"text/javascript\" src=\"path-to-scripts/pubnub/web/pubnub.js\"></script>\n<script type=\"text/javascript\" src=\"path-to-scripts/ringcentral/build/ringcentral.js\"></script><!-- or ringcentral.min.js -->\n<script type=\"text/javascript\">\n\n    var rcsdk = new RingCentral.SDK({\n        server: RingCentral.SDK.server.sandbox, \n        appKey: 'yourAppKey',\n        appSecret: 'yourAppSecret',\n        redirectUri: '' // optional, but is required for Implicit Grant and Authorization Code OAuth Flows (see below)\n    });\n\n</script>\n```\n\n### If you use RequireJS in your project\n\n```js\n// Add this to your RequireJS configuration file\nrequire.config({\n    paths: {\n        'pubnub': 'path-to-scripts/pubnub/web/pubnub',\n        'ringcentral': 'path-to-scripts/ringcentral/build/ringcentral' // or ringcentral.min\n    }\n});\n\n// Then you can use the SDK like any other AMD component\nrequire(['ringcentral'], function(SDK) {\n    var rcsdk = new SDK({\n        server: SDK.server.sandbox, \n        appKey: 'yourAppKey',\n        appSecret: 'yourAppSecret',\n        redirectUri: '' // optional, but is required for Implicit Grant and Authorization Code OAuth Flows (see below)\n    });\n});\n```\n\nMake sure that [polyfills](#advanced-sdk-configuration--polyfills) are added to the page before or together with the SDK.\nMake sure SDK is [configured](#advanced-sdk-configuration--polyfills) to use polyfills.\n\n***\n\n# Getting Started\n\nRead [API documentation](API.md) for more information.\n\n## Get the Platform object\n\n```js\nvar platform = rcsdk.platform();\n```\n\nNow that you have your platform object and the SDK has been configured with the correct server URL and API key, your\napplication can now log in and access the features of this API.\n\n## Login\n\nLogin is accomplished by calling the `platform.login()` method of the Platform object with certain parameters depending\non the type of auth flow. A `Promise` instance is returned, resolved with an AJAX `Response` object.\n\n### 3-legged OAuth 2.0 Flows\n\nSDK provides a set of helper functions to assist with 3-legged OAuth flow.\n\nYou can pick one of two available setups:\n\n1. Top Frame &mdash; user temporarily navigates away from the app to RingCentral login pages\n2. Popup &mdash; RingCentral login pages are opened in a popup\n\nBoth setups support Authorization Code and Implicit Grant flows.\n\n#### Top Frame Setup\n\nThis setup is good when your app uses the entire browser window.\n\nWhen login is required for your application, the app's login page needs to open a URL that can be generated by SDK:\n\n```js\nvar loginUrl = rcsdk.platform().loginUrl({implicit: true}); // implicit parameter is optional, default false\nwindow.location.assign(loginUrl); // or .replace()\n```\n\nYour application need to have a special landing page to handle OAuth Redirect URI. On this page you need to resume\nthe flow:\n\n```js\nvar loginOptions = rcsdk.platform().parseLoginRedirect(window.location.hash || window.location.search);\nrcsdk.platform().login(loginOptions).then(...);\n```\n\nThe above mentioned flow assumes that login page will be rendered in the top frame, e.g. user will temporarily navigate\naway from the app to RingCentral login pages.\n\n#### Popup Setup\n\nThis setup is good when your app is rendered as a widget on a third-party sites.\n\nIf you would like to simply open RingCentral login pages in a popup, you may use the following short-hand in your app's\nlogin page:\n\n```js\nvar platform = rcsdk.platform();\nvar loginUrl = platform.loginUrl({implicit: true}); // implicit parameter is optional, default false\nplatform\n    .loginWindow({url: loginUrl}) // this method also allows to supply more options to control window position\n    .then(function (loginOptions){\n        return platform.login(loginOptions);\n    })\n    .then(...)\n    .catch(...);\n```\n\nIn this case your landing page (the one to which Redirect URI points) need to call the following code:\n\n```js\nRingCentral.SDK.handleLoginRedirect();\n```\n\n#### Difference between Authorization Code and Implicit Grant flows\n\nIf your app uses Implicit Grant you should not provide `appSecret` when creating SDK instance. The resulting login\ninformation will not have `refresh_token`, which means that every time when `access_token` expires, app should navigate\nusers to app login page and re-initiate login flow. Also your app will need to handle situations with `refreshError`\nevents properly, for instance, enter auth flow automatically without user intervention.\n\nFor dynamic apps with subscriptions Authorization Code should work better because it provides an ability to refresh\ntokens automatically without affecting the state of the app, but it requires to expose `appSecret`.\n\n### Password Flow\n\nThis flow to be used only for private backend apps that can protect user credentials. Client-side apps are not allowed\nto use this flow.\n\nLogin is accomplished by calling the `platform.login()` method of the Platform object with username, extension\n(optional), and password as parameters.\n\n```js\nrcsdk.platform()\n    .login({\n        username: '18001234567', // phone number in full format\n        extension: '', // leave blank if direct number is used\n        password: 'yourpassword'\n    })\n    .then(function(response) {\n          // your code here\n    })\n    .catch(function(e) {\n        alert(e.message  || 'Server cannot authorize user');\n    });\n```\n\n## Handling login success\n\nBecause the login process is asynchronous, you need to call the promise's `then` method and pass your success handler as\nthe continuation function.\n\nThis function will be called once login has succeeded, which allows the application to then perform updates to\nthe user interface, and then perform the next actions using the API to load account details for the user's account\nand such.\n\n## Handling login failure\n\nLogin can, of course, fail - a user can enter the incorrect password or mistype their user name.\n\nTo handle cases where login fails, you can provide an error handler function in a call to the Promise's `catch` method.\nTo keep this example simple, a simple JavaScript alert is being used. In a real application, you will want to provide\na good UX in your login form UI.\n\n## Checking login state\n\nTo check in your Application if the user is authenticated, you can call the `loggedIn` method of the platform\nobject:\n\n```js\nrcsdk.platform().loggedIn().then(function(status){ if (status) { ... } else { ... } });\n```\n\nOr you can call `ensureLogedIn` method which works the same way as `loggedIn` but rejects promise on failure:\n\n```js\nrcsdk.platform().ensureLogedIn().then(function(){ ... }).catch(function(){ ... });\n```\n\nThe SDK takes care of the token lifecycle. It will refresh tokens for you automatically. It will also automatically\npause and queue all new API requests while the token is being refreshed in order to prevent data loss or inconsistency\nbetween SDK instances in different tabs. Paused / queued API requests will then be automatically processed once the\ntoken has been refreshed. All apropriate events will be emitted during this process.\n\nIf you just need to check whether the user has a valid token, you can call the `accessTokenValid` method:\n\n```js\nrcsdk.platform().auth().accessTokenValid(); // returns boolean\n```\n\n## Retrieving and setting auth information\n\nYou can retrieve save and set back the auth information:\n\n```js\nvar authData = rcsdk.platform().auth().data();\nrcsdk.platform().auth().setData(authData);\n```\n\nIt can be useful on the server if SDK instances are created and disposed for every HTTP request.\n\n## Logout\n\nLogging the user out is trivial - just call the `logout` method on the platform object:\n\n```js\nrcsdk.platform().logout().then(...).catch(...);\n```\n\n## Events\n\nThe platform provides the following events:\n\n- `loginSuccess`\n- `loginError`\n- `logoutSuccess`\n- `logoutError`\n- `refreshSuccess`\n- `refreshError` &mdash; application may listen to this error and show login page\n- `rateLimitError`\n\nTo listen on platform events, you should call the `on` method of the platform object:\n\n```js\nvar platform = rcsdk.platform();\n\nplatform.on(platform.events.refreshError, function(e){\n    // do something, usually open a login page\n});\n```\n\nThe `on` method accepts an event type as its first argument and a handler function as its second argument.\n\n# API calls\n\nTo perform an authenticated API call, you should use the one of the methods of the platform object:\n\n```js\nrcsdk.platform()\n    .send({\n        method: 'PUT',\n        url: '/account/~/extension/~',\n        query: {...},\n        headers: {...},\n        body: {...}\n    })\n    .then(function(apiResponse){\n\n        alert(apiResponse.json().name);\n\n    })\n    .catch(function(e){\n\n        alert(e.message);\n\n        // please note that ajax property may not be accessible if error occurred before AJAX send\n        if (e.apiResponse && e.apiResponse()) {\n\n            var request = e.apiResponse().request();\n\n            alert('Ajax error ' + e.message + ' for URL' + request.url + ' ' + e.apiResponse().error());\n\n        }\n\n    });\n\n```\n\nIf your `Promise` library supports global error handler it might be useful to log Requests and Responses there.\n\n## HTTP Verb shorthands\n\n```js\nrcsdk.platform().get('/account/~/extension/~', {...query}).then(...);\nrcsdk.platform().post('/account/~/extension/~', {...body}, {...query}).then(...);\nrcsdk.platform().put('/account/~/extension/~', {...body}, {...query}).then(...);\nrcsdk.platform().delete('/account/~/extension/~', {...query}).then(...);\n```\n\n## Available API response methods\n\n- `json()` &mdash; if response type is JSON returns a plain JS object\n- `text()` &mdash; returns text representation\n- `multipart()` &mdash; for `Content-Type: multipart/mixed` responses returns an array of `ApiResponse`\n- `toMultipart()` &mdash; same as `multipart()` but when response is not `Content-Type: multipart/mixed` it will return an array with one item instead of error\n- `ok()` &mdash; `true` for all `2xx` responses, `false` otherwise\n- `error()` &mdash; error string if any\n- `request()` &mdash; low-level `Request` object\n- `response()` &mdash; low-level `Response` object\n\n## Binary downloads\n\nIf you need to download a binary file from API (call recording, fax attachment), you can do it as follows:\n\n### On NodeJS\n\n```js\nvar fs = require('fs');\n\n// read as buffer\nrcsdk.platform().get('/account/~/messages/foo/content').then(function(res) {\n    \n    return res.response().buffer(); // we are accessing Node Fetch's Response\n    \n}).then(function(buffer) {\n    \n    fs.writeFileSync('./octocat.png', buffer);\n    \n});\n\n// read as stream\nrcsdk.platform().get('/account/~/messages/foo/content').then(function(res) {\n    \n    res.response().body.pipe(fs.createWriteStream('./octocat.png')); // we are accessing Node Fetch's Response\n    \n});\n```\n\nSee more here [https://github.com/bitinn/node-fetch#usage](https://github.com/bitinn/node-fetch#usage).\n\n### In browser\n \n```js\nrcsdk.platform().get('/account/~/messages/foo/content').then(function(res) {\n\n    return res.response().blob(); // or arrayBuffer(), we are accessing WhatWG Fetch's Response\n\n}).then(function(blob ){\n    \n    var img = document.createElement('img');\n    img.src = URL.createObjectURL(blob);\n    document.getElementById('container').appendChild(img);\n    \n});\n```\n\nSee more here [https://developer.mozilla.org/en-US/docs/Web/API/Response](https://developer.mozilla.org/en-US/docs/Web/API/Response).\n\n### Generic\n\nIn any case you always can just add token to known URL of resource and download it using whatever library you want or\nuse directly as `<img src=\"...\"/>`:\n\n```js\nvar url = rcsdk.platform().createUrl('/account/~/messages/foo/content', {addServer: true, addToken: true});\n```\n\n## Rate Limiting\n\nPlatform class emits `rateLimitError` if server returns `429` status. You may supply an option `handleRateLimit` and\nSDK will re-execute the failed request. Please keep in mind that your application should somehow delay/throttle other\nsubsequent requests in this case because otherwise all those requests will be postponed too.\n\n# Server-side Subscriptions\n\nSubscriptions are a convenient way to receive updates on server-side events, such as new messages or presence changes.\n\nSubscriptions are created by calling the `getSubscription` method of the RingCentral instance created earlier on.\n\n```js\nvar subscription = rcsdk.createSubscription();\n\nsubscription.on(subscription.events.notification, function(msg) {\n    console.log(msg, msg.body);\n});\n\nsubscription\n    .setEventFilters(['/account/~/extension/~/presence']) // a list of server-side events\n    .register()\n    .then(...);\n```\n\n## Removing Subscriptions from server\n\nOnce a subscription has been created, the SDK takes care of renewing it automatically. To cancel a subscription, you can\ncall the subscription instance's `remove()` method:\n\n```js\nsubscription.remove().then(...).catch(...);\n```\n\n## Updating Subscriptions\n\nYou can add more or replace event filters in the existing subscription at any time, by calling the subscription methods\nand then calling the `register()` method to update it on the server:\n\n```js\nsubscription.setEventFilters(['/account/~/extension/111/presence']).register();\nsubscription.addEventFilters(['/account/~/extension/222/presence']).register();\n```\n\n## Subscription reset\n\nTo revert subscription instance to it's prestine state you can use its `reset()` and `off()` methods, this will close\nPUBNUB channel, remove all timers, subscription data and all bindings:\n\n```js\nsubscription.reset().off();\n```\n\n## Subscriptions lifecycle\n\nThe number of active subscriptions is limited per account (about 20). This means that the application should dispose\nunused subscriptions in the following situations:\n\n- Application should `reset()` subscriptions (on the server they are dead already):\n    - the `Platform` instance emits `logoutSuccess` or `accessViolation` events so the app should `reset()` all subscriptions\n- Application should `remove()` subscriptions or remove no longer needed event filters from them:\n    - the user navigates away from the page or particular view\n    - a subscription becomes unused by the application, based upon the application's business logic\n\nOne of very useful techniques to limit the number of active subscriptions is to store subscription data in cache and\nshare this data across Subscription instances in multiple tabs:\n\n```js\nvar cacheKey = 'some-custom-key';\nvar subscription = rcsdk.createSubscription();\nvar cachedSubscriptionData = rcsdk.cache().getItem(cacheKey);\n\nif (cachedSubscriptionData) {\n    try { // if subscription is already expired an error will be thrown so we need to capture it\n        subscription.setSubscription(cachedSubscriptionData); // use the cache\n    } catch (e) {\n        console.error('Cannot set subscription data', e);\n    }\n} else {\n    subscription.setEventFilters(['/account/~/extension/~/presence']); // explicitly set required events\n}\n\nsubscription.on([subscription.events.subscribeSuccess, subscription.events.renewSuccess], function() {\n    rcsdk.cache().setItem(cacheKey, subscription.subscription());\n});\n\nsubscription.register().catch(...);\n```\n\nWith this technique subscription remove request on window/tab closing is no longer needed.\n\nIn any case if application logic dictates that subscription is not used anymore by any of it's instances, subscription\ncan be removed from the server to make sure application stays within limits.\n\n## Stale Subscriptions\n\nThere is a known bug when user awakes the computer: subscription tries to renew itself but fails because the\nexpiration time has passed (JS was halted while computer was sleeping).\n\nRecommendation is to listen to `subscription.events.renewError` event and when it occurs reset and re-subscribe:\n\n```js\nsubscription.on(subscription.events.renewError, function() {\n    subscription\n        .reset()\n        .setEventFilters('...') // some default set of event filters\n        .register().catch(...);\n});\n```\n\nThis has to be done in all tabs, application must handle potential race conditions.\n\nWhen SDK cannot automatically renew subscription it will fire an event `automaticRenewError` so that application can do\nsome actions in order to have active subscription again:\n\n```js\nsubscription.on(subscription.events.automaticRenewError, function() {\n    subscription.resubscribe().catch(...); // or do manual reset with default event filters as in code snippet before\n});\n```\n\n## Multiple event filters in one Subscription\n\nThe best practice is to have only one subscription object with multiple event filters of different types (messages,\npresence, etc.) instead of having a separate subscription for each individual event filter.\n\nIn the notification event handler application may have a bunch of if's that will execute appropriate action based on\n`event` property of the incoming message:\n\n```js\nsubscription.on(subscription.events.notification, function(msg) {\n    if (msg.event.indexOf('/presence') > -1) { ... }\n    else if (msg.event.indexOf('/message-store') > -1) { ... }\n    else { ... }\n});\n```\n\n## Shorthand\n\nThe above mentioned things are put together into `CachedSubscription` class and its `restore(cacheKey)` method:\n\n```js\nvar subscription = rcsdk.createCachedSubscription('cache-key').restore(['/account/~/extension/~/presence']);\n\n// use it as usual\nsubscription.register().catch(...);\n```\n\n***\n\n# Advanced SDK Configuration & Polyfills\n\nYou can use any of your favourite `fetch()` and `Promise` polyfills. SDK tries to get them from global scope every\ntime new instance is created.\n\nIn rare case when SDK will not detect globals automatically you can set them as follows:\n\n```js\nwindow.Promise = whatever;\nwindow.fetch = whatever;\nwindow.Headers = whatever;\nwindow.Request = whatever;\nwindow.Response = whatever;\n```\n\nAlso you can manually define SDK properties:\n\n```js\nvar rcsdk = new SDK({\n    localStorage: whatever,\n    PUBNUB: whatever,\n    Promise: whatever,\n    fetch: whatever,\n    Headers: whatever,\n    Request: whatever,\n    Response: whatever\n});\n```\n\nBut taking into account the nature of polyfills, it's better to keep them global as described before.\n\nIn the NodeJS it might be useful to replace simple built-in storage with something persistent:\n\n```js\nvar sdk = new SDK({\n    localStorage: whatever\n});\n```\n\nSDK works with `localStorage` as with a simple object.\n\nIf you need to use 2 or more RingCentral accounts simultaneously, you need to create an instance of SDK for each account\nand provide some unique `cachePrefix` to SDK constructor (otherwise instances will share authentication).\n\n```js\nvar rcsdk1 = new SDK({\n    cachePrefix: 'foo-'\n});\n\nvar rcsdk2 = new SDK({\n    cachePrefix: 'bar-'\n});\n```\n\n***\n\n# Making telephony calls\n\nIn RingCentral terminology, making telephony calls is named \"RingOut\".\n\nThis example demonstrates a way to create a flexible RingOut tracking procedure. This is the most complex example with\nmaximum fine-tuning - it could be simplified to suit the business requirements.\n\nThe sequence of RingOut is as follows:\n\n1. Perform a POST with the RingOut data\n2. Poll the RingOut status (GET requests) every second or so\n\nPlease refer to the following example:\n\n```js\nvar platform = rcsdk.platform(),\n    timeout = null, // reference to timeout object\n    ringout = {}; // this is the status object (lowercase)\n\n/**\n * @param {Error} e\n */\nfunction handleError(e) {\n\n    console.error(e);\n    alert(e.message);\n\n}\n\nfunction create(unsavedRingout) {\n\n    platform\n        .post('/account/~/extension/~/ringout', unsavedRingout)\n        .then(function(response) {\n\n            ringout = response.json();\n            console.info('First status:', ringout.status.callStatus);\n            update();\n\n        })\n        .catch(handleError);\n\n}\n\n/**\n * @param {function(number?)} next - callback that will be used to continue polling\n * @param {number} delay - last used delay\n */\nfunction update() {\n\n    clearTimeout(timeout);\n\n    setTimeout(function() {\n\n        if (ringout.status && ringout.status.callStatus !== 'InProgress') return;\n\n        platform\n            .get(ringout.uri)\n            .then(function(response) {\n\n                ringout = response.json();\n                console.info('Current status:', ringout.status.callStatus);\n                update();\n\n            })\n            .catch(handleError);\n\n    }, 500);\n\n}\n\n/**\n * To stop polling, call this at any time\n */\nfunction hangUp() {\n\n    clearTimeout(timeout);\n\n    if (ringout.status && ringout.status.callStatus !== 'InProgress') {\n\n        platform\n            .delete(ringout.uri)\n            .catch(handleError);\n\n    }\n\n    // Clean\n    ringout = {\n        from: {phoneNumber: ''},\n        to: {phoneNumber: ''},\n        callerId: {phoneNumber: ''}, // optional,\n        playPrompt: true // optional\n    };\n\n}\n\n/**\n * Start the ringout procedure (may be called multiple times with different settings)\n */\ncreate({\n    from: {phoneNumber: '16501111111'},\n    to: {phoneNumber: '18882222222'},\n    callerId: {phoneNumber: '18882222222'}, // optional,\n    playPrompt: true // optional\n});\n```\n\n***\n\n# Call management using JavaScript\n\nIf you are integrating with a CRM or ERP system, use of the JavaScript SDK is highly recommended. Following is an\nexample of a call management integration that includes monitoring of incoming calls and performing of RingOuts.\n\nA call management integration usually consists of the following tasks:\n\n1. Track the telephony status\n2. View the list of active calls\n3. View the recent calls\n\n## Track the telephony status\n\nFirst, you need to load the initial Presence status (you can use Underscore or Lodash to simplify things):\n\n```js\nvar accountPresence = {};\n\nrcsdk.platform()\n    .get('/account/~/extension/~/presence?detailedTelephonyState=true').then(function(response) {\n        _.extend(accountPresence, response.json());\n    })\n    .catch(function(e) {\n        alert('Load Presence Error: ' + e.message);\n    });\n```\n\nIn the meantime, you can also set up Subscriptions (you can use Underscore or Lodash to simplify things):\n\n```js\nvar subscription = rcsdk.createSubscription().addEvents(['/account/~/extension/~/presence?detailedTelephonyState=true']);\n\nsubscription.on(subscription.events.notification, function(msg) {\n    _.extend(accountPresence, msg);\n});\n\nsubscription.register().then(function(response) {\n    alert('Success: Subscription is listening');\n}).catch(function(e) {\n    alert('Subscription Error: ' + e.message);\n});\n\nreturn subscription;\n```\n\n## View the list of active calls\n\n```js\nrcsdk.platform()\n    .get('/account/~/extension/~/active-calls', {query: {page: 1, perPage: 10}})\n    .then(function(response) {\n        activeCalls = response.json().records;\n    })\n    .catch(function(e) {\n        alert('Active Calls Error: ' + e.message);\n    });\n```\n\n## View the list of recent calls\n\n```js\nrcsdk.platform()\n    .get('/account/~/extension/~/call-log', {query: {page: 1, perPage: 10}})\n    .then(function(response) {\n        calls = response.json().records;\n    })\n    .catch(function(e) {\n        alert('Recent Calls Error: ' + e.message);\n    });\n```\n\nBy default, the load request returns calls that were made during the last week. To alter the time frame, provide custom\n`query.dateTo` and `query.dateFrom` properties.\n\n# SMS\n\nIn order to send an SMS using the API, simply make a POST request to `/account/~/extension/~/sms`:\n\n```js\nrcsdk.platform()\n    .post('/account/~/extension/~/sms', {\n        from: {phoneNumber:'+12223334444'}, // Your sms-enabled phone number\n        to: [\n            {phoneNumber:'+15556667777'} // Second party's phone number\n        ],\n        text: 'Message content'\n    })\n    .then(function(response) {\n        alert('Success: ' + response.json().id);\n    })\n    .catch(function(e) {\n        alert('Error: ' + e.message);\n    });\n```\n\n# Fax\n\nFax endpoint understands `multipart/form-data` requests. First part must always be JSON-encoded information about the\nfax. Other parts should have `filename` defined in order to be correctly presented in Service Web.\n\n## Browser\n\nModern browsers have `FormData` class which could be used for sending faxes.\n\n```js\nvar body = {\n        to: [{phoneNumber: '123'}], // see all available options on Developer Portal\n        faxResolution: 'High'\n    },\n    formData = new FormData();\n\n// This is the mandatory part, the name and type should always be as follows\nformData.append('json', new File([JSON.stringify(body)], 'request.json', {type: 'application/json'}));\n\n// Find the input[type=file] field on the page\nvar fileField = document.getElementById('input-type-file-field');\n\n// Iterate through all currently selected files\nfor (var i = 0, file; file = fileField.files[i]; ++i) {\n    formData.append('attachment', file); // you can also use file.name instead of 'attachment'\n}\n\n// To send a plain text\nformData.append('attachment', new File(['some plain text'], 'text.txt', {type: 'application/octet-stream'}));\n\n// Send the fax\nrcsdk.platform().post('/account/~/extension/~/fax', formData);\n```\n\n# MMS\n\nAs similar to the fax endpoint, `MMS` understands `multipart/form-data` requests. In order to send an MMS using the API, simply make a POST request to `/account/~/extension/~/sms`:\n\n```js\nvar body = {\n        from: {phoneNumber: '+12223334444'}, //// Your mms-enabled phone number\n        to: [{phoneNumber: '123'}], // see all available options on Developer Portal\n        faxResolution: 'High'\n    },\n    formData = new FormData();\n\n// This is the mandatory part, the name and type should always be as follows\nformData.append('json', new File([JSON.stringify(body)], 'request.json', {type: 'application/json'}));\n\n// Find the input[type=file] field on the page\nvar fileField = document.getElementById('input-type-file-field');\n\n// Iterate through all currently selected files\nfor (var i = 0, file; file = fileField.files[i]; ++i) {\n    formData.append('attachment', file); // you can also use file.name instead of 'attachment'\n}\n\n// Send the mms\nrcsdk.platform().post('/account/~/extension/~/sms', formData);\n```\n\n## MMS-Enabled Phone Number\n\nIn order to identify the MMS-Enabled phone numbers on an extension, simply make a GET request to `/account/~/extension/~/phone-number`\n\n```js\nvar mmsEnabledNumbers = [];\n    platform\n        .get('/account/~/extension/~/phone-number', {'perPage': 'max'})\n        .then(function(res) {\n            var phoneNumbers = res.json().records;\n            for (var i = 0; i < phoneNumbers.length; i++ ) {\n                if (phoneNumbers[i].features.indexOf(\"MmsSender\") != -1 ) {\n                    mmsEnabledNumbers.push(phoneNumbers[i].phoneNumber);\n                }\n            }\n        })\n        .catch(function(e) {\n            alert('MMS Enabled Phone Number Population Error:\\n\\n' + e.message);\n        });\n```\n\n\nFurther reading:\n\n- [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData)\n- [File](https://developer.mozilla.org/en-US/docs/Web/API/File)\n\n## NodeJS\n\nSDK is capable of sending `FormData` objects created by [form-data](https://github.com/form-data/form-data) module.\n\nFirst, you will need to install it:\n\n```sh\nnpm install form-data\n```\n\nThen you can build your fax, but keep in mind that FormData API in NodeJS is slightly different from the browser:\n\n```js\nvar FormData = require('form-data'),\n    body = {\n        to: [{phoneNumber: '123'}], // see all available options on Developer Portal\n        faxResolution: 'High'\n    },\n    formData = new FormData();\n\n// This is the mandatory part, the name and type should always be as follows\nformData.append('json', new Buffer(JSON.stringify(body)), {filename: 'request.json', contentType: 'application/json'});\n\n// To send a plain text\nformData.append('attachment', new Buffer('some plain text'), {filename: 'text.txt', contentType: 'text/plain'});\n\n// To send a file from file system\nformData.append('attachment', require('fs').createReadStream('/foo/bar.jpg'));\n\n// Send the fax\nrcsdk.platform().post('/account/~/extension/~/fax', formData);\n```\n\nFurther reading:\n\n- [form-data](https://github.com/form-data/form-data#usage)\n\n***\n\n# Page visibility\n\nYou can use any of the libraries that work with the [Page Visibility API](http://www.w3.org/TR/page-visibility/),\nsuch as [visibility.js](https://github.com/ai/visibilityjs).\n\nThis allows tracking the visibility of the page/tab/window/frame so that the application can react accordingly.\nFollowing are some actions that the application may wish to take whenever it becomes visible:\n\n- Check authentication\n- Reload/resync time-sensitive information from the server\n- Send heartbeats to the server\n\nAnother usage is to reduce the number of Call Log or Messages reloads when the application is not visible. The SDK does\nnot require that any such optimizations be implemented in the application, but it is considered good practice.\n\n***\n\n# Tracking network Requests And Responses\n\nYou can set up tracking for all network requests (for instance, to log them somewhere) by obtaining a `Client` object\nand registering observers on its various events:\n\n```js\nvar client = rcsdk.platform().client();\nclient.on(client.events.beforeRequest, function(apiResponse) {}); // apiResponse does not have response at this point\nclient.on(client.events.requestSuccess, function(apiResponse) {});\nclient.on(client.events.requestError, function(apiError) {});\n```\n\n***\n\n# Migration from previous releases\n\n**!!! Attention !!!**\n\n**In SDK version 2.0 Helpers were moved to separate repository: [ringcentral-js-helpers](https://github.com/ringcentral/ringcentral-js-helpers).**\n\nA lot of code improvements were implemented in order to make SDK compatible with WhatWG Fetch, DOM Requests &\nDOM Responses: see [full list of migration instructions](CHANGELOG.md).\n",
readmeFilename:"README.md",repository:{type:"git",url:"git://github.com/ringcentral/ringcentral-js.git"},scripts:{build:"npm run clean && webpack --display-modules --progress --colors --bail",clean:"rm -rf build/*",coveralls:"cat ./build/coverage/lcov.info | coveralls",docs:"jsdoc2md 'src/**/*!(test).js' > API.md",hint:"jshint src/**/*.js",istanbul:"istanbul cover _mocha -- --opts mocha.opts",karma:"karma start karma.conf.js","karma-watch":"npm run karma -- --no-single-run --auto-watch","karma-webpack":"karma start karma.conf.webpack.js","karma-webpack-watch":"npm run karma-webpack -- --no-single-run --auto-watch",mocha:"mocha --opts mocha.opts","mocha-api":"mocha ./test-api/**/*-spec.js","mocha-watch":"npm run mocha -- --watch",start:"http-server -p 3030",test:"npm run hint && npm run build && npm run istanbul && npm run karma && npm run karma-webpack",tsd:"tsd reinstall -so",watch:"npm run build -- --watch"},version:"3.1.3"}},function(t,e,n){function r(t,e,n){return e+":"+(n||"00")}function o(t){return t=t||0,"string"==typeof t?Date.parse(t.replace(u,r)):t}function i(t){s.call(this),t=t||{},this.events={notification:"notification",removeSuccess:"removeSuccess",removeError:"removeError",renewSuccess:"renewSuccess",renewError:"renewError",subscribeSuccess:"subscribeSuccess",subscribeError:"subscribeError",automaticRenewSuccess:"automaticRenewSuccess",automaticRenewError:"automaticRenewError"},this._externals=t.externals,this._platform=t.platform,this._pollInterval=t.pollInterval||1e4,this._renewHandicapMs=t.renewHandicapMs||12e4,this._pubnub=null,this._pubnubLastChannel=null,this._pubnubLastSubscribeKey=null,this._timeout=null,this._subscription=null}var s=n(46).EventEmitter,u=/(\+[\d]{2}):?([\d]{2})?$/;i.prototype=Object.create(s.prototype),i.prototype.subscribed=function(){var t=this.subscription();return!!(t.id&&t.deliveryMode&&t.deliveryMode.subscriberKey&&t.deliveryMode.address)},i.prototype.alive=function(){return this.subscribed()&&Date.now()<this.expirationTime()},i.prototype.expired=function(){return!this.subscribed()||(!this.subscribed()||Date.now()>o(this.subscription().expirationTime))},i.prototype.expirationTime=function(){return o(this.subscription().expirationTime)-this._renewHandicapMs},i.prototype.setSubscription=function(t){return t=t||{},this._clearTimeout(),this._setSubscription(t),this._subscribeAtPubnub(),this._setTimeout(),this},i.prototype.subscription=function(){return this._subscription||{}},i.prototype.register=function(){return this.alive()?this.renew():this.subscribe()},i.prototype.eventFilters=function(){return this.subscription().eventFilters||[]},i.prototype.addEventFilters=function(t){return this.setEventFilters(this.eventFilters().concat(t)),this},i.prototype.setEventFilters=function(t){var e=this.subscription();return e.eventFilters=t,this._setSubscription(e),this},i.prototype.subscribe=function(){return new this._externals.Promise(function(t){if(this._clearTimeout(),!this.eventFilters().length)throw new Error("Events are undefined");t(this._platform.post("/subscription",{eventFilters:this._getFullEventFilters(),deliveryMode:{transportType:"PubNub"}}))}.bind(this)).then(function(t){var e=t.json();return this.setSubscription(e).emit(this.events.subscribeSuccess,t),t}.bind(this)).catch(function(t){throw t=this._platform.client().makeError(t),this.reset().emit(this.events.subscribeError,t),t}.bind(this))},i.prototype.renew=function(){return new this._externals.Promise(function(t){if(this._clearTimeout(),!this.subscribed())throw new Error("No subscription");if(!this.eventFilters().length)throw new Error("Events are undefined");t(this._platform.put("/subscription/"+this.subscription().id,{eventFilters:this._getFullEventFilters()}))}.bind(this)).then(function(t){var e=t.json();return this.setSubscription(e).emit(this.events.renewSuccess,t),t}.bind(this)).catch(function(t){throw t=this._platform.client().makeError(t),this.reset().emit(this.events.renewError,t),t}.bind(this))},i.prototype.remove=function(){return new this._externals.Promise(function(t){if(!this.subscribed())throw new Error("No subscription");t(this._platform.delete("/subscription/"+this.subscription().id))}.bind(this)).then(function(t){return this.reset().emit(this.events.removeSuccess,t),t}.bind(this)).catch(function(t){throw t=this._platform.client().makeError(t),this.emit(this.events.removeError,t),t}.bind(this))},i.prototype.resubscribe=function(){var t=this.eventFilters();return this.reset().setEventFilters(t).subscribe()},i.prototype.reset=function(){return this._clearTimeout(),this._unsubscribeAtPubnub(),this._setSubscription(null),this},i.prototype._setSubscription=function(t){this._subscription=t},i.prototype._getFullEventFilters=function(){return this.eventFilters().map(function(t){return this._platform.createUrl(t)}.bind(this))},i.prototype._setTimeout=function(){if(this._clearTimeout(),!this.alive())throw new Error("Subscription is not alive");return this._timeout=setInterval(function(){this.alive()||(this._clearTimeout(),new this._externals.Promise(function(t){t(this.expired()?this.subscribe():this.renew())}.bind(this)).then(function(t){this.emit(this.events.automaticRenewSuccess,t)}.bind(this)).catch(function(t){this.emit(this.events.automaticRenewError,t)}.bind(this)))}.bind(this),this._pollInterval),this},i.prototype._clearTimeout=function(){return clearInterval(this._timeout),this},i.prototype._decrypt=function(t){if(!this.subscribed())throw new Error("No subscription");return this.subscription().deliveryMode.encryptionKey&&(t=this._pubnub.decrypt(t,this.subscription().deliveryMode.encryptionKey,{encryptKey:!1,keyEncoding:"base64",keyLength:128,mode:"ecb"})),t},i.prototype._notify=function(t){return this.emit(this.events.notification,this._decrypt(t)),this},i.prototype._subscribeAtPubnub=function(){if(!this.alive())throw new Error("Subscription is not alive");var t=this.subscription().deliveryMode;if(this._pubnub){if(this._pubnubLastChannel===t.address)return this;this._pubnubLastSubscribeKey&&this._pubnubLastSubscribeKey!==t.subscriberKey?this._unsubscribeAtPubnub():this._pubnubLastChannel&&this._pubnub.unsubscribeAll()}if(!this._pubnub){this._pubnubLastSubscribeKey=t.subscriberKey;var e=this._externals.PubNub;this._pubnub=new e({ssl:!0,restore:!0,subscribeKey:t.subscriberKey}),this._pubnub.addListener({status:function(t){},message:function(t){this._notify(t.message)}.bind(this)})}return this._pubnubLastChannel=t.address,this._pubnub.subscribe({channels:[t.address]}),this},i.prototype._unsubscribeAtPubnub=function(){return this.subscribed()&&this._pubnub?(this._pubnub.removeAllListeners(),this._pubnub.destroy(),this._pubnubLastSubscribeKey=null,this._pubnubLastChannel=null,this._pubnub=null,this):this},t.exports=i},function(t,e,n){function r(t){if(t=t||{},!t.cacheKey)throw new Error("Cached Subscription requires cacheKey parameter to be defined");this._cacheKey=t.cacheKey,o.call(this,t),this._cache=t.cache,this._subscription=void 0}var o=n(64);r.prototype=Object.create(o.prototype),r.prototype.subscription=function(){return this._cache.getItem(this._cacheKey)||{}},r.prototype._setSubscription=function(t){return this._cache.setItem(this._cacheKey,t)},r.prototype.restore=function(t){return this.eventFilters().length||this.setEventFilters(t),this},t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(67),o=n(122),i=n(125),s=n(133),u=n(140),a=n(142),c=function(){function t(t){this.service=t}return t.prototype.account=function(t){return new r.default(null,t,this.service.platform())},t.prototype.clientInfo=function(t){return new o.default(null,t,this.service.platform())},t.prototype.dictionary=function(t){return new i.default(null,t,this.service.platform())},t.prototype.numberParser=function(t){return new u.default(null,t,this.service.platform())},t.prototype.subscription=function(t){return new a.default(null,t,this.service.platform())},t.prototype.glip=function(t){return new s.default(null,t,this.service.platform())},t}();e.Client=c,e.default=c;var p="https://platform.ringcentral.com";e.SERVER_PRODUCTION=p;var h="https://platform.devtest.ringcentral.com";e.SERVER_SANDBOX=h},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(69),s=n(70),u=n(71),a=n(72),c=n(105),p=n(106),h=n(109),f=n(87),d=n(95),l=n(97),y=n(96),g=n(110),b=n(111),v=n(112),m=n(90),_=n(73),w=n(104),O=n(113),x=n(115),P=n(118),j=n(121),S=function(t){function e(e,n,r){return t.call(this,"account",n||"~",e,r)||this}return r(e,t),e.prototype.extension=function(t){return new i.default(this,t)},e.prototype.callLog=function(t){return new s.default(this,t)},e.prototype.callLogSync=function(t){return new u.default(this,t)},e.prototype.activeCalls=function(t){return new a.default(this,t)},e.prototype.recording=function(t){return new c.default(this,t)},e.prototype.directory=function(t){return new p.default(this,t)},e.prototype.bot=function(t){return new h.default(this,t)},e.prototype.presence=function(t){return new f.default(this,t)},e.prototype.businessHours=function(t){return new d.default(this,t)},e.prototype.greeting=function(t){return new l.default(this,t)},e.prototype.answeringRule=function(t){return new y.default(this,t)},e.prototype.ivrMenus=function(t){return new g.default(this,t)},e.prototype.ivrPrompts=function(t){return new b.default(this,t)},e.prototype.businessAddress=function(t){return new v.default(this,t)},e.prototype.serviceInfo=function(t){return new m.default(this,t)},e.prototype.phoneNumber=function(t){return new _.default(this,t)},e.prototype.device=function(t){return new w.default(this,t)},e.prototype.licenses=function(t){return new O.default(this,t)},e.prototype.department=function(t){return new x.default(this,t)},e.prototype.pagingOnlyGroups=function(t){return new P.default(this,t)},e.prototype.parkLocations=function(t){return new j.default(this,t)},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=S},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,r){this._service=r,this.name=t,this.value=e||null,this.previous=n}return t.prototype.toString=function(t){void 0===t&&(t=!0);var e="/"+this.name;return t&&this.value&&(e+="/"+this.value),e},t.prototype.getEndpoint=function(t){void 0===t&&(t=!0);var e="";return this.previous&&(e=this.previous.getEndpoint()),e+this.toString(t)},t.prototype.getService=function(){for(var t=this;t;){if(t._service)return t._service;t.previous&&(t=t.previous)}},t.prototype._send=function(t){var e=t.method,n=t.ignoreId,r=t.body,o=t.query;return this.getService().send({body:r,method:e,query:o,url:this.getEndpoint(n)})},t}();e.default=n},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(70),s=n(71),u=n(72),a=n(73),c=n(74),p=n(75),h=n(76),f=n(79),d=n(81),l=n(82),y=n(83),g=n(85),b=n(86),v=n(87),m=n(88),_=n(91),w=n(93),O=n(94),x=n(95),P=n(96),j=n(97),S=n(98),k=n(99),E=n(100),T=n(101),I=n(103),R=n(104),A=function(t){function e(e,n,r){return t.call(this,"extension",n||"~",e,r)||this}return r(e,t),e.prototype.callLog=function(t){return new i.default(this,t)},e.prototype.callLogSync=function(t){return new s.default(this,t)},e.prototype.activeCalls=function(t){return new u.default(this,t)},e.prototype.phoneNumber=function(t){return new a.default(this,t)},e.prototype.sms=function(t){return new c.default(this,t)},e.prototype.companyPager=function(t){return new p.default(this,t)},e.prototype.fax=function(t){return new h.default(this,t)},e.prototype.messageStore=function(t){return new f.default(this,t)},e.prototype.messageSync=function(t){return new d.default(this,t)},e.prototype.ringOut=function(t){return new l.default(this,t)},e.prototype.addressBook=function(t){return new y.default(this,t)},e.prototype.addressBookSync=function(t){return new g.default(this,t)},e.prototype.favorite=function(t){return new b.default(this,t)},e.prototype.presence=function(t){return new v.default(this,t)},e.prototype.meeting=function(t){return new m.default(this,t)},e.prototype.authzProfile=function(t){return new _.default(this,t)},e.prototype.forwardingNumber=function(t){return new w.default(this,t)},e.prototype.blockedNumber=function(t){return new O.default(this,t)},e.prototype.businessHours=function(t){return new x.default(this,t)},e.prototype.answeringRule=function(t){return new P.default(this,t)},e.prototype.greeting=function(t){return new j.default(this,t)},e.prototype.callerId=function(t){return new S.default(this,t)},e.prototype.grant=function(t){return new k.default(this,t)},e.prototype.notificationSettings=function(t){return new E.default(this,t)},e.prototype.profileImage=function(t){return new T.default(this,t)},e.prototype.conferencing=function(t){return new I.default(this,t)},e.prototype.device=function(t){return new R.default(this,t)},e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e}(o.default);e.default=A},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"call-log",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.delete=function(t){return this._send({body:void 0,ignoreId:!0,method:"delete",query:t})},e.prototype.deleteRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"delete",query:t})},e.prototype.get=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.getRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"call-log-sync",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"active-calls",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"phone-number",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"sms",n,e,r)||this}return r(e,t),e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"company-pager",n,e,r)||this}return r(e,t),e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e}(o.default);e.default=i},function(t,e,n){(function(t){"use strict";function r(){return"undefined"!=typeof t&&!t.browser}function o(){return"function"==typeof Blob}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(77),u=n(78),a=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return i(e,t),e.prototype.post=function(t,e){var n=JSON.stringify(t),i=new s,u="application/json";if(r()){i.append("json",n,{contentType:u,filename:"request.json"});for(var a=0,c=e;a<c.length;a++){var p=c[a];"string"==typeof p?i.append("attachment",p,{contentType:"text/plain"}):i.append("attachment",p)}}else{if(!o())return Promise.reject("Your're not in node and your environment does not support Blob or File API.");i.append("json",new Blob([n],{type:u}));for(var h=0,f=e;h<f.length;h++){var p=f[h];"string"==typeof p?i.append("attachment",new Blob([p],{type:"text/plain"})):i.append("attachment",p)}}return this.getService().post(this.getEndpoint(!1),i).then(function(t){return t.json()})},e}(u.default);e.default=a}).call(e,n(54))},function(t,e){t.exports="object"==typeof self?self.FormData:window.FormData},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"fax",n,e,r)||this}return r(e,t),e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(80),s=function(t){function e(e,n,r){return t.call(this,"message-store",n,e,r)||this}return r(e,t),e.prototype.content=function(t){return new i.default(this,t)},e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.delete=function(t){return this._send({body:void 0,ignoreId:!0,method:"delete",query:t})},e.prototype.deleteRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"delete",query:t})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e}(o.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"content",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"message-sync",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"ring-out",n,e,r)||this}return r(e,t),e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(84),s=function(t){function e(e,n,r){return t.call(this,"address-book",n,e,r)||this}return r(e,t),e.prototype.contact=function(t){return new i.default(this,t)},e}(o.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"contact",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"address-book-sync",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"favorite",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"presence",n,e,r)||this}return r(e,t),e.prototype.list=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.listRaw=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(89),s=n(90),u=function(t){function e(e,n,r){return t.call(this,"meeting",n,e,r)||this;
}return r(e,t),e.prototype.end=function(t){return new i.default(this,t)},e.prototype.serviceInfo=function(t){return new s.default(this,t)},e.prototype.list=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.listRaw=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e}(o.default);e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"end",n,e,r)||this}return r(e,t),e.prototype.post=function(){return this._send({body:void 0,ignoreId:!0,method:"post",query:void 0})},e.prototype.postRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"post",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"service-info",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(92),s=function(t){function e(e,n,r){return t.call(this,"authz-profile",n,e,r)||this}return r(e,t),e.prototype.check=function(t){return new i.default(this,t)},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"check",n,e,r)||this}return r(e,t),e.prototype.get=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.getRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"forwarding-number",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"blocked-number",n,e,r)||this}return r(e,t),e.prototype.list=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.listRaw=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"business-hours",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"answering-rule",n,e,r)||this}return r(e,t),e.prototype.get=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t})},e.prototype.getRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.list=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.listRaw=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"greeting",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"caller-id",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"grant",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"notification-settings",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(77),i=n(102),s=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return r(e,t),e.prototype.put=function(t,e){void 0===e&&(e="image/png");var n=new o;return n.append("image",t,{contentType:e,filename:"profile."+e.split("/").pop()}),this.getService().put(this.getEndpoint(),n)},e.prototype.post=function(t,e){void 0===e&&(e="image/png");var n=new o;return n.append("image",t,{contentType:e,filename:"profile."+e.split("/").pop()}),this.getService().put(this.getEndpoint(),n)},e}(i.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"profile-image",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"conferencing",n,e,r)||this}return r(e,t),e.prototype.get=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.getRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"device",n,e,r)||this}return r(e,t),e.prototype.list=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.listRaw=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(80),s=function(t){function e(e,n,r){return t.call(this,"recording",n,e,r)||this}return r(e,t),e.prototype.content=function(t){return new i.default(this,t)},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(107),s=n(108),u=function(t){function e(e,n,r){return t.call(this,"directory",n,e,r)||this}return r(e,t),e.prototype.contacts=function(t){return new i.default(this,t)},e.prototype.federation=function(t){return new s.default(this,t)},e}(o.default);e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"contacts",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"federation",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"bot",n,e,r)||this}return r(e,t),e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"ivr-menus",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(80),s=function(t){function e(e,n,r){return t.call(this,"ivr-prompts",n,e,r)||this}return r(e,t),e.prototype.content=function(t){return new i.default(this,t)},e.prototype.list=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.listRaw=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e}(o.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"business-address",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(114),s=function(t){function e(e,n,r){return t.call(this,"licenses",n,e,r)||this}return r(e,t),e.prototype.bulkPurchase=function(t){return new i.default(this,t)},e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e}(o.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"bulk-purchase",n,e,r)||this}return r(e,t),e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(116),s=n(117),u=function(t){function e(e,n,r){return t.call(this,"department",n,e,r)||this}return r(e,t),e.prototype.members=function(t){return new i.default(this,t)},e.prototype.bulkAssign=function(t){return new s.default(this,t)},e}(o.default);e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"members",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"bulk-assign",n,e,r)||this}return r(e,t),e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(119),s=n(120),u=n(117),a=function(t){function e(e,n,r){return t.call(this,"paging-only-groups",n,e,r)||this}return r(e,t),e.prototype.users=function(t){return new i.default(this,t)},e.prototype.devices=function(t){return new s.default(this,t)},e.prototype.bulkAssign=function(t){return new u.default(this,t)},e}(o.default);e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"Users",n,e,r)||this}return r(e,t),e.prototype.get=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.getRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.put=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0}).then(function(t){return t.json()})},e.prototype.putRaw=function(t){return this._send({body:t,ignoreId:!0,method:"put",query:void 0})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){
t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"devices",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(119),s=n(117),u=function(t){function e(e,n,r){return t.call(this,"park-locations",n,e,r)||this}return r(e,t),e.prototype.users=function(t){return new i.default(this,t)},e.prototype.bulkAssign=function(t){return new s.default(this,t)},e}(o.default);e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(123),s=n(124),u=function(t){function e(e,n,r){return t.call(this,"client-info",n,e,r)||this}return r(e,t),e.prototype.sipProvision=function(t){return new i.default(this,t)},e.prototype.customData=function(t){return new s.default(this,t)},e}(o.default);e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"sip-provision",n,e,r)||this}return r(e,t),e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(80),s=function(t){function e(e,n,r){return t.call(this,"custom-data",n,e,r)||this}return r(e,t),e.prototype.content=function(t){return new i.default(this,t)},e}(o.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(126),s=n(97),u=n(127),a=n(128),c=n(129),p=n(130),h=n(131),f=n(104),d=n(132),l=function(t){function e(e,n,r){return t.call(this,"dictionary",n,e,r)||this}return r(e,t),e.prototype.faxCoverPage=function(t){return new i.default(this,t)},e.prototype.greeting=function(t){return new s.default(this,t)},e.prototype.language=function(t){return new u.default(this,t)},e.prototype.country=function(t){return new a.default(this,t)},e.prototype.location=function(t){return new c.default(this,t)},e.prototype.state=function(t){return new p.default(this,t)},e.prototype.timezone=function(t){return new h.default(this,t)},e.prototype.device=function(t){return new f.default(this,t)},e.prototype.licenseTypes=function(t){return new d.default(this,t)},e}(o.default);e.default=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"fax-cover-page",n,e,r)||this}return r(e,t),e.prototype.get=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t})},e.prototype.getRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"language",n,e,r)||this}return r(e,t),e.prototype.list=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.listRaw=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"country",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"location",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"state",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"timezone",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.get=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.getRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"license-types",n,e,r)||this}return r(e,t),e.prototype.list=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.listRaw=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(134),s=n(135),u=n(137),a=n(138),c=n(139),p=function(t){function e(e,n,r){return t.call(this,"glip",n,e,r)||this}return r(e,t),e.prototype.companies=function(t){return new i.default(this,t)},e.prototype.groups=function(t){return new s.default(this,t)},e.prototype.persons=function(t){return new u.default(this,t)},e.prototype.files=function(t){return new a.default(this,t)},e.prototype.profile=function(t){return new c.default(this,t)},e}(o.default);e.default=p},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"companies",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(117),s=n(136),u=function(t){function e(e,n,r){return t.call(this,"groups",n,e,r)||this}return r(e,t),e.prototype.bulkAssign=function(t){return new i.default(this,t)},e.prototype.posts=function(t){return new s.default(this,t)},e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"posts",n,e,r)||this}return r(e,t),e.prototype.list=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.listRaw=function(t){return this._send({body:void 0,ignoreId:!1,method:"get",query:t})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"persons",n,e,r)||this}return r(e,t),e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"files",n,e,r)||this}return r(e,t),e.prototype.post=function(t){return this._send({body:void 0,ignoreId:!0,method:"post",query:t}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"post",query:t})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"profile",n,e,r)||this}return r(e,t),e.prototype.get=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t}).then(function(t){return t.json()})},e.prototype.getRaw=function(t){return this._send({body:void 0,ignoreId:!0,method:"get",query:t})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(141),s=function(t){function e(e,n,r){return t.call(this,"number-parser",n,e,r)||this}return r(e,t),e.prototype.parse=function(t){return new i.default(this,t)},e}(o.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"parse",n,e,r)||this}return r(e,t),e.prototype.post=function(t,e){return this._send({body:t,ignoreId:!0,method:"post",query:e}).then(function(t){return t.json()})},e.prototype.postRaw=function(t,e){return this._send({body:t,ignoreId:!0,method:"post",query:e})},e}(o.default);e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=n(143),s=function(t){function e(e,n,r){return t.call(this,"subscription",n,e,r)||this}return r(e,t),e.prototype.renew=function(t){return new i.default(this,t)},e.prototype.list=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.listRaw=function(){return this._send({body:void 0,ignoreId:!1,method:"get",query:void 0})},e.prototype.post=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(t){return this._send({body:t,ignoreId:!0,method:"post",query:void 0})},e.prototype.get=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0}).then(function(t){return t.json()})},e.prototype.getRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"get",query:void 0})},e.prototype.put=function(t,e){return this._send({body:t,ignoreId:!0,method:"put",query:e}).then(function(t){return t.json()})},e.prototype.putRaw=function(t,e){return this._send({body:t,ignoreId:!0,method:"put",query:e})},e.prototype.delete=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e.prototype.deleteRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"delete",query:void 0})},e}(o.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(68),i=function(t){function e(e,n,r){return t.call(this,"renew",n,e,r)||this}return r(e,t),e.prototype.post=function(){return this._send({body:void 0,ignoreId:!0,method:"post",query:void 0}).then(function(t){return t.json()})},e.prototype.postRaw=function(){return this._send({body:void 0,ignoreId:!0,method:"post",query:void 0})},e}(o.default);e.default=i},function(t,e,n){"use strict";function r(){o.clientInfo()}Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(40),s=n(145),u=n(66);s.default.then(function(t){o=new u.default(new i({cachePrefix:"rc-client-test"}))}),describe("client",function(){it("covers all",r)})},function(t,e,n){(function(t){"use strict";function r(){var e="/data/rc-auth.json";return"undefined"==typeof t||t.browser?o(e).then(function(t){return t.json()}):Promise.resolve(!function(){var t=new Error('Cannot find module ".."');throw t.code="MODULE_NOT_FOUND",t}())}Object.defineProperty(e,"__esModule",{value:!0}),n(53);var o=n(146);e.default=r()}).call(e,n(54))},function(t,e,n){n(147),t.exports=self.fetch.bind(self)},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return b.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function s(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function u(t){var e=new FileReader,n=s(e);return e.readAsArrayBuffer(t),n}function a(t){var e=new FileReader,n=s(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(b.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(b.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(b.arrayBuffer&&b.blob&&m(t))this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return w.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var n=e.body;if(t instanceof d){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function l(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}}),e}function y(t){var e=new o;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}}),e}function g(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var b={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(b.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&v.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,r){t=e(t),r=n(r);var o=this.map[t];this.map[t]=o?o+","+r:r},o.prototype.delete=function(t){delete this.map[e(t)]},o.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,r){this.map[e(t)]=n(r)},o.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},b.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},h.call(d.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var O=[301,302,303,307,308];g.redirect=function(t,e){if(O.indexOf(e)===-1)throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=d,t.Response=g,t.fetch=function(t,e){return new Promise(function(n,r){var o=new d(t,e),i=new XMLHttpRequest;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;n(new g(e,t))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&b.blob&&(i.responseType="blob"),o.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=148},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),i=n(39),s=n(40),u=n(66),a=n(145);!!i.createReadStream;before(function(){return a.default.then(function(t){var e=t;return r=new u.default(new s(e.app)),r.service.platform().login(e.user)})}),describe("PathSegments",function(){it("AnsweringRule",function(){var t,e=r.account().extension();return e.answeringRule().post({callers:[{callerId:"+46843216868"}],enabled:!1}).then(function(e){return t=e.id}).then(function(n){return e.answeringRule(t).get()}).then(function(n){return e.answeringRule(t).put({name:"updated."})}).then(function(t){return e.answeringRule().list()}).then(function(n){return e.answeringRule(t).delete()})}),it("gets business hours rule",function(){return r.account().extension().businessHours().get()}),describe("BlockedNumber",function(){it("covers all",function(){var t,e=r.account().extension(),n="+18989999";return e.blockedNumber().post({phoneNumber:n}).then(function(r){return t=r.id,o.expect(r.phoneNumber).to.eqls(n),e.blockedNumber(t).get()}).then(function(t){return e.blockedNumber().list()}).then(function(t){}).then(function(t){}).then(function(n){return e.blockedNumber(t).delete()})})}),describe("Contacts",function(){it("covers all",function(){var t,e=r.account().extension().addressBook();return e.contact().post({firstName:"Test"}).then(function(e){t=e.id}).then(function(n){return e.contact(t).get()}).then(function(t){return e.contact().list()}).then(function(n){return e.contact(t).put({firstName:"ModifiedFirstName"})}).then(function(n){return e.contact(t).delete()})})}),describe("Subscription",function(){it("covers all",function(){var t;return r.subscription().post({deliveryMode:{transportType:"PubNub",encryption:!0},eventFilters:["/restapi/v1.0/account/~/extension/~/presence?detailedTelephonyState=true"]}).then(function(e){return t=e.id}).then(function(e){return r.subscription(t).get()}).then(function(e){return r.subscription(t).put({eventFilters:["/restapi/v1.0/account/~/extension/~/message-store"]})}).then(function(e){return r.subscription(t).delete()})})}),describe("Meeting",function(){it.skip("covers all",function(){var t,e=r.account().extension();return e.meeting().post({meetingType:"Instant"}).then(function(e){return t=e.id}).then(function(n){return e.meeting(t).delete()}).catch(function(t){return o.expect(!1,t)})}),it("service info",function(){return r.account().extension().meeting().serviceInfo().get()})}),describe("Ringout",function(){it("covers all",function(){var t;return r.account().extension().ringOut().post({from:{phoneNumber:"+16507411615"},to:{phoneNumber:"+13213042353"}}).then(function(e){return t=e.id;
}).then(function(e){return r.account().extension().ringOut(t).get()}).then(function(e){return r.account().extension().ringOut(t).delete()})})}),describe("ForwardingNumber",function(){it("covers all",function(){return r.account().extension().forwardingNumber().list()})}),describe("Greeting",function(){}),describe("Conferencing",function(){}),describe("Country",function(){it("covers all",function(){return r.dictionary().country().list().then(function(t){if(t.records.length>0)return r.dictionary().country(t.records[0].id).get()})})}),describe("State",function(){it("covers all",function(){return r.dictionary().state().list().then(function(t){if(t.records.length>0)return r.dictionary().state(t.records[0].id).get()})})}),describe("Device",function(){it("covers all",function(){return r.account().device().list().then(function(t){if(t.records.length>0)return r.account().device(t.records[0].id).get()})})}),describe("Timezone",function(){it("covers all",function(){return r.dictionary().timezone().list().then(function(t){if(t.records.length>0)return r.dictionary().timezone(t.records[0].id).get()})})}),describe("PhoneNumber",function(){it("covers all",function(){return r.account().phoneNumber().list().then(function(t){if(t.records.length>0)return r.account().phoneNumber(t.records[0].id).get()})})}),describe("Language",function(){it("covers all",function(){return r.dictionary().language().list().then(function(t){if(t.records.length>0)return r.dictionary().language(t.records[0].id).get()})})}),describe("Message",function(){it("covers all",function(){var t;return r.account().extension().companyPager().post({text:"js-client unit test.",to:[{extensionNumber:"101"}]}).then(function(e){return t=e.id}).then(function(t){return r.account().extension().messageStore().list()}).then(function(e){return r.account().extension().messageStore(t).put({readStatus:"Read"})}).then(function(e){return r.account().extension().messageStore(t).get()}).then(function(e){return r.account().extension().messageStore(t).delete()})}),it("gets sync message",function(){return r.account().extension().messageSync().list()})}),describe("AuthzProfile",function(){it("covers all",function(){return r.account().extension().authzProfile().get().then(function(t){return r.account().extension().authzProfile().check().get()})})}),describe("ActiveCalls",function(){it("covers all",function(){return r.account().extension().activeCalls().list()})}),describe("Grant",function(){it("covers all",function(){return r.account().extension().grant().list()})}),describe("Location",function(){it("covers all",function(){return r.dictionary().state().list().then(function(t){if(t.records.length>0)return r.dictionary().location().list({stateId:t.records[0].id})})})}),describe("Department",function(){it("covers all",function(){return r.account().department().members().list()})}),describe("BusinessAddress",function(){it("covers all",function(){return r.account().businessAddress().get().then(function(t){return r.account().businessAddress().put({email:"js-client-test@ringcentral.com"})})})}),describe("Presence",function(){it("covers all",function(){return r.account().extension().presence().get()})}),describe("CallLog",function(){it("gets call log sync",function(){return r.account().extension().callLogSync().list({recordCount:5})})}),describe("AddressBook",function(){it("gets address book sync",function(){return r.account().extension().addressBookSync().list()})}),describe("NumberParser",function(){it("parses number",function(){return r.numberParser().parse().post({originalStrings:"+8618657118272"})})})}),describe("Glip",function(){it("Get current company",function(){return r.glip().companies("~").get().then(function(t){o.expect(t).to.has.keys("id","name","domain","creationTime","lastModifiedTime")})}),it("List groups",function(){return r.glip().groups().list().then(function(t){o.expect(t.records[0]).has.keys("id","name","description","type","members","isPublic","creationTime","lastModifiedTime")})}),it("Get current user",function(){return r.glip().persons("~").get().then(function(t){o.expect(t).to.has.keys("id","firstName","lastName","email","companyId","creationTime","lastModifiedTime")})}),it("Posts",function(){return r.glip().groups().list().then(function(t){return r.glip().groups(t.records[0].id).posts().list()}).then(function(t){o.expect(t.records[0]).to.has.keys("id","groupId","type","text","creatorId","addedPersonIds","creationTime","lastModifiedTime","attachments","activity","title","iconUri","iconEmoji","mentions")})})})}]);
//# sourceMappingURL=tests.js.map